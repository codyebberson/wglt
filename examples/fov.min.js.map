{"version":3,"sources":["webpack://wglt/webpack/universalModuleDefinition","webpack://wglt/./src/color.ts","webpack://wglt/./src/colors.ts","webpack://wglt/./src/path.ts","webpack://wglt/./src/blendmode.ts","webpack://wglt/./src/chars.ts","webpack://wglt/./src/cell.ts","webpack://wglt/./src/console.ts","webpack://wglt/./src/input.ts","webpack://wglt/./src/keys.ts","webpack://wglt/./src/font.ts","webpack://wglt/./src/point.ts","webpack://wglt/./src/rect.ts","webpack://wglt/./src/mouse.ts","webpack://wglt/./src/terminal.ts","webpack://wglt/./src/fov.ts","webpack://wglt/./examples/fov.ts","webpack://wglt/./src/shaders.ts","webpack://wglt/webpack/bootstrap","webpack://wglt/webpack/startup","webpack://wglt/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","define","amd","globalThis","fromRgb","r","g","b","a","undefined","Colors","BLACK","WHITE","LIGHT_GRAY","DARK_GRAY","YELLOW","BROWN","LIGHT_RED","DARK_RED","LIGHT_GREEN","DARK_GREEN","LIGHT_CYAN","DARK_CYAN","LIGHT_BLUE","DARK_BLUE","LIGHT_MAGENTA","DARK_MAGENTA","ORANGE","dxs","dys","costs","BlendMode","Chars","pathId","buildPath","cell","result","curr","push","prev","reverse","SortedSet","constructor","initialValues","this","values","insert","array","low","high","length","index","mid","midCell","h","splice","pop","size","Cell","x","y","charCode","fg","bg","charCodeAt","convertCharCode","dirty","blocked","blockedSight","explored","visible","setCharCode","setForeground","setBackground","setValue","drawCell","None","otherCell","blendMode","alpha","blendColors","c1","c2","w1","w2","r1","g1","b1","r2","g2","b2","Blend","Add","clamp","Math","min","Console","width","height","blockedFunc","grid","originX","originY","minX","maxX","minY","maxY","radius","row","clear","drawChar","getCell","getCharCode","c","drawString","str","lines","split","i","line","j","drawCenteredString","floor","drawHLine","xi","drawVLine","yi","drawRect","drawBox","topChar","rightChar","bottomChar","leftChar","topLeftChar","topRightChar","bottomRightChar","bottomLeftChar","fillRect","drawSingleBox","BOX_SINGLE_HORIZONTAL","BOX_SINGLE_VERTICAL","BOX_SINGLE_DOWN_AND_SINGLE_RIGHT","BOX_SINGLE_DOWN_AND_SINGLE_LEFT","BOX_SINGLE_UP_AND_SINGLE_LEFT","BOX_SINGLE_UP_AND_SINGLE_RIGHT","drawDoubleBox","BOX_DOUBLE_HORIZONTAL","BOX_DOUBLE_VERTICAL","BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT","BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT","BOX_DOUBLE_UP_AND_DOUBLE_LEFT","BOX_DOUBLE_UP_AND_DOUBLE_RIGHT","drawConsole","dstX","dstY","srcConsole","srcX","srcY","srcWidth","srcHeight","setBlocked","setBlockedSight","isVisible","isBlocked","isBlockedSight","computeOctantY","deltaX","deltaY","startSlopes","endSlopes","halfSlope","processedCell","extended","centreSlope","startSlope","endSlope","previousEndSlope","iteration","totalObstacles","obstaclesInLastLine","minSlope","idx","max","computeOctantX","computeFov","opt_noClear","opt_octants","updateExplored","tile","Input","down","downCount","upCount","update","isPressed","count","isClicked","KEY_COUNT","Keyboard","el","keys","Array","addEventListener","e","setKey","state","keyCode","Keys","VK_F11","stopPropagation","preventDefault","updateKeys","getKey","DEFAULT_FONT","url","charWidth","charHeight","scale","graphical","Point","Rect","left","top","x2","y2","getCenter","intersects","other","contains","point","Mouse","terminal","canvas","prevX","prevY","dx","dy","buttons","handleEvent","touchEventHandler","handleTouchEvent","bind","touches","touch","updatePosition","clientX","clientY","type","button","focus","rect","getBoundingClientRect","terminalAspectRatio","rectAspectRatio","actualWidth","excess","actualHeight","interpolate","DEFAULT_OPTIONS","font","requestFullscreen","FovOctants","FovQuadrants","MAP","MAP_WIDTH","MAP_HEIGHT","OFFSET_X","OFFSET_Y","getTile","charAt","term","options","super","pixelWidth","pixelHeight","style","imageRendering","outline","tabIndex","handleResize","window","mouse","gl","getContext","antialias","Error","program","createProgram","attachShader","buildShader","VERTEX_SHADER","FRAGMENT_SHADER","linkProgram","useProgram","uniform1i","getUniformLocation","positionAttribLocation","getAttribLocation","textureAttribLocation","fgColorAttribLocation","bgColorAttribLocation","cellCount","positionsArray","Float32Array","indexArray","Uint16Array","textureArray","foregroundUint8Array","Uint8Array","foregroundDataView","DataView","buffer","backgroundUint8Array","backgroundDataView","k","positionBuffer","createBuffer","indexBuffer","textureBuffer","foregroundBuffer","backgroundBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","texture","loadTexture","frameRate","setInterval","renderLoop","parent","parentElement","widthFactor","offsetWidth","heightFactor","offsetHeight","factor","name","location","enableVertexAttribArray","flush","textureArrayIndex","colorArrayIndex","textureX","textureY","setUint32","isKeyDown","key","isKeyPressed","getKeyDownCount","source","sh","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","createTexture","bindTexture","TEXTURE_2D","internalFormat","RGBA","srcFormat","srcType","UNSIGNED_BYTE","pixel","texImage2D","image","Image","onload","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","src","render","clearColor","clearDepth","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","viewport","numComponents","FLOAT","normalize","stride","offset","vertexAttribPointer","DYNAMIC_DRAW","activeTexture","TEXTURE0","vertexCount","UNSIGNED_SHORT","drawElements","TRIANGLES","document","querySelector","game","player","direction","QUADRANT_NORTH","path","pathIndex","tileMap","movePlayer","QUADRANT_SOUTHEAST","QUADRANT_EAST","QUADRANT_NORTHEAST","QUADRANT_SOUTHWEST","QUADRANT_WEST","QUADRANT_NORTHWEST","QUADRANT_SOUTH","getFovQuadrant","VK_UP","VK_LEFT","VK_RIGHT","VK_DOWN","color","dest","map","maxDist","sourceCell","hypot","q","u","v","Infinity","alt","computePath","step","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","Symbol","toStringTag","Object","defineProperty","value"],"mappings":"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","file":"fov.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wglt\"] = factory();\n\telse\n\t\troot[\"wglt\"] = factory();\n})(globalThis, function() {\nreturn ","\nexport type Color = number;\n\n/**\n * Creates a big-endian 32-bit RGBA color from red, green, and blue components.\n * @param r Red (0-255).\n * @param g Green (0-255).\n * @param b Blue (0-255).\n * @param a Optional alpha (0-255).\n * @return A 32-bit unsigned integer color.\n */\nexport function fromRgb(r: number, g: number, b: number, a?: number): Color {\n  if (a === undefined) {\n    a = 255;\n  }\n  return ((r << 24) + (g << 16) + (b << 8) + a);\n}\n\n\n/**\n * Converts a color from HSV format to RGBA format.\n *\n * Based on: https://stackoverflow.com/a/17243070/2051724\n *\n * @param h Hue (0.0 - 1.0).\n * @param s Saturation (0.0 - 1.0).\n * @param v Value (0.0 - 1.0).\n * @param a Optional alpha (0.0 - 1.0).\n * @return A 32-bit unsigned integer color.\n */\nexport function fromHsv(h: number, s: number, v: number, a?: number): Color {\n  const i = (h * 6) | 0;\n  const f = h * 6 - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n  let r, g, b;\n  switch (i % 6) {\n    case 0:\n      r = v, g = t, b = p;\n      break;\n    case 1:\n      r = q, g = v, b = p;\n      break;\n    case 2:\n      r = p, g = v, b = t;\n      break;\n    case 3:\n      r = p, g = q, b = v;\n      break;\n    case 4:\n      r = t, g = p, b = v;\n      break;\n    case 5:\n      r = v, g = p, b = q;\n      break;\n    default:\n      r = 0;\n      g = 0;\n      b = 0;\n  }\n  if (a === undefined) {\n    a = 1.0;\n  }\n  return fromRgb((r * 255) | 0, (g * 255) | 0, (b * 255) | 0, (a * 255) | 0);\n}\n","\nimport { fromRgb } from './color';\n\nexport const Colors = {\n  BLACK: fromRgb(0, 0, 0),\n  WHITE: fromRgb(0xff, 0xff, 0xff),\n  LIGHT_GRAY: fromRgb(0xaa, 0xaa, 0xaa),\n  DARK_GRAY: fromRgb(0x55, 0x55, 0x55),\n  YELLOW: fromRgb(0xff, 0xff, 0x55),\n  BROWN: fromRgb(0xaa, 0x55, 0x00),\n  LIGHT_RED: fromRgb(0xff, 0x55, 0x55),\n  DARK_RED: fromRgb(0xaa, 0x00, 0x00),\n  LIGHT_GREEN: fromRgb(0x55, 0xff, 0x55),\n  DARK_GREEN: fromRgb(0x00, 0xaa, 0x00),\n  LIGHT_CYAN: fromRgb(0x55, 0xff, 0xff),\n  DARK_CYAN: fromRgb(0x00, 0xaa, 0xaa),\n  LIGHT_BLUE: fromRgb(0x55, 0x55, 0xff),\n  DARK_BLUE: fromRgb(0x00, 0x00, 0xaa),\n  LIGHT_MAGENTA: fromRgb(0xff, 0x55, 0xff),\n  DARK_MAGENTA: fromRgb(0xaa, 0x00, 0xaa),\n  ORANGE: fromRgb(0xff, 0x88, 0x00),\n};\n","import { Console } from './console';\nimport { Cell } from './cell';\nimport { Point } from './point';\n\nconst dxs = [-1, 0, 1, -1, 1, -1, 0, 1];\nconst dys = [-1, -1, -1, 0, 0, 1, 1, 1];\nconst costs = [1.4, 1, 1.4, 1, 1, 1.4, 1, 1.4];\nlet pathId = 0;\n\n/**\n * Calculates Dijkstra's algorithm.\n *\n * @param {!Object} source Starting point, must have x and y properties.\n * @param {!Object=} opt_dest Optional destination point, must have x and y properties.\n * @param {!number=} opt_maxDist Optional maximum distance to examine.\n * @return {?Array} Array of steps if destination found; null otherwise.\n */\nexport function computePath(map: Console, source: Point, dest: Point, maxDist: number): Cell[] | undefined {\n  pathId++;\n\n  const sourceCell = map.grid[source.y][source.x];\n  sourceCell.pathId = pathId;\n  sourceCell.g = 0.0;\n  sourceCell.h = Math.hypot(source.x - dest.x, source.y - dest.y);\n  sourceCell.prev = null;\n\n  const q = new SortedSet([sourceCell]);\n\n  while (q.size() > 0) {\n    const u = q.pop() as Cell;\n\n    if (u.x === dest.x && u.y === dest.y) {\n      return buildPath(u);\n    }\n\n    for (let i = 0; i < dxs.length; i++) {\n      const x = u.x + dxs[i];\n      const y = u.y + dys[i];\n      if (x >= 0 && x < map.width && y >= 0 && y < map.height) {\n        const v = map.grid[y][x];\n        if (v.blocked && v.explored && (x !== dest.x || y !== dest.y)) {\n          continue;\n        }\n        if (v.pathId !== pathId) {\n          v.pathId = pathId;\n          v.g = Infinity;\n          v.h = Math.hypot(x - dest.x, y - dest.y);\n          v.prev = null;\n        }\n        const alt = u.g + costs[i];\n        if (alt < v.g && alt <= maxDist) {\n          v.g = alt;\n          v.prev = u;\n          q.insert(v);\n        }\n      }\n    }\n  }\n  return undefined;\n}\n\nfunction buildPath(cell: Cell): Cell[] {\n  const result = [];\n  let curr: Cell | null = cell;\n  while (curr) {\n    result.push(curr);\n    curr = curr.prev;\n  }\n  result.reverse();\n  return result;\n}\n\nclass SortedSet {\n  private readonly values: Cell[];\n\n  constructor(initialValues: Cell[]) {\n    this.values = initialValues\n  }\n\n  insert(cell: Cell): void {\n    const array = this.values;\n    let low = 0;\n    let high = array.length;\n    let index = 0;\n\n    while (low < high) {\n      const mid = (low + high) >>> 1;\n      const midCell = array[mid];\n      if (midCell.g + midCell.h > cell.g + cell.h) {\n        low = mid + 1;\n        index = low;\n      } else {\n        high = mid;\n        index = high;\n      }\n    }\n    array.splice(index, 0, cell);\n  }\n\n  pop(): Cell | undefined {\n    return this.values.pop();\n  }\n\n  size(): number {\n    return this.values.length;\n  }\n}","\n/**\n * The BlendMode enum defines how translucent cells are rendered.\n */\nexport enum BlendMode {\n  /**\n   * No blending.  Alpha is ignored.\n   */\n  None = 0,\n\n  /**\n   * Alpha blending.\n   *\n   * dstRGB = (srcRGB * srcA) + (dstRGB * (1-srcA))\n   *\n   * dstA = srcA + (dstA * (1-srcA))\n   */\n  Blend = 1,\n\n  /**\n   * Additive blending.\n   *\n   * dstRGB = (srcRGB * srcA) + dstRGB\n   *\n   * dstA = dstA\n   */\n  Add = 2\n}\n","\n\n// https://en.wikipedia.org/wiki/Code_page_437\n// https://en.wikipedia.org/wiki/Block_Elements\n// https://en.wikipedia.org/wiki/Box-drawing_character\n\nexport enum Chars {\n  SMILEY = 1,\n  INVERSE_SMILEY = 2,\n  HEART = 3,\n  DIAMOND = 4,\n  CLUB = 5,\n  SPADE = 6,\n  BULLET = 7,\n  INVERSE_BULLET = 8,\n\n  LIGHT_SHADE = 176,\n  MEDIUM_SHADE = 177,\n  DARK_SHADE = 178,\n\n  BOX_SINGLE_VERTICAL = 179,\n  BOX_SINGLE_VERTICAL_AND_SINGLE_LEFT = 180,\n  BOX_DOUBLE_VERTICAL_AND_DOUBLE_LEFT = 185,\n  BOX_DOUBLE_VERTICAL = 186,\n  BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT = 187,\n  BOX_DOUBLE_UP_AND_DOUBLE_LEFT = 188,\n  BOX_SINGLE_DOWN_AND_SINGLE_LEFT = 191,\n  BOX_SINGLE_UP_AND_SINGLE_RIGHT = 192,\n  BOX_SINGLE_HORIZONTAL_AND_SINGLE_UP = 193,\n  BOX_SINGLE_HORIZONTAL_AND_SINGLE_DOWN = 194,\n  BOX_SINGLE_VERTICAL_AND_SINGLE_RIGHT = 195,\n  BOX_SINGLE_HORIZONTAL = 196,\n  BOX_SINGLE_VERTICAL_AND_SINGLE_HORIZONTAL = 197,\n  BOX_DOUBLE_UP_AND_DOUBLE_RIGHT = 200,\n  BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT = 201,\n  BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_UP = 202,\n  BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_DOWN = 203,\n  BOX_DOUBLE_VERTICAL_AND_DOUBLE_RIGHT = 204,\n  BOX_DOUBLE_HORIZONTAL = 205,\n  BOX_DOUBLE_VERTICAL_AND_DOUBLE_HORIZONTAL = 206,\n  BOX_SINGLE_UP_AND_SINGLE_LEFT = 13 * 16 + 9,\n  BOX_SINGLE_DOWN_AND_SINGLE_RIGHT = 13 * 16 + 10,\n\n  BLOCK_FULL = 219,\n  BLOCK_BOTTOM_HALF = 13 * 16 + 12,\n  BLOCK_LEFT_HALF = 13 * 16 + 13,\n  BLOCK_RIGHT_HALF = 13 * 16 + 14,\n  BLOCK_TOP_HALF = 13 * 16 + 15,\n}\n","\nimport { BlendMode } from './blendmode';\nimport { Colors } from './colors';\nimport { Color, fromRgb } from './color';\n\nfunction convertCharCode(charCode: string | number): number {\n  if ((typeof charCode === 'string') && charCode.length > 0) {\n    return charCode.charCodeAt(0);\n  } else {\n    return charCode as number;\n  }\n}\n\nexport class Cell {\n  readonly x: number;\n  readonly y: number;\n  charCode: number;\n  fg: Color;\n  bg: Color;\n  dirty: boolean;\n  blocked: boolean;\n  blockedSight: boolean;\n  explored: boolean;\n  visible: boolean;\n  pathId: number;\n  g: number;\n  h: number;\n  prev: Cell | null;\n\n  constructor(x: number, y: number, charCode?: string | number, fg?: Color, bg?: Color) {\n    this.x = x;\n    this.y = y;\n\n    if (charCode !== undefined) {\n      this.charCode = convertCharCode(charCode);\n    } else {\n      this.charCode = ' '.charCodeAt(0);\n    }\n\n    if (fg !== undefined) {\n      this.fg = fg;\n    } else {\n      this.fg = Colors.WHITE;\n    }\n\n    if (bg !== undefined) {\n      this.bg = bg;\n    } else {\n      this.bg = Colors.BLACK;\n    }\n\n    this.dirty = true;\n    this.blocked = false;\n    this.blockedSight = false;\n    this.explored = false;\n    this.visible = false;\n    this.pathId = -1;\n    this.g = 0;\n    this.h = 0;\n    this.prev = null;\n  }\n\n  setCharCode(charCode: number): void {\n    if (this.charCode !== charCode) {\n      this.charCode = charCode;\n      this.dirty = true;\n    }\n  }\n\n  setForeground(fg: Color): void {\n    if (fg !== undefined && fg !== null && fg !== this.fg) {\n      this.fg = fg;\n      this.dirty = true;\n    }\n  }\n\n  setBackground(bg: Color): void {\n    if (bg !== undefined && bg !== null && bg !== this.bg) {\n      this.bg = bg;\n      this.dirty = true;\n    }\n  }\n\n  setValue(charCode: string | number, fg?: Color, bg?: Color): boolean {\n    if (typeof charCode === 'string') {\n      charCode = charCode.charCodeAt(0);\n    }\n    if (typeof charCode === 'number') {\n      this.setCharCode(charCode);\n\n      if (fg !== undefined) {\n        this.setForeground(fg);\n      }\n      if (bg !== undefined) {\n        this.setBackground(bg);\n      }\n    } else {\n      this.drawCell(charCode, BlendMode.None);\n    }\n    return this.dirty;\n  }\n\n  drawCell(otherCell: Cell, blendMode?: BlendMode): void {\n    const alpha = otherCell.bg & 0xFF;\n\n    if (blendMode === BlendMode.None || otherCell.charCode > 0) {\n      this.setCharCode(otherCell.charCode);\n      this.setForeground(otherCell.fg);\n    } else if (alpha > 0 && alpha < 255) {\n      this.setForeground(this.blendColors(this.fg, otherCell.bg, blendMode));\n    }\n\n    if (blendMode === BlendMode.None || alpha === 255) {\n      this.setBackground(otherCell.bg);\n    } else if (alpha > 0) {\n      this.setBackground(this.blendColors(this.bg, otherCell.bg, blendMode));\n    }\n  }\n\n  private blendColors(c1: Color, c2: Color, blendMode?: BlendMode): Color {\n    const alpha = c2 & 0xFF;\n    const w1 = (255 - alpha) / 255.0;\n    const w2 = 1.0 - w1;\n    const r1 = (c1 >> 24) & 0xFF;\n    const g1 = (c1 >> 16) & 0xFF;\n    const b1 = (c1 >> 8) & 0xFF;\n    const r2 = (c2 >> 24) & 0xFF;\n    const g2 = (c2 >> 16) & 0xFF;\n    const b2 = (c2 >> 8) & 0xFF;\n\n    switch (blendMode) {\n      case BlendMode.Blend:\n        return fromRgb(\n          (w1 * r1 + w2 * r2) | 0, (w1 * g1 + w2 * g2) | 0,\n          (w1 * b1 + w2 * b2) | 0);\n\n      case BlendMode.Add:\n        return fromRgb(\n          this.clamp((r1 + w2 * r2) | 0), this.clamp((g1 + w2 * g2) | 0),\n          this.clamp((b1 + w2 * b2) | 0));\n\n      default:\n        return c2;\n    }\n  }\n\n  private clamp(x: number): number {\n    return Math.min(255, x);\n  }\n}\n","\nimport { BlendMode } from './blendmode';\nimport { Cell } from './cell';\nimport { Chars } from './chars';\nimport { Color } from './color';\n\nexport class Console {\n  readonly width: number;\n  readonly height: number;\n  readonly grid: Cell[][];\n  originX: number;\n  originY: number;\n  minX: number;\n  maxX: number;\n  minY: number;\n  maxY: number;\n  radius: number;\n\n  constructor(width: number, height: number, blockedFunc?: (x: number, y: number) => boolean) {\n    this.width = width;\n    this.height = height;\n    this.grid = [];\n    this.originX = 0;\n    this.originY = 0;\n    this.minX = 0;\n    this.maxX = 0;\n    this.minY = 0;\n    this.maxY = 0;\n    this.radius = 0;\n\n    for (let y = 0; y < height; y++) {\n      const row = [];\n      for (let x = 0; x < width; x++) {\n        row.push(new Cell(x, y));\n      }\n      this.grid.push(row);\n    }\n\n    this.clear();\n\n    if (blockedFunc) {\n      for (let y = 0; y < height; y++) {\n        for (let x = 0; x < width; x++) {\n          this.grid[y][x].blocked = this.grid[y][x].blockedSight = blockedFunc(x, y);\n        }\n      }\n    }\n  }\n\n  clear(): void {\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        this.drawChar(x, y, 0);\n      }\n    }\n  }\n\n  getCell(x: number, y: number): Cell|undefined {\n    if (x < 0 || y < 0 || x >= this.width || y >= this.height) {\n      return undefined;\n    }\n    return this.grid[y][x];\n  }\n\n  getCharCode(x: number, y: number): number|undefined {\n    if (x < 0 || y < 0 || x >= this.width || y >= this.height) {\n      return undefined;\n    }\n    return this.grid[y][x].charCode;\n  }\n\n  drawChar(x: number, y: number, c: string | number, fg?: Color, bg?: Color): void {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y | 0][x | 0].setValue(c, fg, bg);\n    }\n  }\n\n  drawString(x: number, y: number, str: string, fg?: Color, bg?: Color): void {\n    const lines = str.split('\\n');\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      for (let j = 0; j < line.length; j++) {\n        this.drawChar(x + j, y + i, line.charCodeAt(j), fg, bg);\n      }\n    }\n  }\n\n  drawCenteredString(x: number, y: number, str: string, fg?: Color, bg?: Color): void {\n    this.drawString(x - Math.floor(str.length / 2), y, str, fg, bg);\n  }\n\n  drawHLine(x: number, y: number, width: number, c: string | number, fg?: Color, bg?: Color): void {\n    for (let xi = x; xi < x + width; xi++) {\n      this.drawChar(xi, y, c, fg, bg);\n    }\n  }\n\n  drawVLine(x: number, y: number, height: number, c: string | number, fg?: Color, bg?: Color): void {\n    for (let yi = y; yi < y + height; yi++) {\n      this.drawChar(x, yi, c, fg, bg);\n    }\n  }\n\n  drawRect(x: number, y: number, width: number, height: number, c: string | number, fg?: Color, bg?: Color): void {\n    this.drawHLine(x, y, width, c, fg, bg);\n    this.drawHLine(x, y + height - 1, width, c, fg, bg);\n    this.drawVLine(x, y, height, c, fg, bg);\n    this.drawVLine(x + width - 1, y, height, c, fg, bg);\n  }\n\n  drawBox(\n    x: number, y: number, width: number, height: number,\n    topChar: number, rightChar: number, bottomChar: number, leftChar: number,\n    topLeftChar: number, topRightChar: number, bottomRightChar: number, bottomLeftChar: number,\n    fg?: Color, bg?: Color): void {\n    this.fillRect(x, y, width, height, 0, fg, bg);\n\n    this.drawHLine(x, y, width, topChar);\n    this.drawHLine(x, y + height - 1, width, bottomChar);\n\n    this.drawVLine(x, y, height, leftChar);\n    this.drawVLine(x + width - 1, y, height, rightChar);\n\n    this.drawChar(x, y, topLeftChar);\n    this.drawChar(x + width - 1, y, topRightChar);\n    this.drawChar(x, y + height - 1, bottomLeftChar);\n    this.drawChar(x + width - 1, y + height - 1, bottomRightChar);\n  }\n\n  drawSingleBox(x: number, y: number, width: number, height: number, fg?: Color, bg?: Color): void {\n    this.drawBox(\n      x, y, width, height, Chars.BOX_SINGLE_HORIZONTAL,\n      Chars.BOX_SINGLE_VERTICAL, Chars.BOX_SINGLE_HORIZONTAL,\n      Chars.BOX_SINGLE_VERTICAL, Chars.BOX_SINGLE_DOWN_AND_SINGLE_RIGHT,\n      Chars.BOX_SINGLE_DOWN_AND_SINGLE_LEFT,\n      Chars.BOX_SINGLE_UP_AND_SINGLE_LEFT,\n      Chars.BOX_SINGLE_UP_AND_SINGLE_RIGHT, fg, bg);\n  }\n\n  drawDoubleBox(x: number, y: number, width: number, height: number, fg?: Color, bg?: Color): void {\n    this.drawBox(\n      x, y, width, height, Chars.BOX_DOUBLE_HORIZONTAL,\n      Chars.BOX_DOUBLE_VERTICAL, Chars.BOX_DOUBLE_HORIZONTAL,\n      Chars.BOX_DOUBLE_VERTICAL, Chars.BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT,\n      Chars.BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT,\n      Chars.BOX_DOUBLE_UP_AND_DOUBLE_LEFT,\n      Chars.BOX_DOUBLE_UP_AND_DOUBLE_RIGHT, fg, bg);\n  }\n\n  fillRect(x: number, y: number, width: number, height: number, c: string | number, fg?: Color, bg?: Color): void {\n    for (let yi = y; yi < y + height; yi++) {\n      this.drawHLine(x, yi, width, c, fg, bg);\n    }\n  }\n\n  drawConsole(\n    dstX: number, dstY: number,\n    srcConsole: Console,\n    srcX: number, srcY: number, srcWidth: number, srcHeight: number,\n    blendMode?: BlendMode): void {\n\n    blendMode = blendMode || BlendMode.None;\n\n    for (let y = 0; y < srcHeight; y++) {\n      for (let x = 0; x < srcWidth; x++) {\n        const cell = srcConsole.getCell(srcX + x, srcY + y);\n        if (cell) {\n          this.drawCell(dstX + x, dstY + y, cell, blendMode);\n        }\n      }\n    }\n  }\n\n  drawCell(x: number, y: number, cell: Cell, blendMode?: BlendMode): void {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y][x].drawCell(cell, blendMode);\n    }\n  }\n\n  setBlocked(x: number, y: number, blocked: boolean): void {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y][x].blocked = blocked;\n    }\n  }\n\n  setBlockedSight(x: number, y: number, blockedSight: boolean): void {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y][x].blockedSight = blockedSight;\n    }\n  }\n\n  isVisible(x: number, y: number): boolean {\n    if (x < this.minX || x > this.maxX || y < this.minY || y > this.maxY) {\n      return false;\n    }\n    return this.grid[y][x].visible;\n  }\n\n  isBlocked(x: number, y: number): boolean {\n    if (x < 0 || x > this.width || y < 0 || y > this.height) {\n      return true;\n    }\n    return this.grid[y][x].blocked;\n  }\n\n  isBlockedSight(x: number, y: number): boolean {\n    if (x < 0 || x > this.width || y < 0 || y > this.height) {\n      return true;\n    }\n    return this.grid[y][x].blockedSight;\n  }\n\n  /**\n   * Compute the FOV in an octant adjacent to the Y axis\n   */\n  private computeOctantY(deltaX: number, deltaY: number): void {\n    const startSlopes: number[] = [];\n    const endSlopes: number[] = [];\n    let iteration = 1;\n    let totalObstacles = 0;\n    let obstaclesInLastLine = 0;\n    let minSlope = 0;\n    let x;\n    let y;\n    let halfSlope;\n    let processedCell;\n    let visible;\n    let extended;\n    let centreSlope;\n    let startSlope;\n    let endSlope;\n    let previousEndSlope;\n\n    for (y = this.originY + deltaY; y >= this.minY && y <= this.maxY;\n      y += deltaY, obstaclesInLastLine = totalObstacles, ++iteration) {\n      halfSlope = 0.5 / iteration;\n      previousEndSlope = -1;\n      for (processedCell = Math.floor(minSlope * iteration + 0.5),\n        x = this.originX + (processedCell * deltaX);\n        processedCell <= iteration && x >= this.minX && x <= this.maxX;\n        x += deltaX, ++processedCell, previousEndSlope = endSlope) {\n        visible = true;\n        extended = false;\n        centreSlope = processedCell / iteration;\n        startSlope = previousEndSlope;\n        endSlope = centreSlope + halfSlope;\n\n        if (obstaclesInLastLine > 0) {\n          if (!(this.grid[y - deltaY][x].visible &&\n            !this.grid[y - deltaY][x].blockedSight) &&\n            !(this.grid[y - deltaY][x - deltaX].visible &&\n              !this.grid[y - deltaY][x - deltaX].blockedSight)) {\n            visible = false;\n          } else {\n            for (let idx = 0; idx < obstaclesInLastLine && visible; ++idx) {\n              if (startSlope <= endSlopes[idx] &&\n                endSlope >= startSlopes[idx]) {\n                if (!this.grid[y][x].blockedSight) {\n                  if (centreSlope > startSlopes[idx] &&\n                    centreSlope < endSlopes[idx]) {\n                    visible = false;\n                    break;\n                  }\n                } else {\n                  if (startSlope >= startSlopes[idx] &&\n                    endSlope <= endSlopes[idx]) {\n                    visible = false;\n                    break;\n                  } else {\n                    startSlopes[idx] = Math.min(startSlopes[idx], startSlope);\n                    endSlopes[idx] = Math.max(endSlopes[idx], endSlope);\n                    extended = true;\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (visible) {\n          this.grid[y][x].visible = true;\n          if (this.grid[y][x].blockedSight) {\n            if (minSlope >= startSlope) {\n              minSlope = endSlope;\n            } else if (!extended) {\n              startSlopes[totalObstacles] = startSlope;\n              endSlopes[totalObstacles++] = endSlope;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Compute the FOV in an octant adjacent to the X axis\n   */\n  private computeOctantX(deltaX: number, deltaY: number): void {\n    const startSlopes: number[] = [];\n    const endSlopes: number[] = [];\n    let iteration = 1;\n    let totalObstacles = 0;\n    let obstaclesInLastLine = 0;\n    let minSlope = 0;\n    let x;\n    let y;\n    let halfSlope;\n    let processedCell;\n    let visible;\n    let extended;\n    let centreSlope;\n    let startSlope;\n    let endSlope;\n    let previousEndSlope;\n\n    for (x = this.originX + deltaX; x >= this.minX && x <= this.maxX;\n      x += deltaX, obstaclesInLastLine = totalObstacles, ++iteration) {\n      halfSlope = 0.5 / iteration;\n      previousEndSlope = -1;\n      for (processedCell = Math.floor(minSlope * iteration + 0.5),\n        y = this.originY + (processedCell * deltaY);\n        processedCell <= iteration && y >= this.minY && y <= this.maxY;\n        y += deltaY, ++processedCell, previousEndSlope = endSlope) {\n        visible = true;\n        extended = false;\n        centreSlope = processedCell / iteration;\n        startSlope = previousEndSlope;\n        endSlope = centreSlope + halfSlope;\n\n        if (obstaclesInLastLine > 0) {\n          if (!(this.grid[y][x - deltaX].visible &&\n            !this.grid[y][x - deltaX].blockedSight) &&\n            !(this.grid[y - deltaY][x - deltaX].visible &&\n              !this.grid[y - deltaY][x - deltaX].blockedSight)) {\n            visible = false;\n          } else {\n            for (let idx = 0; idx < obstaclesInLastLine && visible; ++idx) {\n              if (startSlope <= endSlopes[idx] &&\n                endSlope >= startSlopes[idx]) {\n                if (!this.grid[y][x].blockedSight) {\n                  if (centreSlope > startSlopes[idx] &&\n                    centreSlope < endSlopes[idx]) {\n                    visible = false;\n                    break;\n                  }\n                } else {\n                  if (startSlope >= startSlopes[idx] &&\n                    endSlope <= endSlopes[idx]) {\n                    visible = false;\n                    break;\n                  } else {\n                    startSlopes[idx] = Math.min(startSlopes[idx], startSlope);\n                    endSlopes[idx] = Math.max(endSlopes[idx], endSlope);\n                    extended = true;\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (visible) {\n          this.grid[y][x].visible = true;\n          if (this.grid[y][x].blockedSight) {\n            if (minSlope >= startSlope) {\n              minSlope = endSlope;\n            } else if (!extended) {\n              startSlopes[totalObstacles] = startSlope;\n              endSlopes[totalObstacles++] = endSlope;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  computeFov(originX: number, originY: number, radius: number, opt_noClear?: boolean, opt_octants?: number): void {\n    this.originX = originX;\n    this.originY = originY;\n    this.radius = radius;\n\n    if (opt_noClear) {\n      this.minX = Math.min(this.minX, Math.max(0, originX - radius));\n      this.minY = Math.min(this.minY, Math.max(0, originY - radius));\n      this.maxX = Math.max(this.maxX, Math.min(this.width - 1, originX + radius));\n      this.maxY = Math.max(this.maxY, Math.min(this.height - 1, originY + radius));\n\n    } else {\n      this.minX = Math.max(0, originX - radius);\n      this.minY = Math.max(0, originY - radius);\n      this.maxX = Math.min(this.width - 1, originX + radius);\n      this.maxY = Math.min(this.height - 1, originY + radius);\n\n      for (let y = this.minY; y <= this.maxY; y++) {\n        for (let x = this.minX; x <= this.maxX; x++) {\n          this.grid[y][x].visible = false;\n        }\n      }\n    }\n\n    this.grid[originY][originX].visible = true;\n\n    if (opt_octants === undefined) {\n      this.computeOctantY(1, 1);\n      this.computeOctantX(1, 1);\n      this.computeOctantX(1, -1);\n      this.computeOctantY(1, -1);\n      this.computeOctantY(-1, -1);\n      this.computeOctantX(-1, -1);\n      this.computeOctantX(-1, 1);\n      this.computeOctantY(-1, 1);\n    } else {\n      //   \\ 4 | 3 /\n      //    \\  |  /\n      //  5  \\ | /  2\n      //      \\|/\n      // ------+-------\n      //      /|\\\n      //  6  / | \\  1\n      //    /  |  \\\n      //   / 7 | 0 \\\n      if (opt_octants & 0x001) {\n        this.computeOctantY(1, 1);\n      }\n\n      if (opt_octants & 0x002) {\n        this.computeOctantX(1, 1);\n      }\n\n      if (opt_octants & 0x004) {\n        this.computeOctantX(1, -1);\n      }\n\n      if (opt_octants & 0x008) {\n        this.computeOctantY(1, -1);\n      }\n\n      if (opt_octants & 0x010) {\n        this.computeOctantY(-1, -1);\n      }\n\n      if (opt_octants & 0x020) {\n        this.computeOctantX(-1, -1);\n      }\n\n      if (opt_octants & 0x040) {\n        this.computeOctantX(-1, 1);\n      }\n\n      if (opt_octants & 0x080) {\n        this.computeOctantY(-1, 1);\n      }\n    }\n  }\n\n  /**\n   * All visible tiles are marked as explored.\n   */\n  updateExplored(): void {\n    for (let y = this.minY; y <= this.maxY; y++) {\n      for (let x = this.minX; x <= this.maxX; x++) {\n        const tile = this.grid[y][x];\n        tile.explored = tile.explored || tile.visible;\n      }\n    }\n  }\n}\n","\n/**\n * The delay in frames before input repeating.\n * Assume 60 FPS.\n */\nconst INPUT_REPEAT_DELAY = 6;\n\n/**\n * The delay between subsequent repeat firing.\n * Assume 60 FPS.\n */\nconst INPUT_REPEAT_RATE = 1;\n\n/**\n * The Input class represents a pysical input.\n * Example: keyboard key or mouse button.\n */\nexport class Input {\n    down: boolean;\n    downCount: number;\n    upCount: number;\n\n    constructor() {\n        this.down = false;\n        this.downCount = 0;\n        this.upCount = 0;\n    }\n\n    update(): void {\n        if (this.down) {\n            this.downCount++;\n            this.upCount = 0;\n        } else {\n            this.downCount = 0;\n            this.upCount++;\n        }\n    }\n\n    /**\n     * Returns true if the input is \"pressed\".\n     * Pressed is a one time event when the input first goes down.\n     * It then repeats on repeat delay.\n     */\n    isPressed(): boolean {\n        const count = this.downCount;\n        return count === 1 || (count > INPUT_REPEAT_DELAY && count % INPUT_REPEAT_RATE === 0);\n    }\n\n    /**\n     * Returns true if the input is \"clicked\".\n     * Clicked is a one time event when the input first goes up.\n     */\n    isClicked(): boolean {\n        return this.upCount === 1;\n    }\n}\n","import { Input } from './input';\n\n/**\n * Number of keys to track.\n */\nconst KEY_COUNT = 256;\n\nexport class Keyboard {\n  readonly keys: Input[];\n\n  /**\n   * Creates a new keyboard module.\n   *\n   * @param el DOM el to attach listeners.\n   */\n  constructor(el: HTMLElement) {\n    this.keys = new Array(KEY_COUNT);\n    for (let i = 0; i < KEY_COUNT; i++) {\n      this.keys[i] = new Input();\n    }\n\n    el.addEventListener('keydown', e => this.setKey(e, true));\n    el.addEventListener('keyup', e => this.setKey(e, false));\n  }\n\n\n  setKey(e: KeyboardEvent, state: boolean): void {\n    const keyCode = e.keyCode;\n    if (keyCode === Keys.VK_F11) {\n      // Allow fullscreen requests to go through\n      return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n    if (keyCode >= 0 && keyCode < KEY_COUNT) {\n      this.keys[keyCode].down = state;\n    }\n  }\n\n  updateKeys(): void {\n    for (let i = 0; i < KEY_COUNT; i++) {\n      this.keys[i].update();\n    }\n  }\n\n  getKey(keyCode: number): Input | null {\n    return keyCode >= 0 && keyCode < KEY_COUNT ? this.keys[keyCode] : null;\n  }\n}\n\nexport enum Keys {\n  VK_CANCEL = 3,\n  VK_HELP = 6,\n  VK_BACK_SPACE = 8,\n  VK_TAB = 9,\n  VK_CLEAR = 12,\n  VK_ENTER = 13,\n  VK_SHIFT = 16,\n  VK_CONTROL = 17,\n  VK_ALT = 18,\n  VK_PAUSE = 19,\n  VK_CAPS_LOCK = 20,\n  VK_ESCAPE = 27,\n  VK_SPACE = 32,\n  VK_PAGE_UP = 33,\n  VK_PAGE_DOWN = 34,\n  VK_END = 35,\n  VK_HOME = 36,\n  VK_LEFT = 37,\n  VK_UP = 38,\n  VK_RIGHT = 39,\n  VK_DOWN = 40,\n  VK_PRINTSCREEN = 44,\n  VK_INSERT = 45,\n  VK_DELETE = 46,\n  VK_0 = 48,\n  VK_1 = 49,\n  VK_2 = 50,\n  VK_3 = 51,\n  VK_4 = 52,\n  VK_5 = 53,\n  VK_6 = 54,\n  VK_7 = 55,\n  VK_8 = 56,\n  VK_9 = 57,\n  VK_COLON = 58,\n  VK_SEMICOLON = 59,\n  VK_LESS_THAN = 60,\n  VK_EQUALS = 61,\n  VK_GREATER_THAN = 62,\n  VK_QUESTION_MARK = 63,\n  VK_AT = 64,\n  VK_A = 65,\n  VK_B = 66,\n  VK_C = 67,\n  VK_D = 68,\n  VK_E = 69,\n  VK_F = 70,\n  VK_G = 71,\n  VK_H = 72,\n  VK_I = 73,\n  VK_J = 74,\n  VK_K = 75,\n  VK_L = 76,\n  VK_M = 77,\n  VK_N = 78,\n  VK_O = 79,\n  VK_P = 80,\n  VK_Q = 81,\n  VK_R = 82,\n  VK_S = 83,\n  VK_T = 84,\n  VK_U = 85,\n  VK_V = 86,\n  VK_W = 87,\n  VK_X = 88,\n  VK_Y = 89,\n  VK_Z = 90,\n  VK_CONTEXT_MENU = 93,\n  VK_NUMPAD0 = 96,\n  VK_NUMPAD1 = 97,\n  VK_NUMPAD2 = 98,\n  VK_NUMPAD3 = 99,\n  VK_NUMPAD4 = 100,\n  VK_NUMPAD5 = 101,\n  VK_NUMPAD6 = 102,\n  VK_NUMPAD7 = 103,\n  VK_NUMPAD8 = 104,\n  VK_NUMPAD9 = 105,\n  VK_MULTIPLY = 106,\n  VK_ADD = 107,\n  VK_SEPARATOR = 108,\n  VK_SUBTRACT = 109,\n  VK_DECIMAL = 110,\n  VK_DIVIDE = 111,\n  VK_F1 = 112,\n  VK_F2 = 113,\n  VK_F3 = 114,\n  VK_F4 = 115,\n  VK_F5 = 116,\n  VK_F6 = 117,\n  VK_F7 = 118,\n  VK_F8 = 119,\n  VK_F9 = 120,\n  VK_F10 = 121,\n  VK_F11 = 122,\n  VK_F12 = 123,\n  VK_F13 = 124,\n  VK_F14 = 125,\n  VK_F15 = 126,\n  VK_F16 = 127,\n  VK_F17 = 128,\n  VK_F18 = 129,\n  VK_F19 = 130,\n  VK_F20 = 131,\n  VK_F21 = 132,\n  VK_F22 = 133,\n  VK_F23 = 134,\n  VK_F24 = 135,\n  VK_NUM_LOCK = 144,\n  VK_SCROLL_LOCK = 145,\n  VK_CIRCUMFLEX = 160,\n  VK_EXCLAMATION = 161,\n  VK_DOUBLE_QUOTE = 162,\n  VK_HASH = 163,\n  VK_DOLLAR = 164,\n  VK_PERCENT = 165,\n  VK_AMPERSAND = 166,\n  VK_UNDERSCORE = 167,\n  VK_OPEN_PAREN = 168,\n  VK_CLOSE_PAREN = 169,\n  VK_ASTERISK = 170,\n  VK_PLUS = 171,\n  VK_PIPE = 172,\n  VK_HYPHEN_MINUS = 173,\n  VK_OPEN_CURLY_BRACKET = 174,\n  VK_CLOSE_CURLY_BRACKET = 175,\n  VK_TILDE = 176,\n  VK_COMMA = 188,\n  VK_PERIOD = 190,\n  VK_SLASH = 191,\n  VK_BACK_QUOTE = 192,\n  VK_OPEN_BRACKET = 219,\n  VK_BACK_SLASH = 220,\n  VK_CLOSE_BRACKET = 221,\n  VK_QUOTE = 222,\n  VK_META = 224,\n  VK_ALTGR = 225,\n  VK_WIN = 91,\n  VK_KANA = 21,\n  VK_HANGUL = 21,\n  VK_EISU = 22,\n  VK_JUNJA = 23,\n  VK_FINAL = 24,\n  VK_HANJA = 25,\n  VK_KANJI = 25,\n  VK_CONVERT = 28,\n  VK_NONCONVERT = 29,\n  VK_ACCEPT = 30,\n  VK_MODECHANGE = 31,\n  VK_SELECT = 41,\n  VK_PRINT = 42,\n  VK_EXECUTE = 43,\n  VK_SLEEP = 95,\n}\n","\nexport class Font {\n  readonly url: string;\n  readonly charWidth: number;\n  readonly charHeight: number;\n  readonly scale: number;\n  readonly graphical: boolean;\n\n  constructor(\n    url: string, charWidth: number, charHeight: number,\n    scale?: number, graphical?: boolean) {\n    this.url = url;\n    this.charWidth = charWidth;\n    this.charHeight = charHeight;\n    this.scale = scale || 1.0;\n    this.graphical = !!graphical;\n  }\n}\n\n/**\n * Font image as data URL.\n * IBM terminal font.\n * See img/font.png.\n */\nconst FONT_IMAGE = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQ' +\n  'MAAAD58POIAAAABlBMVEUAAAD///+l2Z/dAAAEhklEQVRIx42Sv4oUQRDGC4UzadSwwMUD8' +\n  'QEKlbWD4Q58B/NGpTVocKO1wXHUzMAH0AcwMTYVGg5ag0IzEXaRjdZEZKNzkKbHqtnzHypY' +\n  '09M9+5uvqr7pbYCuC6ftaRhgONXs30eAh0O1rYDm4IS/eH0B8GxRW2vxo396yu/fb0ZFrW1' +\n  'zcOXlPU/XPwK8PGjbWhVwM4KnH61912oK4+zmmHJaQotyt1kvtC2Atdo24iohPDiG/v4eIC' +\n  'JsY3Wy8Yvr0DSIBOdxgH6v8wsriWhc8s0AtaK/GzSl1jR0nSjQnwki6FQxNFKjgzO2a7BBq' +\n  'ucH7dL4M9z96CIhT1Fs/AgKgcA6dKCxI29DaHNwRJ4EGAU1sU0OG9rmE4SIc3A4FChACqqh' +\n  'JRwpxkqh9wxag4DSmEJ5DtpFwAP4GUf6lmKcFFti1BYuQp4xN8kxM2kNhjdkTOiTUeAKGvh' +\n  'A1rLpMbYACQzCITlTDRMbLYoEa2JWPSMRFZIupcSzMVKcEUkX+sOG+ChNX2vD8ex6k7OFHL' +\n  '0P1655JuPd53WAD+yTv3UrCQiuHmYBbfIxpkImuvpBQBkVb5g4XHv3JkNireG8AO9zDhBZu' +\n  '2z2OMZ11S5/RIlyMefMNaZ4GsCz5xcjyM6hHYEjAYEfO8Ig1rklAe9sRIeYAdwyoIBq6YIz' +\n  'CAKiWoifA3m3o2AzWcdYKOdY47EIf8QABCuYgIUVmdVMEYEDA0Hmo/3D6KKJbh5mxhP3UsW' +\n  'IE97wnEygyizOfOLi2JOJW8CeOblW9IHeKZgv4zxuzDryOmb+4aQH+MXV6e0ywdUcxqCjBW' +\n  'l5GpbzZduOG1QEiGXP86T7EfiJfkMQ4OO4H0yqyNC2zlziWEN7Ywuc2fQ4p5BNkS5QYXP2h' +\n  '5NtRJh0vCKQidtVJmCGAwDSSQpYggSxiRIyzewsgCh4xxiTPDMh5aj//l7btqkr6rQyIOtL' +\n  'ji4lVRQwXdzvus40Y53M33fh50GZwF4ExQeMlvuTggLzSi4ElKczUO7zVtpwdyMKdqZKOWb' +\n  '2nDblawPxPmuMwFEWBW+jlZR1eYtS442kiBGMWCi/h1/+GAR6NYOJWiqNJXFygFtrkx5C0O' +\n  '3IeFGs67HhEEhmBu/BUOT+0551pXxYIF+Elpi5AKRkLl5GUbCCZddyMv621ujEBPP4vSy2f' +\n  'otTx3U+d3WBiFOA6VSGSB49v/M7GBX9FPrDaT2c9qr4PCpwZ7qz813R94dVFIe19v33GlMZ' +\n  'UghQFb8BrfE7QBmgBMbrn2B3enn/y3B5+DL8UBAdnejdYdBxeV9ejwoYNTgW0Ok/gA7UG2G' +\n  'AzanhL0DG7q4svynwF8UwDPu7u/vD0IudzSltMtVbP+J/gUbR29oJ7Fg9s6Uy+DnpiTCOYc' +\n  '4cXOeXMWfsusSw7FOg9x655nax6BlecwpOQQ68WBwp+H2LMQTuOq2RUigzh2Q/R3CWARJIJ' +\n  'G199EwOTyKBlQMznshCRGeQ5gHABAQl6M4gLEdAzVaBWMCiANdsayDCHBA/hagKYfielrJI' +\n  'lipKKQIA9Nf3wBloTHT6BuAx15zRNa1nAAAAAElFTkSuQmCC';\n\nexport const DEFAULT_FONT = new Font(FONT_IMAGE, 8, 8);\n","\nexport class Point {\n  readonly x: number;\n  readonly y: number;\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import { Point } from './point';\n\nexport class Rect {\n  readonly x: number;\n  readonly y: number;\n  readonly width: number;\n  readonly height: number;\n  readonly left: number;\n  readonly top: number;\n  readonly x2: number;\n  readonly y2: number;\n\n  constructor(x: number, y: number, width: number, height: number) {\n    this.x = this.left = x;\n    this.y = this.top = y;\n    this.width = width;\n    this.height = height;\n    this.x2 = x + width;\n    this.y2 = y + height;\n  }\n\n  getCenter(): Point {\n    return new Point(this.x + (this.width / 2) | 0, this.y + (this.height / 2) | 0);\n  }\n\n  intersects(other: Rect): boolean {\n    return this.x <= other.x2 && this.x2 >= other.x && this.y <= other.y2 && this.y2 >= other.y;\n  }\n\n  contains(point: Point | Rect): boolean {\n    return point.x >= this.x && point.y < this.x2 && point.y >= this.y && point.y < this.y2;\n  }\n}\n","\nimport { Rect } from './rect';\nimport { Input } from './input';\nimport { Terminal } from './terminal';\n\nexport class Mouse {\n  readonly el: HTMLCanvasElement;\n  readonly width: number;\n  readonly height: number;\n  private prevX: number;\n  private prevY: number;\n  x: number;\n  y: number;\n  dx: number;\n  dy: number;\n  readonly buttons: Input[];\n\n  constructor(terminal: Terminal) {\n    this.el = terminal.canvas;\n    this.width = terminal.width;\n    this.height = terminal.height;\n    this.prevX = 0;\n    this.prevY = 0;\n    this.x = 0;\n    this.y = 0;\n    this.dx = 0;\n    this.dy = 0;\n    this.buttons = [new Input(), new Input(), new Input()];\n\n    const el = this.el;\n    el.addEventListener('mousedown', e => this.handleEvent(e));\n    el.addEventListener('mouseup', e => this.handleEvent(e));\n    el.addEventListener('mousemove', e => this.handleEvent(e));\n    el.addEventListener('contextmenu', e => this.handleEvent(e));\n\n    const touchEventHandler = this.handleTouchEvent.bind(this);\n    el.addEventListener('touchstart', touchEventHandler);\n    el.addEventListener('touchend', touchEventHandler);\n    el.addEventListener('touchcancel', touchEventHandler);\n    el.addEventListener('touchmove', touchEventHandler);\n  }\n\n  private handleTouchEvent(e: TouchEvent): void {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (e.touches.length > 0) {\n      const touch = e.touches[0];\n      this.updatePosition(touch.clientX, touch.clientY);\n      this.buttons[0].down = true;\n    } else {\n      this.buttons[0].down = false;\n    }\n  }\n\n  private handleEvent(e: MouseEvent): void {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.updatePosition(e.clientX, e.clientY);\n\n    if (e.type === 'mousedown') {\n      this.buttons[e.button].down = true;\n\n      this.el.focus();\n    }\n\n    if (e.type === 'mouseup') {\n      this.buttons[e.button].down = false;\n    }\n  }\n\n  private updatePosition(clientX: number, clientY: number): void {\n    let rect: Rect | DOMRect = this.el.getBoundingClientRect();\n\n    // If the client rect is not the same aspect ratio as canvas,\n    // then we are fullscreen.\n    // Need to update client rect accordingly.\n\n    const terminalAspectRatio = this.width / this.height;\n    const rectAspectRatio = rect.width / rect.height;\n\n    if (rectAspectRatio - terminalAspectRatio > 0.01) {\n      const actualWidth = terminalAspectRatio * rect.height;\n      const excess = rect.width - actualWidth;\n      rect = new Rect(Math.floor(excess / 2), 0, actualWidth, rect.height);\n    }\n\n    if (rectAspectRatio - terminalAspectRatio < -0.01) {\n      const actualHeight = rect.width / terminalAspectRatio;\n      const excess = rect.height - actualHeight;\n      rect = new Rect(0, Math.floor(excess / 2), rect.width, actualHeight);\n    }\n\n    this.x = (this.width * (clientX - rect.left) / rect.width) | 0;\n    this.y = (this.height * (clientY - rect.top) / rect.height) | 0;\n  }\n\n  update(): void {\n    this.dx = this.x - this.prevX;\n    this.dy = this.y - this.prevY;\n    this.prevX = this.x;\n    this.prevY = this.y;\n\n    for (let i = 0; i < this.buttons.length; i++) {\n      this.buttons[i].update();\n    }\n  }\n}","\nimport { Console } from './console';\nimport { Cell } from './cell';\nimport { DEFAULT_FONT, Font } from './font';\nimport { Keyboard } from './keys';\nimport { Mouse } from './mouse';\nimport { FRAGMENT_SHADER_SOURCE, VERTEX_SHADER_SOURCE } from './shaders';\n\n/**\n * Linearly interpolates a number in the range 0-max to -1.0-1.0.\n *\n * @param i The value between 0 and max.\n * @param max The maximum value.\n * @returns The interpolated value between -1.0 and 1.0.\n */\nfunction interpolate(i: number, max: number) {\n  return -1.0 + 2.0 * (i / max);\n}\n\nconst DEFAULT_OPTIONS = {\n  font: DEFAULT_FONT,\n  requestFullscreen: false,\n};\n\nexport class Terminal extends Console {\n  readonly canvas: HTMLCanvasElement;\n  readonly font: Font;\n  readonly pixelWidth: number;\n  readonly pixelHeight: number;\n  readonly keys: Keyboard;\n  readonly mouse: Mouse;\n  readonly gl: WebGLRenderingContext;\n  readonly program: WebGLProgram;\n  readonly positionAttribLocation: number;\n  readonly textureAttribLocation: number;\n  readonly fgColorAttribLocation: number;\n  readonly bgColorAttribLocation: number;\n  readonly positionsArray: Float32Array;\n  readonly indexArray: Uint16Array;\n  readonly textureArray: Float32Array;\n  readonly foregroundUint8Array: Uint8Array;\n  readonly foregroundDataView: DataView;\n  readonly backgroundUint8Array: Uint8Array;\n  readonly backgroundDataView: DataView;\n  readonly positionBuffer: WebGLBuffer;\n  readonly indexBuffer: WebGLBuffer;\n  readonly textureBuffer: WebGLBuffer;\n  readonly foregroundBuffer: WebGLBuffer;\n  readonly backgroundBuffer: WebGLBuffer;\n  readonly texture: WebGLTexture;\n  update?: () => void;\n\n  constructor(canvas: HTMLCanvasElement, width: number, height: number, options?: any) {\n    super(width, height);\n\n    options = options || DEFAULT_OPTIONS;\n\n    this.canvas = canvas;\n    this.font = options.font || DEFAULT_FONT;\n    this.pixelWidth = width * this.font.charWidth;\n    this.pixelHeight = height * this.font.charHeight;\n\n    canvas.width = this.pixelWidth;\n    canvas.height = this.pixelHeight;\n    canvas.style.imageRendering = 'pixelated';\n    canvas.style.outline = 'none';\n    canvas.tabIndex = 0;\n    this.handleResize();\n    window.addEventListener('resize', () => this.handleResize());\n\n    this.keys = new Keyboard(canvas);\n    this.mouse = new Mouse(this);\n\n    // Get the WebGL context from the canvas\n    const gl = canvas.getContext('webgl', { antialias: false });\n    if (!gl) {\n      throw new Error(\n        'Unable to initialize WebGL. Your browser may not support it.');\n    }\n\n    const program = gl.createProgram();\n    if (!program) {\n      throw new Error(\n        'Unable to initialize WebGL. Your browser may not support it.');\n    }\n\n    this.gl = gl;\n    this.program = program;\n\n    gl.attachShader(program, this.buildShader(gl.VERTEX_SHADER, VERTEX_SHADER_SOURCE));\n    gl.attachShader(program, this.buildShader(gl.FRAGMENT_SHADER, FRAGMENT_SHADER_SOURCE));\n    gl.linkProgram(program);\n    gl.useProgram(program);\n\n    if (this.font.graphical) {\n      // Set the flag to ignore foreground/background colors, and use texture\n      // directly\n      gl.uniform1i(gl.getUniformLocation(program, 'h'), 1);\n    }\n\n    this.positionAttribLocation = this.getAttribLocation('a');\n    this.textureAttribLocation = this.getAttribLocation('b');\n    this.fgColorAttribLocation = this.getAttribLocation('c');\n    this.bgColorAttribLocation = this.getAttribLocation('d');\n\n    const cellCount = width * height;\n    this.positionsArray = new Float32Array(cellCount * 3 * 4);\n    this.indexArray = new Uint16Array(cellCount * 6);\n    this.textureArray = new Float32Array(cellCount * 2 * 4);\n    this.foregroundUint8Array = new Uint8Array(cellCount * 4 * 4);\n    this.foregroundDataView = new DataView(this.foregroundUint8Array.buffer);\n    this.backgroundUint8Array = new Uint8Array(cellCount * 4 * 4);\n    this.backgroundDataView = new DataView(this.backgroundUint8Array.buffer);\n\n    // Init the positions buffer\n    let i = 0;\n    let j = 0;\n    let k = 0;\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        // Top-left\n        this.positionsArray[i++] = interpolate(x, width);\n        this.positionsArray[i++] = -interpolate(y, height);\n\n        // Top-right\n        this.positionsArray[i++] = interpolate(x + 1, width);\n        this.positionsArray[i++] = -interpolate(y, height);\n\n        // Bottom-right\n        this.positionsArray[i++] = interpolate(x + 1, width);\n        this.positionsArray[i++] = -interpolate(y + 1, height);\n\n        // Bottom-left\n        this.positionsArray[i++] = interpolate(x, width);\n        this.positionsArray[i++] = -interpolate(y + 1, height);\n\n        this.indexArray[j++] = k + 0;\n        this.indexArray[j++] = k + 1;\n        this.indexArray[j++] = k + 2;\n        this.indexArray[j++] = k + 0;\n        this.indexArray[j++] = k + 2;\n        this.indexArray[j++] = k + 3;\n\n        k += 4;\n      }\n    }\n\n    this.positionBuffer = gl.createBuffer() as WebGLBuffer;\n    this.indexBuffer = gl.createBuffer() as WebGLBuffer;\n    this.textureBuffer = gl.createBuffer() as WebGLBuffer;\n    this.foregroundBuffer = gl.createBuffer() as WebGLBuffer;\n    this.backgroundBuffer = gl.createBuffer() as WebGLBuffer;\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this.positionsArray, gl.STATIC_DRAW);\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indexArray, gl.STATIC_DRAW);\n\n    this.texture = this.loadTexture(this.font.url);\n\n    const frameRate = options.frameRate || 15;\n    window.setInterval(() => this.renderLoop(), 1000 / frameRate);\n  }\n\n  private handleResize() {\n    const parent = this.canvas.parentElement;\n    if (!parent) {\n      return;\n    }\n    const widthFactor = parent.offsetWidth / this.pixelWidth;\n    const heightFactor = parent.offsetHeight / this.pixelHeight;\n    const factor = Math.min(widthFactor, heightFactor);\n    const width = (factor * this.pixelWidth) | 0;\n    const height = (factor * this.pixelHeight) | 0;\n    this.canvas.style.width = width + 'px';\n    this.canvas.style.height = height + 'px';\n  }\n\n  private getAttribLocation(name: string) {\n    const location = this.gl.getAttribLocation(this.program, name);\n    this.gl.enableVertexAttribArray(location);\n    return location;\n  }\n\n  private flush() {\n    let textureArrayIndex = 0;\n    let colorArrayIndex = 0;\n\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        const cell = this.getCell(x, y) as Cell;\n\n        if (!cell.dirty) {\n          textureArrayIndex += 8;\n          colorArrayIndex += 16;\n          continue;\n        }\n\n        const textureX = (cell.charCode % 16);\n        const textureY = ((cell.charCode / 16) | 0);\n\n        this.textureArray[textureArrayIndex++] = textureX;\n        this.textureArray[textureArrayIndex++] = textureY;\n\n        this.textureArray[textureArrayIndex++] = textureX + 1;\n        this.textureArray[textureArrayIndex++] = textureY;\n\n        this.textureArray[textureArrayIndex++] = textureX + 1;\n        this.textureArray[textureArrayIndex++] = textureY + 1;\n\n        this.textureArray[textureArrayIndex++] = textureX;\n        this.textureArray[textureArrayIndex++] = textureY + 1;\n\n        for (let i = 0; i < 4; i++) {\n          this.foregroundDataView.setUint32(colorArrayIndex, cell.fg, false);\n          this.backgroundDataView.setUint32(colorArrayIndex, cell.bg, false);\n          colorArrayIndex += 4;\n        }\n\n        cell.dirty = false;\n      }\n    }\n  }\n\n  isKeyDown(keyCode: number): boolean {\n    const key = this.keys.getKey(keyCode);\n    return !!key && key.down;\n  }\n\n  isKeyPressed(keyCode: number): boolean {\n    const key = this.keys.getKey(keyCode);\n    return !!key && key.isPressed();\n  }\n\n  getKeyDownCount(keyCode: number): number {\n    const key = this.keys.getKey(keyCode);\n    return key ? key.downCount : 0;\n  }\n\n  private buildShader(type: number, source: string) {\n    const gl = this.gl;\n    const sh = gl.createShader(type);\n    if (!sh) {\n      throw new Error('An error occurred compiling the shader: ');\n    }\n    gl.shaderSource(sh, source);\n    gl.compileShader(sh);\n    if (!gl.getShaderParameter(sh, gl.COMPILE_STATUS)) {\n      throw new Error(\n        'An error occurred compiling the shader: ' + gl.getShaderInfoLog(sh));\n    }\n    return sh;\n  }\n\n  /**\n   * Initialize a texture and load an image.\n   * When the image finished loading copy it into the texture.\n   * @param url\n   */\n  private loadTexture(url: string) {\n    const gl = this.gl;\n    const texture = gl.createTexture() as WebGLTexture;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    // Because images have to be download over the internet\n    // they might take a moment until they are ready.\n    // Until then put a single pixel in the texture so we can\n    // use it immediately. When the image has finished downloading\n    // we'll update the texture with the contents of the image.\n    const level = 0;\n    const internalFormat = gl.RGBA;\n    const width = 1;\n    const height = 1;\n    const border = 0;\n    const srcFormat = gl.RGBA;\n    const srcType = gl.UNSIGNED_BYTE;\n    const pixel = new Uint8Array([0, 0, 0, 255]);  // opaque black\n    gl.texImage2D(\n      gl.TEXTURE_2D, level, internalFormat, width, height, border, srcFormat,\n      srcType, pixel);\n\n    const image = new Image();\n    image.onload = () => {\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texImage2D(\n        gl.TEXTURE_2D, level, internalFormat, srcFormat, srcType, image);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    };\n    image.src = url;\n\n    return texture;\n  }\n\n  //\n  // Draw the scene.\n  //\n  private render() {\n    const gl = this.gl;\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\n    gl.clearDepth(1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    gl.viewport(0, 0, this.pixelWidth, this.pixelHeight);\n\n    // Tell WebGL how to pull out the positions from the position\n    // buffer into the vertexPosition attribute\n    {\n      const numComponents = 2;\n      const type = gl.FLOAT;\n      const normalize = false;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n      gl.vertexAttribPointer(\n        this.positionAttribLocation, numComponents, type, normalize, stride,\n        offset);\n    }\n\n    // Tell WebGL how to pull out the texture coordinates from\n    // the texture coordinate buffer into the textureCoord attribute.\n    {\n      const numComponents = 2;\n      const type = gl.FLOAT;\n      const normalize = false;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.textureBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, this.textureArray, gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(\n        this.textureAttribLocation, numComponents, type, normalize, stride,\n        offset);\n    }\n\n    // Foreground color\n    {\n      const numComponents = 4;\n      const type = gl.UNSIGNED_BYTE;\n      const normalize = true;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.foregroundBuffer);\n      gl.bufferData(\n        gl.ARRAY_BUFFER, this.foregroundUint8Array, gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(\n        this.fgColorAttribLocation, numComponents, type, normalize, stride,\n        offset);\n    }\n\n    // Background color\n    {\n      const numComponents = 4;\n      const type = gl.UNSIGNED_BYTE;\n      const normalize = true;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.backgroundBuffer);\n      gl.bufferData(\n        gl.ARRAY_BUFFER, this.backgroundUint8Array, gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(\n        this.bgColorAttribLocation, numComponents, type, normalize, stride,\n        offset);\n    }\n\n    // Tell WebGL which indices to use to index the vertices\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n\n    // Tell WebGL to use our program when drawing\n    gl.useProgram(this.program);\n\n    // Tell WebGL we want to affect texture unit 0\n    gl.activeTexture(gl.TEXTURE0);\n\n    // Bind the texture to texture unit 0\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n    // Tell the shader we bound the texture to texture unit 0\n    {\n      const vertexCount = this.width * this.height * 6;\n      const type = gl.UNSIGNED_SHORT;\n      const offset = 0;\n      gl.drawElements(gl.TRIANGLES, vertexCount, type, offset);\n    }\n  }\n\n  private renderLoop() {\n    this.keys.updateKeys();\n    this.mouse.update();\n    if (this.update) {\n      this.update();\n    }\n    this.flush();\n    this.render();\n  }\n}\n","\n/**\n * The FovOctants constants provide bitmasks for various directions.\n *\n *     \\ 4 | 3 /\n *      \\  |  /\n *    5  \\ | /  2\n *        \\|/\n *   ------+-------\n *        /|\\\n *    6  / | \\  1\n *      /  |  \\\n *     / 7 | 0 \\\n *\n */\nexport enum FovOctants {\n  OCTANT_SOUTH_SOUTHEAST = 0x001,\n  OCTANT_EAST_SOUTHEAST = 0x002,\n  OCTANT_EAST_NORTHTHEAST = 0x004,\n  OCTANT_NORTH_NORTHEAST = 0x008,\n  OCTANT_NORTH_NORTHWEST = 0x010,\n  OCTANT_WEST_NORTHEAST = 0x020,\n  OCTANT_WEST_SOUTHWEST = 0x040,\n  OCTANT_SOUTH_SOUTHWEST = 0x080\n}\n\nexport enum FovQuadrants {\n  QUADRANT_SOUTHEAST = 0x001 + 0x002,\n  QUADRANT_EAST = 0x002 + 0x004,\n  QUADRANT_NORTHEAST = 0x004 + 0x008,\n  QUADRANT_NORTH = 0x008 + 0x010,\n  QUADRANT_NORTHWEST = 0x010 + 0x020,\n  QUADRANT_WEST = 0x020 + 0x040,\n  QUADRANT_SOUTHWEST = 0x040 + 0x080,\n  QUADRANT_SOUTH = 0x080 + 0x001,\n}\n\nexport function getFovQuadrant(dx: number, dy: number): FovQuadrants {\n  if (dx > 0) {\n    if (dy > 0) {\n      return FovQuadrants.QUADRANT_SOUTHEAST;\n    } else if (dy === 0) {\n      return FovQuadrants.QUADRANT_EAST;\n    } else {\n      return FovQuadrants.QUADRANT_NORTHEAST;\n    }\n  } else if (dx < 0) {\n    if (dy > 0) {\n      return FovQuadrants.QUADRANT_SOUTHWEST;\n    } else if (dy === 0) {\n      return FovQuadrants.QUADRANT_WEST;\n    } else {\n      return FovQuadrants.QUADRANT_NORTHWEST;\n    }\n  } else {\n    if (dy > 0) {\n      return FovQuadrants.QUADRANT_SOUTH;\n    } else {\n      return FovQuadrants.QUADRANT_NORTH;\n    }\n  }\n}\n","import { Cell } from '../src/cell';\nimport { Colors } from '../src/colors';\nimport { computePath } from '../src/path';\nimport { Console } from '../src/console';\nimport { Keys } from '../src/keys';\nimport { Terminal } from '../src/terminal';\nimport { getFovQuadrant, FovQuadrants } from '../src/fov';\n\nconst SCREEN_WIDTH = 80;\nconst SCREEN_HEIGHT = 45;\n\nconst MAP = [\n  '    ########        #########        ########    ',\n  '    #......#        #.......#        #......#    ',\n  '    #......#        #...#...#        #......#    ',\n  '    #....#.#        #.#####.#        #......#    ',\n  '    #....#.#        #...#...#        #......#    ',\n  '    #..###.#        #.......#        #......#    ',\n  '    #......##########.......##########......#    ',\n  '#####.......................................#####',\n  '#...............................................#',\n  '#...............................................#',\n  '#...............................................#',\n  '#...............................................#',\n  '#...............................................#',\n  '#####.......................................#####',\n  '    #......##########.......##########......#    ',\n  '    #......#        #.......#        #......#    ',\n  '    #......#        #.......#        #......#    ',\n  '    #......#        #.......#        #......#    ',\n  '    #......#        #.......#        #......#    ',\n  '    #......#        #.......#        #......#    ',\n  '    #......#        #.......#        #......#    ',\n  '    #......#        #.......#        #......#    ',\n  '    #......##########.......##########......#    ',\n  '#####.......................................#####',\n  '#...............................................#',\n  '#...............................................#',\n  '#...............................................#',\n  '#...............................................#',\n  '#...............................................#',\n  '#####.......................................#####',\n  '    #......#############.#############......#    ',\n  '    #......#        #..#.#..#        #......#    ',\n  '    #..#####        #..#.#..#        #......#    ',\n  '    #......#        #..#.#..#        #......#    ',\n  '    #####..#        #.......#        #......#    ',\n  '    #......#        #.......#        #......#    ',\n  '    ########        #########        ########    ',\n];\n\nconst MAP_WIDTH = MAP[0].length;\nconst MAP_HEIGHT = MAP.length;\n\nconst OFFSET_X = ((SCREEN_WIDTH - MAP_WIDTH) / 2) | 0;\nconst OFFSET_Y = ((SCREEN_HEIGHT - MAP_HEIGHT) / 2) | 0;\n\nconst VIEW_DISTANCE = 15;\n\nfunction getTile(x: number, y: number) {\n  return MAP[y].charAt(x);\n}\n\nfunction isBlocked(x: number, y: number) {\n  return getTile(x, y) !== '.';\n}\n\nconst term = new Terminal(\n  document.querySelector('canvas') as HTMLCanvasElement,\n  SCREEN_WIDTH,\n  SCREEN_HEIGHT);\n\nconst game = new Console(MAP_WIDTH, MAP_HEIGHT);\n\nconst player = {\n  x: Math.floor(MAP_WIDTH / 2),\n  y: Math.floor(MAP_HEIGHT / 2),\n  direction: FovQuadrants.QUADRANT_NORTH,\n  path: null as Cell[] | null,\n  pathIndex: 0\n};\n\nconst tileMap = new Console(MAP_WIDTH, MAP_HEIGHT, isBlocked);\n\nfunction computeFov() {\n  tileMap.computeFov(player.x, player.y, VIEW_DISTANCE, false, player.direction);\n  tileMap.updateExplored();\n}\n\nfunction movePlayer(dx: number, dy: number) {\n  const x = player.x + dx;\n  const y = player.y + dy;\n  if (x < 0 || x >= MAP_WIDTH || y < 0 || y >= MAP_HEIGHT || isBlocked(x, y)) {\n    return;\n  }\n  player.x = x;\n  player.y = y;\n  player.direction = getFovQuadrant(dx, dy);\n  computeFov();\n}\n\nterm.update = function () {\n  if (term.isKeyPressed(Keys.VK_UP)) {\n    movePlayer(0, -1);\n  }\n  if (term.isKeyPressed(Keys.VK_LEFT)) {\n    movePlayer(-1, 0);\n  }\n  if (term.isKeyPressed(Keys.VK_RIGHT)) {\n    movePlayer(1, 0);\n  }\n  if (term.isKeyPressed(Keys.VK_DOWN)) {\n    movePlayer(0, 1);\n  }\n\n  if (player.path) {\n    while (player.pathIndex < player.path.length &&\n      player.x === player.path[player.pathIndex].x &&\n      player.y === player.path[player.pathIndex].y) {\n      player.pathIndex++;\n    }\n    if (player.pathIndex < player.path.length) {\n      movePlayer(\n        player.path[player.pathIndex].x - player.x,\n        player.path[player.pathIndex].y - player.y);\n    }\n  }\n\n  term.clear();\n  game.fillRect(0, 0, MAP_WIDTH, MAP_HEIGHT, 0, 0, Colors.BLACK);\n\n  for (let y = 0; y < MAP_HEIGHT; y++) {\n    for (let x = 0; x < MAP_WIDTH; x++) {\n      const c = tileMap.getCell(x, y);\n      if (c && c.explored) {\n        const color = tileMap.isVisible(x, y) ? Colors.WHITE : Colors.DARK_GRAY;\n        game.drawString(x, y, getTile(x, y), color);\n      }\n    }\n  }\n\n  const dest = { x: term.mouse.x - OFFSET_X, y: term.mouse.y - OFFSET_Y };\n  const path = computePath(tileMap, player, dest, 1000);\n  if (path) {\n    for (let i = 1; i < path.length; i++) {\n      const step = path[i];\n      const cell = game.getCell(step.x, step.y);\n      if (cell) {\n        cell.setBackground(Colors.DARK_RED);\n      }\n    }\n\n    if (term.mouse.buttons[0].upCount === 1) {\n      player.path = path;\n      player.pathIndex = 0;\n    }\n  }\n\n  term.drawString(1, 1, 'Hello world!');\n  term.drawString(1, 3, 'Use arrow keys to move');\n  game.drawString(player.x, player.y, '@');\n  term.drawConsole(OFFSET_X, OFFSET_Y, game, 0, 0, MAP_WIDTH, MAP_HEIGHT);\n};\n\ncomputeFov();\n","\n/**\n * Vertex shader program.\n *\n * a = attribute vec2 aVertexPosition;\n * b = attribute vec2 aTextureCoord;\n * c = attribute vec3 aFgColor;\n * d = attribute vec3 aBgColor;\n * e = varying vec2 vTextureCoord;\n * f = varying vec4 vFgColor;\n * g = varying vec4 vBgColor;\n */\nexport const VERTEX_SHADER_SOURCE = 'attribute vec2 a;' +\n    'attribute vec2 b;' +\n    'attribute vec3 c;' +\n    'attribute vec3 d;' +\n    'varying highp vec2 e;' +\n    'varying highp vec4 f;' +\n    'varying highp vec4 g;' +\n    'void main(void){' +\n    'gl_Position=vec4(a.x,a.y,0,1);' +\n    'e=b/16.0;' +\n    'f=vec4(c.r,c.g,c.b,1);' +\n    'g=vec4(d.r,d.g,d.b,1);' +\n    '}';\n\n/**\n * Fragment shader program.\n *\n * e = varying vec2 vTextureCoord;\n * f = varying vec4 vFgColor;\n * g = varying vec4 vBgColor;\n * h = uniform bool uGraphicalTiles;\n * s = uniform sampler2D uSampler;\n */\nexport const FRAGMENT_SHADER_SOURCE = 'varying highp vec2 e;' +\n    'varying highp vec4 f;' +\n    'varying highp vec4 g;' +\n    'uniform bool h;' +\n    'uniform sampler2D s;' +\n    'void main(void){' +\n    'gl_FragColor=texture2D(s,e);' +\n    'if(h){' +\n    // Using graphical tiles\n    'if(gl_FragColor.a<0.1){' +\n    // The current pixel of the foreground sprite is transparent.\n    // Draw the background tile instead.\n    // Use the background red channel for the tile X coordinate.\n    // Use the background green channel for the tile Y coordinate.\n    // Use the fractional component of the texture coord for the pixel offset.\n    'gl_FragColor=texture2D(s,g.rg*16.0+fract(e*16.0)/16.0);' +\n    '}' +\n    '}else{' +\n    // Using ASCII characters\n    'if(gl_FragColor.r<0.1) {' +\n    // Black background, so use bgColor\n    'gl_FragColor=g;' +\n    '} else {' +\n    // White background, so use fgColor\n    'gl_FragColor=f;' +\n    '}' +\n    '}' +\n    '}';\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(399);\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}