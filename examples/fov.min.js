!function(t,s){if("object"===typeof exports&&"object"===typeof module)module.t=s();else if("function"===typeof define&&define.amd)define([],s);else{var i=s();for(var h in i)("object"===typeof exports?exports:t)[h]=i[h]}}(window,(function(){return function(t){var s={};function i(h){if(s[h])return s[h].t;var e=s[h]={s:h,i:!1,t:{}};return t[h].call(e.t,e,e.t,i),e.i=!0,e.t}return i.h=t,i.c=s,i.d=function(t,s,h){i.o(t,s)||Object.defineProperty(t,s,{K:!0,get:h})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"_",{value:!0})},i.l=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t._)return t;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{K:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)i.d(h,e,function(s){return t[s]}.bind(null,e));return h},i.n=function(t){var s=t&&t._?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.u="",i(i.A=0)}([function(t,s,i){"use strict";function h(t,s,i,h){return void 0===h&&(h=255),(t<<24)+(s<<16)+(i<<8)+h}i.r(s);const e={V:h(0,0,0),C:h(255,255,255),M:h(170,170,170),T:h(85,85,85),N:h(255,255,85),O:h(170,85,0),R:h(255,85,85),g:h(170,0,0),U:h(85,255,85),D:h(0,170,0),p:h(85,255,255),S:h(0,170,170),v:h(85,85,255),L:h(0,0,170),F:h(255,85,255),P:h(170,0,170),I:h(255,136,0)},r=[-1,0,1,-1,1,-1,0,1],n=[-1,-1,-1,0,0,1,1,1],o=[1.5,1,1.5,1,1,1.5,1,1.5];let c=0;function K(t){const s=[];let i=t;for(;i;)s.push(i),i=i.B;return s.reverse(),s}class _{constructor(t){this.values=t}m(t){const s=this.values;let i=0,h=s.length;for(;i<h;){const e=i+h>>>1,r=s[e];r.G+r.H>t.G+t.H?i=e+1:h=e}s.splice(i+1,0,t)}pop(){return this.values.pop()}size(){return this.values.length}}const l=0,u=1,a=2;class A{constructor(t,s,i,h){this.charCode=void 0!==t?function(t){return"string"===typeof t&&t.length>0?t.charCodeAt(0):t}(t):" ".charCodeAt(0),this.Y=void 0!==s?s:e.C,this.W=void 0!==i?i:e.V,void 0!==h&&(this.k=h),this.J=!0}j(t){this.charCode!==t&&(this.charCode=t,this.J=!0)}X(t){void 0!==t&&null!==t&&t!==this.Y&&(this.Y=t,this.J=!0)}q(t){void 0!==t&&null!==t&&t!==this.W&&(this.W=t,this.J=!0)}Z(t){void 0!==t&&(this.k=t,this.J=!0)}$(t,s,i,h){return"string"===typeof t&&(t=t.charCodeAt(0)),"number"===typeof t?(this.j(t),this.X(s),this.q(i),this.Z(h)):this.tt(t,l),this.J}tt(t,s){const i=255&t.W;s===l||t.charCode>0?(this.j(t.charCode),this.X(t.Y)):i>0&&i<255&&this.X(this.st(this.Y,t.W,s)),s===l||255===i?this.q(t.W):i>0&&this.q(this.st(this.W,t.W,s)),this.Z(t.k)}st(t,s,i){const e=(255-(255&s))/255,r=1-e,n=t>>24&255,o=t>>16&255,c=t>>8&255,K=s>>24&255,_=s>>16&255,l=s>>8&255;switch(i){case u:return h(e*n+r*K|0,e*o+r*_|0,e*c+r*l|0);case a:return h(this.it(n+r*K|0),this.it(o+r*_|0),this.it(c+r*l|0));default:return s}}it(t){return Math.min(255,t)}}const V=179,f=186,E=187,d=188,C=191,w=192,M=196,T=200,N=201,O=205,R=217,g=218;class U{constructor(t,s,i){this.width=t,this.height=s,this.ht=new Array;const h=i||A;for(let i=0;i<s;i++){const s=new Array;for(let e=0;e<t;e++)s.push(new h(e,i));this.ht.push(s)}this.clear()}clear(){for(let t=0;t<this.height;t++)for(let s=0;s<this.width;s++)this.et(s,t,0)}rt(t,s){if(!(t<0||s<0||t>=this.width||s>=this.height))return this.ht[s][t]}nt(t,s){if(!(t<0||s<0||t>=this.width||s>=this.height))return this.ht[s][t].charCode}et(t,s,i,h,e){t>=0&&t<this.width&&s>=0&&s<this.height&&this.ht[s][t].$(i,h,e)}ot(t,s,i,h,e){const r=i.split("\n");for(let i=0;i<r.length;i++){const n=r[i];for(let r=0;r<n.length;r++)this.et(t+r,s+i,n.charCodeAt(r),h,e)}}ct(t,s,i,h,e){this.ot(t-Math.floor(i.length/2),s,i,h,e)}Kt(t,s,i,h,e,r){for(let n=t;n<t+i;n++)this.et(n,s,h,e,r)}_t(t,s,i,h,e,r){for(let n=s;n<s+i;n++)this.et(t,n,h,e,r)}lt(t,s,i,h,e,r,n){this.Kt(t,s,i,e,r,n),this.Kt(t,s+h-1,i,e,r,n),this._t(t,s,h,e,r,n),this._t(t+i-1,s,h,e,r,n)}ut(t,s,i,h,e,r,n,o,c,K,_,l,u,a){this.fillRect(t,s,i,h,0,u,a),this.Kt(t,s,i,e),this.Kt(t,s+h-1,i,n),this._t(t,s,h,o),this._t(t+i-1,s,h,r),this.et(t,s,c),this.et(t+i-1,s,K),this.et(t,s+h-1,l),this.et(t+i-1,s+h-1,_)}at(t,s,i,h,e,r){this.ut(t,s,i,h,M,V,M,V,g,C,R,w,e,r)}At(t,s,i,h,e,r){this.ut(t,s,i,h,O,f,O,f,N,E,d,T,e,r)}fillRect(t,s,i,h,e,r,n){for(let o=s;o<s+h;o++)this.Kt(t,o,i,e,r,n)}Vt(t,s,i,h,e,r,n,o){o=o||l;for(let c=0;c<n;c++)for(let n=0;n<r;n++){const r=i.rt(h+n,e+c);r&&this.tt(t+n,s+c,r,o)}}tt(t,s,i,h){t>=0&&t<this.width&&s>=0&&s<this.height&&this.ht[s][t].tt(i,h)}}class D{constructor(){this.ft=!1,this.Et=0,this.dt=0}update(){this.ft?(this.Et++,this.dt=0):(this.Et=0,this.dt++)}Ct(){const t=this.Et;return 1===t||t>6&&t%1===0}wt(){return 1===this.dt}}class p{constructor(t){this.keys=new Array(256);for(let t=0;t<256;t++)this.keys[t]=new D;t.addEventListener("keydown",t=>this.Mt(t,!0)),t.addEventListener("keyup",t=>this.Mt(t,!1))}Mt(t,s){const i=t.keyCode;i!==S.Tt&&(t.stopPropagation(),t.preventDefault(),i>=0&&i<256&&(this.keys[i].ft=s))}Nt(){for(let t=0;t<256;t++)this.keys[t].update()}getKey(t){return t>=0&&t<256?this.keys[t]:null}}const S={Ot:3,Rt:6,gt:8,Ut:9,Dt:12,pt:13,St:16,vt:17,Lt:18,yt:19,bt:20,Ft:27,Pt:32,It:33,Bt:34,Gt:35,Ht:36,xt:37,Qt:38,Yt:39,zt:40,Wt:44,kt:45,Jt:46,jt:48,Xt:49,qt:50,Zt:51,$t:52,ts:53,ss:54,hs:55,es:56,rs:57,ns:58,os:59,cs:60,Ks:61,_s:62,ls:63,us:64,as:65,As:66,Vs:67,fs:68,Es:69,ds:70,Cs:71,ws:72,Ms:73,Ts:74,Ns:75,Os:76,Rs:77,gs:78,Us:79,Ds:80,ps:81,Ss:82,vs:83,Ls:84,ys:85,bs:86,Fs:87,Ps:88,Is:89,Bs:90,ms:93,Gs:96,Hs:97,xs:98,Qs:99,Ys:100,zs:101,Ws:102,ks:103,Js:104,js:105,Xs:106,qs:107,Zs:108,$s:109,ti:110,si:111,ii:112,hi:113,ei:114,ri:115,ni:116,oi:117,ci:118,Ki:119,_i:120,li:121,Tt:122,ui:123,ai:124,Ai:125,Vi:126,fi:127,Ei:128,di:129,Ci:130,wi:131,Mi:132,Ti:133,Ni:134,Oi:135,Ri:144,gi:145,Ui:160,Di:161,pi:162,Si:163,vi:164,Li:165,yi:166,bi:167,Fi:168,Pi:169,Ii:170,Bi:171,mi:172,Gi:173,Hi:174,xi:175,Qi:176,Yi:188,zi:190,Wi:191,ki:192,Ji:219,ji:220,Xi:221,qi:222,Zi:224,$i:225,th:91,sh:21,ih:21,hh:22,eh:23,rh:24,nh:25,oh:25,Kh:28,_h:29,lh:30,uh:31,ah:41,Ah:42,Vh:43,fh:95};const v=new class{constructor(t,s,i,h,e){this.url=t,this.Eh=s,this.dh=i,this.scale=h||1,this.Ch=!!e}}("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQMAAAD58POIAAAABlBMVEUAAAD///+l2Z/dAAAEhklEQVRIx42Sv4oUQRDGC4UzadSwwMUD8QEKlbWD4Q58B/NGpTVocKO1wXHUzMAH0AcwMTYVGg5ag0IzEXaRjdZEZKNzkKbHqtnzHypY09M9+5uvqr7pbYCuC6ftaRhgONXs30eAh0O1rYDm4IS/eH0B8GxRW2vxo396yu/fb0ZFrW1zcOXlPU/XPwK8PGjbWhVwM4KnH61912oK4+zmmHJaQotyt1kvtC2Atdo24iohPDiG/v4eICJsY3Wy8Yvr0DSIBOdxgH6v8wsriWhc8s0AtaK/GzSl1jR0nSjQnwki6FQxNFKjgzO2a7BBqucH7dL4M9z96CIhT1Fs/AgKgcA6dKCxI29DaHNwRJ4EGAU1sU0OG9rmE4SIc3A4FChACqqhJRwpxkqh9wxag4DSmEJ5DtpFwAP4GUf6lmKcFFti1BYuQp4xN8kxM2kNhjdkTOiTUeAKGvhA1rLpMbYACQzCITlTDRMbLYoEa2JWPSMRFZIupcSzMVKcEUkX+sOG+ChNX2vD8ex6k7OFHL0P1655JuPd53WAD+yTv3UrCQiuHmYBbfIxpkImuvpBQBkVb5g4XHv3JkNireG8AO9zDhBZu2z2OMZ11S5/RIlyMefMNaZ4GsCz5xcjyM6hHYEjAYEfO8Ig1rklAe9sRIeYAdwyoIBq6YIzCAKiWoifA3m3o2AzWcdYKOdY47EIf8QABCuYgIUVmdVMEYEDA0Hmo/3D6KKJbh5mxhP3UsWIE97wnEygyizOfOLi2JOJW8CeOblW9IHeKZgv4zxuzDryOmb+4aQH+MXV6e0ywdUcxqCjBWl5GpbzZduOG1QEiGXP86T7EfiJfkMQ4OO4H0yqyNC2zlziWEN7Ywuc2fQ4p5BNkS5QYXP2h5NtRJh0vCKQidtVJmCGAwDSSQpYggSxiRIyzewsgCh4xxiTPDMh5aj//l7btqkr6rQyIOtLji4lVRQwXdzvus40Y53M33fh50GZwF4ExQeMlvuTggLzSi4ElKczUO7zVtpwdyMKdqZKOWb2nDblawPxPmuMwFEWBW+jlZR1eYtS442kiBGMWCi/h1/+GAR6NYOJWiqNJXFygFtrkx5C0O3IeFGs67HhEEhmBu/BUOT+0551pXxYIF+Elpi5AKRkLl5GUbCCZddyMv621ujEBPP4vSy2fotTx3U+d3WBiFOA6VSGSB49v/M7GBX9FPrDaT2c9qr4PCpwZ7qz813R94dVFIe19v33GlMZUghQFb8BrfE7QBmgBMbrn2B3enn/y3B5+DL8UBAdnejdYdBxeV9ejwoYNTgW0Ok/gA7UG2GAzanhL0DG7q4svynwF8UwDPu7u/vD0IudzSltMtVbP+J/gUbR29oJ7Fg9s6Uy+DnpiTCOYc4cXOeXMWfsusSw7FOg9x655nax6BlecwpOQQ68WBwp+H2LMQTuOq2RUigzh2Q/R3CWARJIJG199EwOTyKBlQMznshCRGeQ5gHABAQl6M4gLEdAzVaBWMCiANdsayDCHBA/hagKYfielrJIlipKKQIA9Nf3wBloTHT6BuAx15zRNa1nAAAAAElFTkSuQmCC",8,8);class L{constructor(t,s){this.x=t,this.y=s}}class y{constructor(t,s,i,h){this.x=this.left=t,this.y=this.top=s,this.width=i,this.height=h,this.x2=t+i,this.y2=s+h}wh(){return new L(this.x+this.width/2|0,this.y+this.height/2|0)}Mh(t){return this.x<=t.x2&&this.x2>=t.x&&this.y<=t.y2&&this.y2>=t.y}contains(t){return t.x>=this.x&&t.y<this.x2&&t.y>=this.y&&t.y<this.y2}}class b{constructor(t,s){this.Th=t.canvas,this.width=t.width,this.height=t.height,this.options=s,this.Nh=0,this.Oh=0,this.x=0,this.y=0,this.dx=0,this.dy=0,this.buttons=[new D,new D,new D];const i=this.Th;i.addEventListener("mousedown",t=>this.Rh(t)),i.addEventListener("mouseup",t=>this.Rh(t)),i.addEventListener("mousemove",t=>this.Rh(t)),i.addEventListener("contextmenu",t=>this.Rh(t));const h=this.gh.bind(this);i.addEventListener("touchstart",h),i.addEventListener("touchend",h),i.addEventListener("touchcancel",h),i.addEventListener("touchmove",h)}gh(t){if(t.stopPropagation(),t.preventDefault(),"touchend"===t.type&&this.options.requestFullscreen&&this.requestFullscreen(),t.touches.length>0){const s=t.touches[0];this.Uh(s.clientX,s.clientY),this.buttons[0].ft=!0}else this.buttons[0].ft=!1}Rh(t){t.stopPropagation(),t.preventDefault(),this.Uh(t.clientX,t.clientY),"mousedown"===t.type&&(this.buttons[t.button].ft=!0,this.Th.focus(),this.options.requestFullscreen&&this.requestFullscreen()),"mouseup"===t.type&&(this.buttons[t.button].ft=!1)}Uh(t,s){let i=this.Th.getBoundingClientRect();const h=this.width/this.height,e=i.width/i.height;if(e-h>.01){const t=h*i.height,s=i.width-t;i=new y(Math.floor(s/2),0,t,i.height)}if(e-h<-.01){const t=i.width/h,s=i.height-t;i=new y(0,Math.floor(s/2),i.width,t)}this.x=this.width*(t-i.left)/i.width|0,this.y=this.height*(s-i.top)/i.height|0}requestFullscreen(){const t=this.Th;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen()}update(){this.dx=this.x-this.Nh,this.dy=this.y-this.Oh,this.Nh=this.x,this.Oh=this.y;for(let t=0;t<this.buttons.length;t++)this.buttons[t].update()}}function F(t,s){return t/s*2-1}const P={font:v,requestFullscreen:!1};const I={Dh:3,ph:6,Sh:12,vh:24,Lh:48,yh:96,bh:192,Fh:129};class B extends A{constructor(t,s){super(),this.x=t,this.y=s,this.Ph=!1,this.Ih=!1,this.Bh=!1,this.visible=!1,this.mh=-1,this.G=0,this.H=0,this.B=null}}const m=["    ########        #########        ########    ","    #......#        #.......#        #......#    ","    #......#        #...#...#        #......#    ","    #....#.#        #.#####.#        #......#    ","    #....#.#        #...#...#        #......#    ","    #..###.#        #.......#        #......#    ","    #......##########.......##########......#    ","#####.......................................#####","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#####.......................................#####","    #......##########.......##########......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......##########.......##########......#    ","#####.......................................#####","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#####.......................................#####","    #......#############.#############......#    ","    #......#        #..#.#..#        #......#    ","    #..#####        #..#.#..#        #......#    ","    #......#        #..#.#..#        #......#    ","    #####..#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    ########        #########        ########    "],G=m[0].length,H=m.length,x=(80-G)/2|0,Q=(45-H)/2|0;function Y(t,s){return m[s].charAt(t)}function z(t,s){return"."!==Y(t,s)}const W=new class extends U{constructor(t,s,i,h){super(s,i),h=h||P,this.canvas=t,this.font=h.font||v,this.pixelWidth=s*this.font.Eh,this.pixelHeight=i*this.font.dh,t.width=this.pixelWidth,t.height=this.pixelHeight,t.style.width=this.font.scale*this.pixelWidth+"px",t.style.height=this.font.scale*this.pixelHeight+"px",t.style.imageRendering="pixelated",t.style.outline="none",t.tabIndex=0,this.Gh(),window.addEventListener("resize",()=>this.Gh()),this.keys=new p(t),this.Hh=new b(this,h);const e=t.getContext("webgl",{xh:!1});if(!e)throw new Error("Unable to initialize WebGL. Your browser may not support it.");const r=e.createProgram();if(!r)throw new Error("Unable to initialize WebGL. Your browser may not support it.");this.Qh=e,this.Yh=r,e.attachShader(r,this.zh(e.VERTEX_SHADER,"attribute vec2 a;attribute vec2 b;attribute vec3 c;attribute vec3 d;varying highp vec2 e;varying highp vec4 f;varying highp vec4 g;void main(void){gl_Position=vec4(a.x,a.y,0,1);e=b/16.0;f=vec4(c.r,c.g,c.b,1);g=vec4(d.r,d.g,d.b,1);}")),e.attachShader(r,this.zh(e.FRAGMENT_SHADER,"varying highp vec2 e;varying highp vec4 f;varying highp vec4 g;uniform bool h;uniform sampler2D s;void main(void){gl_FragColor=texture2D(s,e);if(h){if(gl_FragColor.a<0.1){gl_FragColor=texture2D(s,g.rg*16.0+fract(e*16.0)/16.0);}}else{if(gl_FragColor.r<0.1) {gl_FragColor=g;} else {gl_FragColor=f;}}}")),e.linkProgram(r),e.useProgram(r),this.font.Ch&&e.uniform1i(e.getUniformLocation(r,"h"),1),this.Wh=this.getAttribLocation("a"),this.kh=this.getAttribLocation("b"),this.Jh=this.getAttribLocation("c"),this.jh=this.getAttribLocation("d");const n=s*i;this.Xh=new Float32Array(3*n*4),this.qh=new Uint16Array(6*n),this.Zh=new Float32Array(2*n*4),this.$h=new Uint8Array(4*n*4),this.te=new DataView(this.$h.buffer),this.se=new Uint8Array(4*n*4),this.ie=new DataView(this.se.buffer);let o=0,c=0,K=0;for(let t=0;t<i;t++)for(let h=0;h<s;h++)this.Xh[o++]=F(h,s),this.Xh[o++]=-F(t,i),this.Xh[o++]=F(h+1,s),this.Xh[o++]=-F(t,i),this.Xh[o++]=F(h+1,s),this.Xh[o++]=-F(t+1,i),this.Xh[o++]=F(h,s),this.Xh[o++]=-F(t+1,i),this.qh[c++]=K+0,this.qh[c++]=K+1,this.qh[c++]=K+2,this.qh[c++]=K+0,this.qh[c++]=K+2,this.qh[c++]=K+3,K+=4;this.he=e.createBuffer(),this.ee=e.createBuffer(),this.re=e.createBuffer(),this.ne=e.createBuffer(),this.oe=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.he),e.bufferData(e.ARRAY_BUFFER,this.Xh,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.ee),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.qh,e.STATIC_DRAW),this.ce=this.Ke(this.font.url),window.setInterval(()=>this._e(),1e3/30)}Gh(){const t=this.canvas.parentElement.offsetWidth/this.pixelWidth,s=this.canvas.parentElement.offsetHeight/this.pixelHeight,i=Math.min(t,s),h=i*this.pixelWidth|0,e=i*this.pixelHeight|0;this.canvas.style.width=h+"px",this.canvas.style.height=e+"px"}getAttribLocation(t){const s=this.Qh.getAttribLocation(this.Yh,t);return this.Qh.enableVertexAttribArray(s),s}flush(){let t=0,s=0;for(let i=0;i<this.height;i++)for(let h=0;h<this.width;h++){const e=this.rt(h,i);if(!e.J){t+=8,s+=16;continue}const r=e.charCode%16,n=e.charCode/16|0;this.Zh[t++]=r,this.Zh[t++]=n,this.Zh[t++]=r+1,this.Zh[t++]=n,this.Zh[t++]=r+1,this.Zh[t++]=n+1,this.Zh[t++]=r,this.Zh[t++]=n+1;for(let t=0;t<4;t++)this.te.setUint32(s,e.Y,!1),this.ie.setUint32(s,e.W,!1),s+=4;e.J=!1}}le(t){const s=this.keys.getKey(t);return s&&s.ft}ue(t){const s=this.keys.getKey(t);return s&&s.Ct()}ae(t){const s=this.keys.getKey(t);return s?s.Et:0}zh(t,s){const i=this.Qh,h=i.createShader(t);if(!h)throw new Error("An error occurred compiling the shader: ");if(i.shaderSource(h,s),i.compileShader(h),!i.getShaderParameter(h,i.COMPILE_STATUS))throw new Error("An error occurred compiling the shader: "+i.getShaderInfoLog(h));return h}Ke(t){const s=this.Qh,i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);const h=s.RGBA,e=s.RGBA,r=s.UNSIGNED_BYTE,n=new Uint8Array([0,0,0,255]);s.texImage2D(s.TEXTURE_2D,0,h,1,1,0,e,r,n);const o=new Image;return o.onload=()=>{s.bindTexture(s.TEXTURE_2D,i),s.texImage2D(s.TEXTURE_2D,0,h,e,r,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR)},o.src=t,i}Ae(){const t=this.Qh;t.clearColor(0,0,0,1),t.clearDepth(1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.viewport(0,0,this.pixelWidth,this.pixelHeight);{const s=2,i=t.FLOAT,h=!1,e=0,r=0;t.bindBuffer(t.ARRAY_BUFFER,this.he),t.vertexAttribPointer(this.Wh,s,i,h,e,r)}{const s=2,i=t.FLOAT,h=!1,e=0,r=0;t.bindBuffer(t.ARRAY_BUFFER,this.re),t.bufferData(t.ARRAY_BUFFER,this.Zh,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.kh,s,i,h,e,r)}{const s=4,i=t.UNSIGNED_BYTE,h=!0,e=0,r=0;t.bindBuffer(t.ARRAY_BUFFER,this.ne),t.bufferData(t.ARRAY_BUFFER,this.$h,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.Jh,s,i,h,e,r)}{const s=4,i=t.UNSIGNED_BYTE,h=!0,e=0,r=0;t.bindBuffer(t.ARRAY_BUFFER,this.oe),t.bufferData(t.ARRAY_BUFFER,this.se,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.jh,s,i,h,e,r)}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.ee),t.useProgram(this.Yh),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.ce);{const s=this.width*this.height*6,i=t.UNSIGNED_SHORT,h=0;t.drawElements(t.TRIANGLES,s,i,h)}}_e(){this.keys.Nt(),this.Hh.update(),this.update&&this.update(),this.state&&this.state.update(),this.flush(),this.Ae()}}(document.querySelector("canvas"),80,45),k=new U(G,H),J={x:Math.floor(G/2),y:Math.floor(H/2),direction:I.vh,Ve:!1,path:null,fe:0},j=new class extends U{constructor(t,s,i){if(super(t,s,B),this.Ee=0,this.de=0,this.Ce=0,this.we=0,this.Me=0,this.Te=0,this.Ne=0,i)for(let h=0;h<s;h++)for(let s=0;s<t;s++)this.ht[h][s].Ph=this.ht[h][s].Ih=i(s,h)}Oe(t,s,i){t>=0&&t<this.width&&s>=0&&s<this.height&&(this.ht[s][t].Ph=i)}Re(t,s,i){t>=0&&t<this.width&&s>=0&&s<this.height&&(this.ht[s][t].Ih=i)}ge(t,s){return!(t<this.Ce||t>this.we||s<this.Me||s>this.Te)&&this.ht[s][t].visible}Ue(t,s){const i=[],h=[];let e,r,n,o,c,K,_,l,u,a,A=1,V=0,f=0,E=0;for(r=this.de+s;r>=this.Me&&r<=this.Te;r+=s,f=V,++A)for(n=.5/A,a=-1,o=Math.floor(E*A+.5),e=this.Ee+o*t;o<=A&&e>=this.Ce&&e<=this.we;e+=t,++o,a=u){if(c=!0,K=!1,_=o/A,l=a,u=_+n,f>0)if(this.ht[r-s][e].visible&&!this.ht[r-s][e].Ih||this.ht[r-s][e-t].visible&&!this.ht[r-s][e-t].Ih){for(let t=0;t<f&&c;++t)if(l<=h[t]&&u>=i[t])if(this.ht[r][e].Ih){if(l>=i[t]&&u<=h[t]){c=!1;break}i[t]=Math.min(i[t],l),h[t]=Math.max(h[t],u),K=!0}else if(_>i[t]&&_<h[t]){c=!1;break}}else c=!1;c&&(this.ht[r][e].visible=!0,this.ht[r][e].Ih&&(E>=l?E=u:K||(i[V]=l,h[V++]=u)))}}De(t,s){const i=[],h=[];let e,r,n,o,c,K,_,l,u,a,A=1,V=0,f=0,E=0;for(e=this.Ee+t;e>=this.Ce&&e<=this.we;e+=t,f=V,++A)for(n=.5/A,a=-1,o=Math.floor(E*A+.5),r=this.de+o*s;o<=A&&r>=this.Me&&r<=this.Te;r+=s,++o,a=u){if(c=!0,K=!1,_=o/A,l=a,u=_+n,f>0)if(this.ht[r][e-t].visible&&!this.ht[r][e-t].Ih||this.ht[r-s][e-t].visible&&!this.ht[r-s][e-t].Ih){for(let t=0;t<f&&c;++t)if(l<=h[t]&&u>=i[t])if(this.ht[r][e].Ih){if(l>=i[t]&&u<=h[t]){c=!1;break}i[t]=Math.min(i[t],l),h[t]=Math.max(h[t],u),K=!0}else if(_>i[t]&&_<h[t]){c=!1;break}}else c=!1;c&&(this.ht[r][e].visible=!0,this.ht[r][e].Ih&&(E>=l?E=u:K||(i[V]=l,h[V++]=u)))}}pe(t,s,i,h,e){if(this.Ee=t,this.de=s,this.Ne=i,h)this.Ce=Math.min(this.Ce,Math.max(0,t-i)),this.Me=Math.min(this.Me,Math.max(0,s-i)),this.we=Math.max(this.we,Math.min(this.width-1,t+i)),this.Te=Math.max(this.Te,Math.min(this.height-1,s+i));else{this.Ce=Math.max(0,t-i),this.Me=Math.max(0,s-i),this.we=Math.min(this.width-1,t+i),this.Te=Math.min(this.height-1,s+i);for(let t=this.Me;t<=this.Te;t++)for(let s=this.Ce;s<=this.we;s++)this.ht[t][s].visible=!1}this.ht[s][t].visible=!0,void 0===e?(this.Ue(1,1),this.De(1,1),this.De(1,-1),this.Ue(1,-1),this.Ue(-1,-1),this.De(-1,-1),this.De(-1,1),this.Ue(-1,1)):(1&e&&this.Ue(1,1),2&e&&this.De(1,1),4&e&&this.De(1,-1),8&e&&this.Ue(1,-1),16&e&&this.Ue(-1,-1),32&e&&this.De(-1,-1),64&e&&this.De(-1,1),128&e&&this.Ue(-1,1))}Se(){for(let t=this.Me;t<=this.Te;t++)for(let s=this.Ce;s<=this.we;s++){const i=this.ht[t][s];i.Bh|=i.visible}}}(G,H,z);function X(){j.pe(J.x,J.y,15,J.Ve,J.direction)}function q(t,s){const i=J.x+t,h=J.y+s;i<0||i>=G||h<0||h>=H||z(i,h)||(J.x=i,J.y=h,J.direction=function(t,s){return t>0?s>0?I.Dh:0===s?I.ph:I.Sh:t<0?s>0?I.bh:0===s?I.yh:I.Lh:s>0?I.Fh:I.vh}(t,s),X())}W.update=function(){if(W.ue(S.Qt)&&q(0,-1),W.ue(S.xt)&&q(-1,0),W.ue(S.Yt)&&q(1,0),W.ue(S.zt)&&q(0,1),W.ue(S.Ss)&&(J.Ve=!J.Ve),J.path){for(;J.fe<J.path.length&&J.x===J.path[J.fe].x&&J.y===J.path[J.fe].y;)J.fe++;J.fe<J.path.length&&q(J.path[J.fe].x-J.x,J.path[J.fe].y-J.y)}W.clear(),k.fillRect(0,0,G,H,0,0,e.V);for(let t=0;t<H;t++)for(let s=0;s<G;s++){const i=Y(s,t),h=j.ge(s,t)?e.C:e.T;k.ot(s,t,i,h)}const t={x:W.Hh.x-x,y:W.Hh.y-Q},s=function(t,s,i,h){c++;const e=t.ht[s.y][s.x];e.mh=c,e.G=0,e.H=Math.min(Math.abs(s.x-i.x),Math.abs(s.y-i.y)),e.B=null;const l=new _([e]);for(;l.size()>0;){const s=l.pop();if(s.x===i.x&&s.y===i.y)return K(s);for(let e=0;e<r.length;e++){const K=s.x+r[e],_=s.y+n[e];if(K>=0&&K<t.width&&_>=0&&_<t.height){const r=t.ht[_][K];r.mh!==c&&(r.mh=c,r.G=1/0,r.H=Math.min(Math.abs(K-i.x),Math.abs(_-i.y)),r.B=null);const n=s.G+o[e];n<r.G&&n<=h&&(!t.ht[_][K].Ph||K===i.x&&_===i.y)&&(r.G=n,r.B=s,l.m(r))}}}return null}(j,J,t,1e3);if(s){for(let t=1;t<s.length;t++){const i=s[t];k.rt(i.x,i.y).q(e.g)}1===W.Hh.buttons[0].dt&&(J.path=s,J.fe=0)}W.ot(1,1,"Hello world!"),W.ot(1,3,"Use arrow keys to move"),W.ot(1,5,'Press "R" to toggle remember'),k.ot(J.x,J.y,"@"),W.Vt(x,Q,k,0,0,G,H)},X()}])}));