!function(t,s){if("object"===typeof exports&&"object"===typeof module)module.t=s();else if("function"===typeof define&&define.amd)define([],s);else{var i=s();for(var e in i)("object"===typeof exports?exports:t)[e]=i[e]}}(window,(function(){return function(t){var s={};function i(e){if(s[e])return s[e].t;var h=s[e]={s:e,i:!1,t:{}};return t[e].call(h.t,h,h.t,i),h.i=!0,h.t}return i.h=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{l:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},i._=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.u)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{l:!0,value:t}),2&s&&"string"!=typeof t)for(var h in t)i.d(e,h,function(s){return t[s]}.bind(null,h));return e},i.n=function(t){var s=t&&t.u?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.K="",i(i.A=0)}([function(t,s,i){"use strict";function e(t,s,i,e){return void 0===e&&(e=255),(t<<24)+(s<<16)+(i<<8)+e}i.r(s);const h={V:e(0,0,0),O:e(255,255,255),L:e(170,170,170),N:e(85,85,85),g:e(255,255,85),T:e(170,85,0),D:e(255,85,85),C:e(170,0,0),I:e(85,255,85),B:e(0,170,0),M:e(85,255,255),p:e(0,170,170),R:e(85,85,255),U:e(0,0,170),S:e(255,85,255),m:e(170,0,170),v:e(255,136,0)};class n{constructor(t,s){this.x=t,this.y=s}}class o{constructor(t,s,i,e){this.x=this.left=t,this.y=this.top=s,this.width=i,this.height=e,this.x2=t+i,this.y2=s+e}G(){return new n(this.x+this.width/2|0,this.y+this.height/2|0)}P(t){return this.x<=t.x2&&this.x2>=t.x&&this.y<=t.y2&&this.y2>=t.y}contains(t){return t.x>=this.x&&t.y<this.x2&&t.y>=this.y&&t.y<this.y2}}class r{constructor(t,s,i){this.F=t,this.rect=s,this.H=i,this.open=!1,this.count=0}}class c{k(t,s){const i=s.Y.width+4,e=s.Y.height+4,h=(t.width-i)/2|0,c=(t.height-e)/2|0;return new r(s,new o(h,c,i,e),new n(h+2,c+2))}X(t,s){const i=s.F,{x:e,y:n,width:o,height:r}=s.rect;t.fillRect(e,n,o,r,0,h.O,h.V),t.W(e,n,o,r),t.J(e+o/2|0,n," "+i.title+" "),i.q(t,s.H)}}class l{constructor(){this.j=!1,this.Z=0,this.$=0}update(){this.j?(this.Z++,this.$=0):(this.Z=0,this.$++)}tt(){const t=this.Z;return 1===t||t>6&&t%1===0}st(){return 1===this.$}}class u{constructor(t){this.keys=new Array(256);for(let t=0;t<256;t++)this.keys[t]=new l;t.addEventListener("keydown",t=>this.it(t,!0)),t.addEventListener("keyup",t=>this.it(t,!1))}it(t,s){const i=t.keyCode;i!==a.et&&(t.stopPropagation(),t.preventDefault(),i>=0&&i<256&&(this.keys[i].j=s))}ht(){for(let t=0;t<256;t++)this.keys[t].update()}getKey(t){return t>=0&&t<256?this.keys[t]:null}}const a={nt:3,ot:6,rt:8,ct:9,lt:12,ut:13,at:16,_t:17,ft:18,Kt:19,At:20,Et:27,Vt:32,dt:33,Ot:34,wt:35,Lt:36,Nt:37,gt:38,Tt:39,Dt:40,Ct:44,It:45,Bt:46,Mt:48,pt:49,Rt:50,Ut:51,St:52,vt:53,Gt:54,bt:55,yt:56,Pt:57,Ft:58,Ht:59,xt:60,kt:61,Yt:62,Xt:63,Wt:64,Qt:65,zt:66,Jt:67,qt:68,jt:69,Zt:70,$t:71,ts:72,ss:73,es:74,hs:75,ns:76,os:77,rs:78,cs:79,ls:80,us:81,as:82,_s:83,fs:84,Ks:85,As:86,Es:87,Vs:88,ds:89,Os:90,ws:93,Ls:96,Ns:97,gs:98,Ts:99,Ds:100,Cs:101,Is:102,Bs:103,Ms:104,ps:105,Rs:106,Us:107,Ss:108,ms:109,vs:110,Gs:111,bs:112,ys:113,Ps:114,Fs:115,Hs:116,xs:117,ks:118,Ys:119,Xs:120,Ws:121,et:122,Qs:123,zs:124,Js:125,qs:126,js:127,Zs:128,$s:129,ti:130,si:131,ii:132,ei:133,hi:134,ni:135,oi:144,ri:145,ci:160,li:161,ui:162,ai:163,_i:164,fi:165,Ki:166,Ai:167,Ei:168,Vi:169,di:170,Oi:171,wi:172,Li:173,Ni:174,gi:175,Ti:176,Di:188,Ci:190,Ii:191,Bi:192,Mi:219,pi:220,Ri:221,Ui:222,Si:224,mi:225,vi:91,Gi:21,bi:21,yi:22,Pi:23,Fi:24,Hi:25,xi:25,ki:28,Yi:29,Xi:30,Wi:31,Qi:41,zi:42,Ji:43,qi:95},_={ji:1,Zi:2,$i:3,te:4,se:5,ie:6,ee:7,he:8,ne:176,oe:177,re:178,ce:179,le:180,ue:185,ae:186,_e:187,fe:188,Ke:191,Ae:192,Ee:193,Ve:194,de:195,Oe:196,we:197,Le:200,Ne:201,ge:202,Te:203,De:204,Ce:205,Ie:206,Be:217,Me:218,pe:219,Re:220,Ue:221,Se:222,me:223},f=0,K=1,A=2;class E{constructor(t,s,i,e){this.charCode=void 0!==t?function(t){return"string"===typeof t&&t.length>0?t.charCodeAt(0):t}(t):" ".charCodeAt(0),this.ve=void 0!==s?s:h.O,this.Ge=void 0!==i?i:h.V,void 0!==e&&(this.be=e),this.ye=!0}Pe(t){this.charCode!==t&&(this.charCode=t,this.ye=!0)}Fe(t){void 0!==t&&null!==t&&t!==this.ve&&(this.ve=t,this.ye=!0)}He(t){void 0!==t&&null!==t&&t!==this.Ge&&(this.Ge=t,this.ye=!0)}xe(t){void 0!==t&&(this.be=t,this.ye=!0)}ke(t,s,i,e){return"string"===typeof t&&(t=t.charCodeAt(0)),"number"===typeof t?(this.Pe(t),this.Fe(s),this.He(i),this.xe(e)):this.Ye(t,f),this.ye}Ye(t,s){const i=255&t.Ge;s===f||t.charCode>0?(this.Pe(t.charCode),this.Fe(t.ve)):i>0&&i<255&&this.Fe(this.Xe(this.ve,t.Ge,s)),s===f||255===i?this.He(t.Ge):i>0&&this.He(this.Xe(this.Ge,t.Ge,s)),this.xe(t.be)}Xe(t,s,i){const h=(255-(255&s))/255,n=1-h,o=t>>24&255,r=t>>16&255,c=t>>8&255,l=s>>24&255,u=s>>16&255,a=s>>8&255;switch(i){case K:return e(h*o+n*l|0,h*r+n*u|0,h*c+n*a|0);case A:return e(this.We(o+n*l|0),this.We(r+n*u|0),this.We(c+n*a|0));default:return s}}We(t){return Math.min(255,t)}}class V{constructor(t,s,i){this.width=t,this.height=s,this.Qe=new Array;const e=i||E;for(let i=0;i<s;i++){const s=new Array;for(let h=0;h<t;h++)s.push(new e(h,i));this.Qe.push(s)}this.clear()}clear(){for(let t=0;t<this.height;t++)for(let s=0;s<this.width;s++)this.ze(s,t,0)}Je(t,s){if(!(t<0||s<0||t>=this.width||s>=this.height))return this.Qe[s][t]}qe(t,s){if(!(t<0||s<0||t>=this.width||s>=this.height))return this.Qe[s][t].charCode}ze(t,s,i,e,h){t>=0&&t<this.width&&s>=0&&s<this.height&&this.Qe[s][t].ke(i,e,h)}je(t,s,i,e,h){const n=i.split("\n");for(let i=0;i<n.length;i++){const o=n[i];for(let n=0;n<o.length;n++)this.ze(t+n,s+i,o.charCodeAt(n),e,h)}}J(t,s,i,e,h){this.je(t-Math.floor(i.length/2),s,i,e,h)}Ze(t,s,i,e,h,n){for(let o=t;o<t+i;o++)this.ze(o,s,e,h,n)}$e(t,s,i,e,h,n){for(let o=s;o<s+i;o++)this.ze(t,o,e,h,n)}th(t,s,i,e,h,n,o){this.Ze(t,s,i,h,n,o),this.Ze(t,s+e-1,i,h,n,o),this.$e(t,s,e,h,n,o),this.$e(t+i-1,s,e,h,n,o)}sh(t,s,i,e,h,n,o,r,c,l,u,a,_,f){this.fillRect(t,s,i,e,0,_,f),this.Ze(t,s,i,h),this.Ze(t,s+e-1,i,o),this.$e(t,s,e,r),this.$e(t+i-1,s,e,n),this.ze(t,s,c),this.ze(t+i-1,s,l),this.ze(t,s+e-1,a),this.ze(t+i-1,s+e-1,u)}W(t,s,i,e,h,n){this.sh(t,s,i,e,_.Oe,_.ce,_.Oe,_.ce,_.Me,_.Ke,_.Be,_.Ae,h,n)}ih(t,s,i,e,h,n){this.sh(t,s,i,e,_.Ce,_.ae,_.Ce,_.ae,_.Ne,_._e,_.fe,_.Le,h,n)}fillRect(t,s,i,e,h,n,o){for(let r=s;r<s+e;r++)this.Ze(t,r,i,h,n,o)}eh(t,s,i,e,h,n,o,r){r=r||f;for(let c=0;c<o;c++)for(let o=0;o<n;o++){const n=i.Je(e+o,h+c);n&&this.Ye(t+o,s+c,n,r)}}Ye(t,s,i,e){t>=0&&t<this.width&&s>=0&&s<this.height&&this.Qe[s][t].Ye(i,e)}}const d=[{charCode:_.me,active:[1,1,0,0]},{charCode:_.Se,active:[0,1,0,1]}];function O(t){const s=document.createElement("canvas");s.width=t.width,s.height=t.height;const i=s.getContext("2d");return i.drawImage(t,0,0),i.getImageData(0,0,t.width,t.height).data}function w(t,s,i,e,h){const n=4*(e*h+i),o=4*(e*h+i+1),r=4*((e+1)*h+i),c=4*((e+1)*h+i+1),l=[[s[n],s[n+1],s[n+2]],[s[o],s[o+1],s[o+2]],[s[r],s[r+1],s[r+2]],[s[c],s[c+1],s[c+2]]];let u=Number.MAX_VALUE,a=0,_=null,f=null;for(let t=0;t<d.length;t++){const s=d[t],i=L(s.active,l);i.error<u&&(u=i.error,a=s.charCode,_=i.Ge,f=i.ve)}t.ze(i/2,e/2,a,N(f),N(_))}function L(t,s){const i=[[0,0,0],[0,0,0]],e=[[0,0,0],[0,0,0]],h=[0,0];for(let e=0;e<4;e++){for(let h=0;h<3;h++)i[t[e]][h]+=s[e][h];h[t[e]]++}for(let t=0;t<2;t++)for(let s=0;s<3;s++)e[t][s]=i[t][s]/h[t];let n=0;for(let i=0;i<4;i++){let h=0;for(let n=0;n<3;n++){const o=s[i][n]-e[t[i]][n];h+=o*o}n+=Math.sqrt(h)}return{Ge:e[0],ve:e[1],error:n}}function N(t){return e(t[0],t[1],t[2])}class g{constructor(t,s){this.Y=t,this.title=s}q(t,s){}hh(t,s){}}class T extends g{constructor(t,s){const i=s.split("\n");let e=t.length;for(let t=0;t<i.length;t++)e=Math.max(e,i[t].length);const h=i.length;super(new o(0,0,e,h),t),this.nh=i}q(t,s){for(let i=0;i<this.nh.length;i++)t.je(s.x,s.y+i,this.nh[i])}hh(t,s){return t.oh(a.Et)}}class D{constructor(t){this.h=2147483648,this.a=1103515245,this.c=12345,this.state=t||1}rh(){return this.state=(this.a*this.state+this.c)%this.h,this.state}lh(){return this.rh()/(this.h-1)}uh(t,s){const i=s-t,e=t+(this.rh()/this.h*i|0);if(isNaN(e))throw new Error("rand nan");return e}ah(t){const s=t.reduce((t,s)=>t+s),i=this.uh(1,s+1);let e=0;for(let s=0;s<t.length;s++)if(e+=t[s],i<=e)return s;return t.length-1}_h(t){const s=[],i=[];for(const e in t)t.hasOwnProperty(e)&&(s.push(e),i.push(t[e]));return s[this.ah(i)]}}class C extends g{constructor(t,s,i){let e=t.length;for(let t=0;t<s.length;t++)e=Math.max(e,s[t].length+4);const h=s.length;super(new o(0,0,e,h),t),this.options=s,this.fh=i}q(t,s){for(let i=0;i<this.options.length;i++){const e=String.fromCharCode(65+i)+" - "+this.options[i];t.je(s.x,s.y+i,e)}}hh(t,s){for(let s=0;s<this.options.length;s++)if(t.oh(a.Qt+s))return this.fh(s),!0;return t.oh(a.Et)}}const I=new class{constructor(t,s,i,e,h){this.url=t,this.Kh=s,this.Ah=i,this.scale=e||1,this.Eh=!!h}}("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQMAAAD58POIAAAABlBMVEUAAAD///+l2Z/dAAAEhklEQVRIx42Sv4oUQRDGC4UzadSwwMUD8QEKlbWD4Q58B/NGpTVocKO1wXHUzMAH0AcwMTYVGg5ag0IzEXaRjdZEZKNzkKbHqtnzHypY09M9+5uvqr7pbYCuC6ftaRhgONXs30eAh0O1rYDm4IS/eH0B8GxRW2vxo396yu/fb0ZFrW1zcOXlPU/XPwK8PGjbWhVwM4KnH61912oK4+zmmHJaQotyt1kvtC2Atdo24iohPDiG/v4eICJsY3Wy8Yvr0DSIBOdxgH6v8wsriWhc8s0AtaK/GzSl1jR0nSjQnwki6FQxNFKjgzO2a7BBqucH7dL4M9z96CIhT1Fs/AgKgcA6dKCxI29DaHNwRJ4EGAU1sU0OG9rmE4SIc3A4FChACqqhJRwpxkqh9wxag4DSmEJ5DtpFwAP4GUf6lmKcFFti1BYuQp4xN8kxM2kNhjdkTOiTUeAKGvhA1rLpMbYACQzCITlTDRMbLYoEa2JWPSMRFZIupcSzMVKcEUkX+sOG+ChNX2vD8ex6k7OFHL0P1655JuPd53WAD+yTv3UrCQiuHmYBbfIxpkImuvpBQBkVb5g4XHv3JkNireG8AO9zDhBZu2z2OMZ11S5/RIlyMefMNaZ4GsCz5xcjyM6hHYEjAYEfO8Ig1rklAe9sRIeYAdwyoIBq6YIzCAKiWoifA3m3o2AzWcdYKOdY47EIf8QABCuYgIUVmdVMEYEDA0Hmo/3D6KKJbh5mxhP3UsWIE97wnEygyizOfOLi2JOJW8CeOblW9IHeKZgv4zxuzDryOmb+4aQH+MXV6e0ywdUcxqCjBWl5GpbzZduOG1QEiGXP86T7EfiJfkMQ4OO4H0yqyNC2zlziWEN7Ywuc2fQ4p5BNkS5QYXP2h5NtRJh0vCKQidtVJmCGAwDSSQpYggSxiRIyzewsgCh4xxiTPDMh5aj//l7btqkr6rQyIOtLji4lVRQwXdzvus40Y53M33fh50GZwF4ExQeMlvuTggLzSi4ElKczUO7zVtpwdyMKdqZKOWb2nDblawPxPmuMwFEWBW+jlZR1eYtS442kiBGMWCi/h1/+GAR6NYOJWiqNJXFygFtrkx5C0O3IeFGs67HhEEhmBu/BUOT+0551pXxYIF+Elpi5AKRkLl5GUbCCZddyMv621ujEBPP4vSy2fotTx3U+d3WBiFOA6VSGSB49v/M7GBX9FPrDaT2c9qr4PCpwZ7qz813R94dVFIe19v33GlMZUghQFb8BrfE7QBmgBMbrn2B3enn/y3B5+DL8UBAdnejdYdBxeV9ejwoYNTgW0Ok/gA7UG2GAzanhL0DG7q4svynwF8UwDPu7u/vD0IudzSltMtVbP+J/gUbR29oJ7Fg9s6Uy+DnpiTCOYc4cXOeXMWfsusSw7FOg9x655nax6BlecwpOQQ68WBwp+H2LMQTuOq2RUigzh2Q/R3CWARJIJG199EwOTyKBlQMznshCRGeQ5gHABAQl6M4gLEdAzVaBWMCiANdsayDCHBA/hagKYfielrJIlipKKQIA9Nf3wBloTHT6BuAx15zRNa1nAAAAAElFTkSuQmCC",8,8);class B{constructor(t,s){this.Vh=t.canvas,this.width=t.width,this.height=t.height,this.options=s,this.dh=0,this.Oh=0,this.x=0,this.y=0,this.dx=0,this.dy=0,this.buttons=[new l,new l,new l];const i=this.Vh;i.addEventListener("mousedown",t=>this.wh(t)),i.addEventListener("mouseup",t=>this.wh(t)),i.addEventListener("mousemove",t=>this.wh(t)),i.addEventListener("contextmenu",t=>this.wh(t));const e=this.Lh.bind(this);i.addEventListener("touchstart",e),i.addEventListener("touchend",e),i.addEventListener("touchcancel",e),i.addEventListener("touchmove",e)}Lh(t){if(t.stopPropagation(),t.preventDefault(),"touchend"===t.type&&this.options.requestFullscreen&&this.requestFullscreen(),t.touches.length>0){const s=t.touches[0];this.Nh(s.clientX,s.clientY),this.buttons[0].j=!0}else this.buttons[0].j=!1}wh(t){t.stopPropagation(),t.preventDefault(),this.Nh(t.clientX,t.clientY),"mousedown"===t.type&&(this.buttons[t.button].j=!0,this.Vh.focus(),this.options.requestFullscreen&&this.requestFullscreen()),"mouseup"===t.type&&(this.buttons[t.button].j=!1)}Nh(t,s){let i=this.Vh.getBoundingClientRect();const e=this.width/this.height,h=i.width/i.height;if(h-e>.01){const t=e*i.height,s=i.width-t;i=new o(Math.floor(s/2),0,t,i.height)}if(h-e<-.01){const t=i.width/e,s=i.height-t;i=new o(0,Math.floor(s/2),i.width,t)}this.x=this.width*(t-i.left)/i.width|0,this.y=this.height*(s-i.top)/i.height|0}requestFullscreen(){const t=this.Vh;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen()}update(){this.dx=this.x-this.dh,this.dy=this.y-this.Oh,this.dh=this.x,this.Oh=this.y;for(let t=0;t<this.buttons.length;t++)this.buttons[t].update()}}function M(t,s){return t/s*2-1}const p={font:I,requestFullscreen:!1};class R extends E{constructor(t,s){super(),this.x=t,this.y=s,this.gh=!1,this.Th=!1,this.Dh=!1,this.visible=!1,this.Ch=-1,this.Ih=0,this.Bh=0,this.Mh=null}}class U extends V{constructor(t,s,i){if(super(t,s,R),this.ph=0,this.Rh=0,this.Uh=0,this.Sh=0,this.mh=0,this.vh=0,this.Gh=0,i)for(let e=0;e<s;e++)for(let s=0;s<t;s++)this.Qe[e][s].gh=this.Qe[e][s].Th=i(s,e)}bh(t,s,i){t>=0&&t<this.width&&s>=0&&s<this.height&&(this.Qe[s][t].gh=i)}yh(t,s,i){t>=0&&t<this.width&&s>=0&&s<this.height&&(this.Qe[s][t].Th=i)}Ph(t,s){return!(t<this.Uh||t>this.Sh||s<this.mh||s>this.vh)&&this.Qe[s][t].visible}Fh(t,s){const i=[],e=[];let h,n,o,r,c,l,u,a,_,f,K=1,A=0,E=0,V=0;for(n=this.Rh+s;n>=this.mh&&n<=this.vh;n+=s,E=A,++K)for(o=.5/K,f=-1,r=Math.floor(V*K+.5),h=this.ph+r*t;r<=K&&h>=this.Uh&&h<=this.Sh;h+=t,++r,f=_){if(c=!0,l=!1,u=r/K,a=f,_=u+o,E>0)if(this.Qe[n-s][h].visible&&!this.Qe[n-s][h].Th||this.Qe[n-s][h-t].visible&&!this.Qe[n-s][h-t].Th){for(let t=0;t<E&&c;++t)if(a<=e[t]&&_>=i[t])if(this.Qe[n][h].Th){if(a>=i[t]&&_<=e[t]){c=!1;break}i[t]=Math.min(i[t],a),e[t]=Math.max(e[t],_),l=!0}else if(u>i[t]&&u<e[t]){c=!1;break}}else c=!1;c&&(this.Qe[n][h].visible=!0,this.Qe[n][h].Th&&(V>=a?V=_:l||(i[A]=a,e[A++]=_)))}}Hh(t,s){const i=[],e=[];let h,n,o,r,c,l,u,a,_,f,K=1,A=0,E=0,V=0;for(h=this.ph+t;h>=this.Uh&&h<=this.Sh;h+=t,E=A,++K)for(o=.5/K,f=-1,r=Math.floor(V*K+.5),n=this.Rh+r*s;r<=K&&n>=this.mh&&n<=this.vh;n+=s,++r,f=_){if(c=!0,l=!1,u=r/K,a=f,_=u+o,E>0)if(this.Qe[n][h-t].visible&&!this.Qe[n][h-t].Th||this.Qe[n-s][h-t].visible&&!this.Qe[n-s][h-t].Th){for(let t=0;t<E&&c;++t)if(a<=e[t]&&_>=i[t])if(this.Qe[n][h].Th){if(a>=i[t]&&_<=e[t]){c=!1;break}i[t]=Math.min(i[t],a),e[t]=Math.max(e[t],_),l=!0}else if(u>i[t]&&u<e[t]){c=!1;break}}else c=!1;c&&(this.Qe[n][h].visible=!0,this.Qe[n][h].Th&&(V>=a?V=_:l||(i[A]=a,e[A++]=_)))}}xh(t,s,i,e,h){if(this.ph=t,this.Rh=s,this.Gh=i,e)this.Uh=Math.min(this.Uh,Math.max(0,t-i)),this.mh=Math.min(this.mh,Math.max(0,s-i)),this.Sh=Math.max(this.Sh,Math.min(this.width-1,t+i)),this.vh=Math.max(this.vh,Math.min(this.height-1,s+i));else{this.Uh=Math.max(0,t-i),this.mh=Math.max(0,s-i),this.Sh=Math.min(this.width-1,t+i),this.vh=Math.min(this.height-1,s+i);for(let t=this.mh;t<=this.vh;t++)for(let s=this.Uh;s<=this.Sh;s++)this.Qe[t][s].visible=!1}this.Qe[s][t].visible=!0,void 0===h?(this.Fh(1,1),this.Hh(1,1),this.Hh(1,-1),this.Fh(1,-1),this.Fh(-1,-1),this.Hh(-1,-1),this.Hh(-1,1),this.Fh(-1,1)):(1&h&&this.Fh(1,1),2&h&&this.Hh(1,1),4&h&&this.Hh(1,-1),8&h&&this.Fh(1,-1),16&h&&this.Fh(-1,-1),32&h&&this.Hh(-1,-1),64&h&&this.Hh(-1,1),128&h&&this.Fh(-1,1))}kh(){for(let t=this.mh;t<=this.vh;t++)for(let s=this.Uh;s<=this.Sh;s++){const i=this.Qe[t][s];i.Dh|=i.visible}}}const S=e(0,0,100),m=e(130,110,50),v=e(50,50,150),G=e(200,180,50);class b{constructor(t,s,i,e,h,n,o){if(this.x=t,this.y=s,this.char=i,this.name=e,this.color=h,this.Yh=!!n,o)for(var r in o)o.hasOwnProperty(r)&&(this[r]=o[r],this[r].Xh=this)}move(t,s){(function(t,s){if(Lt.Qe[s][t].gh)return!0;for(let i=0;i<dt.length;i++){const e=dt[i];if(e.Yh&&e.x===t&&e.y===s)return!0}return!1})(this.x+t,this.y+s)||(this.x+=t,this.y+=s)}Wh(t,s){const i=t-this.x,e=s-this.y,h=Math.hypot(i,e);this.move(Math.round(i/h),Math.round(e/h))}Qh(t){return Math.hypot(t.x-this.x,t.y-this.y)}zh(t,s){return Math.hypot(t-this.x,s-this.y)}Jh(){this.remove(),dt.unshift(this)}remove(){dt.splice(dt.indexOf(this),1)}X(){Lt.Ph(this.x,this.y)&&ft.je(this.x,this.y,this.char,this.color)}}class y{constructor(t,s,i,e,h){this.Xh=null,this.qh=t,this.jh=s,this.Zh=i,this.$h=t,this.tn=e,this.sn=h||null}get in(){return this.qh+k(this.Xh).reduce((t,s)=>t+s.en,0)}get hn(){return this.jh+k(this.Xh).reduce((t,s)=>t+s.nn,0)}get on(){return this.Zh+k(this.Xh).reduce((t,s)=>t+s.rn,0)}attack(t){const s=this.on-t.cn.hn;s>0?(j(Z(this.Xh.name)+" attacks "+t.name+" for "+s+" hit points."),t.cn.ln(s)):j(Z(this.Xh.name)+" attacks "+t.name+" but it has no effect!")}ln(t){this.$h-=t,this.$h<=0&&(this.$h=0,this.sn&&this.sn(this.Xh),this.Xh!==Et&&(Et.cn.tn+=this.tn,function(){const t=200+150*Et.level;if(Et.cn.tn>=t){Et.level++,Et.cn.tn-=t,j("Your battle skills grow stronger! You reached level "+Et.level+"!",h.g);const s=["Constitution (+20 HP, from "+Et.cn.in+")","Strength (+1 attack, from "+Et.cn.on+")","Agility (+1 defense, from "+Et.cn.hn+")"];Kt.add(new C("LEVEL UP",s,t=>{0===t?(Et.cn.qh+=20,Et.cn.$h+=20):1===t?Et.cn.Zh+=1:2===t&&(Et.cn.jh+=1)}))}}()))}heal(t){this.$h=Math.min(this.$h+t,this.in)}}class P{constructor(){this.Xh=null}un(){const t=this.Xh;Lt.Ph(t.x,t.y)&&(t.Qh(Et)>=2?t.Wh(Et.x,Et.y):Et.cn.$h>0&&t.cn.attack(Et))}}class F{constructor(t){this.Xh=null,this.an=t,this._n=10}un(){this._n>0?(this.Xh.move(At.uh(-1,1),At.uh(-1,1)),this._n--):(this.Xh.fn=this.an,j("The "+this.Xh.name+" is no longer confused!",h.D))}}class H{constructor(t){this.Kn=t}An(){gt.length>=26?j("Your inventory is full, cannot pick up "+this.Xh.name+".",h.D):(gt.push(this.Xh),this.Xh.remove(),j("You picked up a "+this.Xh.name+"!",h.I))}En(){this.Kn?this.Kn(this):this.Xh.Vn?this.Xh.Vn.dn():j("The "+this.Xh.name+" cannot be used.")}remove(){gt.splice(gt.indexOf(this.Xh),1)}}class x{constructor(t,s,i,e){this.On=t,this.rn=s,this.nn=i,this.en=e,this.wn=!1}dn(){this.wn?this.Ln():this.Nn()}Nn(){const t=function(t){for(let s=0;s<gt.length;s++){const i=gt[s];if(i.Vn&&i.Vn.On===t&&i.Vn.wn)return i.Vn}return null}(this.On);t&&t.Ln(),this.wn=!0,j("Equipped "+this.Xh.name+" on "+this.On+".",h.I)}Ln(){this.wn&&(this.wn=!1,j("Dequipped "+this.Xh.name+" on "+this.On+".",h.g))}}function k(t){return t===Et?gt.filter(t=>t.Vn&&t.Vn.wn).map(t=>t.Vn):[]}function Y(t,s){for(let i=s.y+1;i<s.y2;i++)for(let e=s.x+1;e<s.x2;e++)t.Qe[i][e].gh=!1,t.Qe[i][e].Th=!1}function X(t,s,i,e){for(let h=Math.min(s,i);h<=Math.max(s,i);h++)t.Qe[e][h].gh=!1,t.Qe[e][h].Th=!1}function W(t,s,i,e){for(let h=Math.min(s,i);h<=Math.max(s,i);h++)t.Qe[h][e].gh=!1,t.Qe[h][e].Th=!1}function Q(){const t=new U(80,43);for(let s=0;s<43;s++)for(let i=0;i<80;i++)t.Qe[s][i].gh=!0,t.Qe[s][i].Th=!0;const s=[];for(let i=0;i<30;i++){const i=At.uh(6,10),e=At.uh(6,10),h=At.uh(0,80-i-1),n=At.uh(0,43-e-1),r=new o(h,n,i,e);let c=!1;for(let t=0;t<s.length;t++)if(r.P(s[t])){c=!0;break}if(!c){Y(t,r);const i=r.G();if(0===s.length)Et.x=i.x,Et.y=i.y;else{const e=s[s.length-1].G();1===At.uh(0,1)?(X(t,e.x,i.x,e.y),W(t,e.y,i.y,i.x)):(W(t,e.y,i.y,e.x),X(t,e.x,i.x,i.y))}J(r),s.push(r)}}const i=s[s.length-1].G();return Vt=new b(i.x,i.y,"<","stairs",h.O),dt.push(Vt),Vt.Jh(),t}function z(t){for(let s=0;s<t.length;s++){const i=t[s][0],e=t[s][1];if(wt>=e)return i}return 0}function J(t){const s=z([[2,1],[3,4],[5,6]]),i={orc:80,troll:z([[15,3],[30,5],[60,7]])},e=z([[1,1],[2,4]]),n={heal:35,lightning:z([[25,4]]),fireball:z([[25,6]]),confuse:z([[10,2]]),sword:z([[5,4]]),shield:z([[15,8]])},o=At.uh(0,s+1);for(let s=0;s<o;s++){const s=At.uh(t.x+1,t.x2-1),e=At.uh(t.y+1,t.y2-1);let n=null;const o=At._h(i);if("orc"===o){const t=new y(20,0,4,35,et),i=new P;n=new b(s,e,"o","orc",h.I,!0,{cn:t,fn:i})}else if("troll"===o){const t=new y(30,2,8,100,et),i=new P;n=new b(s,e,"T","troll",h.B,!0,{cn:t,fn:i})}dt.push(n)}const r=At.uh(0,e+1);for(let s=0;s<r;s++){const s=At.uh(t.x+1,t.x2-1),i=At.uh(t.y+1,t.y2-1);let e=null;const o=At._h(n);"heal"===o?e=new b(s,i,"!","healing potion",h.m,!1,{item:new H(nt)}):"lightning"===o?e=new b(s,i,"#","scroll of lightning bolt",h.g,!1,{item:new H(ot)}):"fireball"===o?e=new b(s,i,"#","scroll of fireball",h.g,!1,{item:new H(rt)}):"confuse"===o?e=new b(s,i,"#","scroll of confusion",h.g,!1,{item:new H(ct)}):"sword"===o?e=new b(s,i,"/","sword",h.M,!1,{Vn:new x("right hand",3,0,0),item:new H}):"shield"===o&&(e=new b(s,i,"[","shield",h.T,!1,{Vn:new x("left hand",3,0,0),item:new H})),dt.push(e),e.Jh()}}function q(t,s,i,e,n,o,r,c){const l=Math.round(n/o*i);ft.fillRect(t,s,i,1,0,0,c),l>0&&ft.fillRect(t,s,l,1,0,0,r),ft.J(t+i/2,s,e+": "+n+"/"+o,h.O)}function j(t,s){for(;Ot.length>=6;)Ot.shift();Ot.push({text:t,color:s||h.O})}function Z(t){return t?t.charAt(0).toUpperCase()+t.slice(1):t}function $(t,s){const i=Et.x+t,e=Et.y+s;let h=null;for(let t=0;t<dt.length;t++){const s=dt[t];if(s.cn&&s.x===i&&s.y===e){h=s;break}}h?Et.cn.attack(h):(Et.move(t,s),Nt=!0);for(let t=0;t<dt.length;t++){const s=dt[t];s.fn&&s.fn.un()}}function tt(){if(!(Et.cn.$h<=0)&&!Kt.hh()){if(Tt)return(ft.oh(a.ut)||ft.gn.buttons[0].st())&&(t=Dt.x,s=Dt.y,Tt(t,s),ut()),(ft.oh(a.Et)||ft.gn.buttons[2].st())&&ut(),ft.oh(a.gt)&&Dt.y--,ft.oh(a.Nt)&&Dt.x--,ft.oh(a.Tt)&&Dt.x++,ft.oh(a.Dt)&&Dt.y++,void(0===ft.gn.dx&&0===ft.gn.dy||(Dt.x=ft.gn.x,Dt.y=ft.gn.y));var t,s;if(ft.oh(a.Et)&&(Ct="menu"),ft.oh(a.gt)&&$(0,-1),ft.oh(a.Nt)&&$(-1,0),ft.oh(a.Tt)&&$(1,0),ft.oh(a.Dt)&&$(0,1),ft.oh(a.$t))for(let t=0;t<dt.length;t++){const s=dt[t];s.x===Et.x&&s.y===Et.y&&s.item&&s.item.An()}if(ft.oh(a.ss))if(0===gt.length)Kt.add(new T("ALERT","Inventory is empty"));else{const t=gt.map(t=>t.Vn&&t.Vn.wn?t.name+" (on "+t.Vn.On+")":t.name);Kt.add(new C("INVENTORY",t,st))}if(ft.oh(a.Jt)){const t=200+150*Et.level;Kt.add(new T("CHARACTER","Level: "+Et.level+"\nExperience: "+Et.cn.tn+"\nExperience to level up: "+t+"\n\nMaximum HP: "+Et.cn.in+"\nAttack: "+Et.cn.on+"\nDefense: "+Et.cn.hn))}ft.oh(a.Di)&&Et.x===Vt.x&&Et.y===Vt.y&&(j("You take a moment to rest, and recover your strength.",h.S),Et.cn.heal(Et.cn.in/2),wt++,j("After a rare moment of peace, you descend deeper...",h.D),dt=[Et],Lt=Q(),Nt=!0)}}function st(t){t>=0&&gt[t].item.En()}function it(t){j("You died!",h.D)}function et(t){j(Z(t.name)+" is dead! You gain "+t.cn.tn+" XP.",h.v),t.char="%",t.color=h.C,t.Yh=!1,t.cn=null,t.fn=null,t.name="remains of "+t.name,t.Jh()}function ht(t,s,i){let e=i+1,h=null;for(let i=0;i<dt.length;i++){const n=dt[i];if(n.cn&&n!==Et){const i=n.zh(t,s);i<e&&(e=i,h=n)}}return h}function nt(t){Et.cn.$h!==Et.cn.in?(j("Your wounds start to feel better!",h.S),Et.cn.heal(4),t.remove()):j("You are already at full health.",h.C)}function ot(t){const s=ht(Et.x,Et.y,5);s?(j("A lightning bolt strikes the "+s.name+" with a loud thunder!",h.R),j("The damage is 20 hit points",h.R),s.cn.ln(20),t.remove()):j("No enemy is close enough to strike.",h.D)}function rt(t){j("Left-click to cast fireball, or right-click to cancel.",h.M),lt((s,i)=>{if(Et.zh(s,i)>10)j("Target out of range.",h.L);else{j("The fireball explodes, burning everything within 3 tiles!",h.v);for(let t=0;t<dt.length;t++){const e=dt[t];e.cn&&e.zh(s,i)<=3&&(j("The "+e.name+" gets burned for 12 hit points.",h.v),e.cn.ln(12))}t.remove()}})}function ct(t){j("Left-click to cast confuse, or right-click to cancel.",h.M),lt((s,i)=>{if(Et.zh(s,i)>8)return void j("Target out of range.",h.L);const e=function(t,s){return ht(t,s,0)}(s,i);e?(e.fn=new F(e.fn),e.fn.Xh=e,j("The eyes of the "+e.name+" look vacant, as he stumbles around!",h.I),t.remove()):j("No monster there.",h.L)})}function lt(t){Tt=t,Dt.x=Et.x,Dt.y=Et.y}function ut(){Tt=null}function at(){Nt&&(Lt.xh(Et.x,Et.y,10),Nt=!1);for(let t=0;t<43;t++)for(let s=0;s<80;s++){const i=Lt.Ph(s,t),e=Lt.Qe[t][s].Th;let n=h.V;i?(n=e?m:G,Lt.Qe[t][s].Dh=!0):Lt.Qe[t][s].Dh&&(n=e?S:v),ft.ze(s,t,0,0,n)}for(let t=0;t<dt.length;t++)dt[t].X();ft.fillRect(0,38,80,7,0,h.O,h.V);let t=39;for(let s=0;s<Ot.length;s++){const i=Ot[s];ft.je(22,t,i.text,i.color),t++}q(1,39,20,"HP",Et.cn.$h,Et.cn.in,h.D,h.C),q(1,40,20,"XP",Et.cn.tn,200+150*Et.level,h.S,h.m),ft.je(1,42,"Dungeon level "+wt,h.v),ft.je(1,38,function(){const t=ft.gn.x,s=ft.gn.y;if(!Lt.Ph(t,s))return"";const i=[];for(let e=0;e<dt.length;e++){const h=dt[e];h.x===t&&h.y===s&&i.push(h.name)}return Z(i.join(", "))}(),h.L),Tt&&ft.Je(Dt.x,Dt.y).He(h.O),Kt.X()}function _t(){if(0===Kt.Tn.length){const t=["Play a new game","Continue last game"];Kt.add(new C("MAIN MENU",t,t=>{0===t?function(){At=new D(Date.now()),Et=new b(40,25,"@","player",h.O,!0,{cn:new y(100,1,4,0,it)}),Et.level=1,dt=[Et],Ot=[],wt=1,Lt=Q(),Nt=!0,gt=[],j("Welcome stranger! Prepare to perish!",h.C);const t=new b(0,0,"-","dagger",h.M,!1,{Vn:new x("right hand",2,0,0),item:new H});gt.push(t),t.Vn.Nn(),Ct="game"}():1===t&&Et&&(Ct="game")}))}Kt.hh(),ft.clear(),It&&ft.eh(0,0,It,0,0,80,50),ft.J(40,10,"TOMBS OF THE ANCIENT KINGS",h.g),ft.J(40,12,"By Jotaf",h.g),Kt.X()}const ft=new class extends V{constructor(t,s,i,e){super(s,i),e=e||p,this.canvas=t,this.font=e.font||I,this.pixelWidth=s*this.font.Kh,this.pixelHeight=i*this.font.Ah,t.width=this.pixelWidth,t.height=this.pixelHeight,t.style.width=this.font.scale*this.pixelWidth+"px",t.style.height=this.font.scale*this.pixelHeight+"px",t.style.imageRendering="pixelated",t.style.outline="none",t.tabIndex=0,this.Dn(),window.addEventListener("resize",()=>this.Dn()),this.keys=new u(t),this.gn=new B(this,e);const h=t.getContext("webgl",{Cn:!1});if(!h)throw new Error("Unable to initialize WebGL. Your browser may not support it.");const n=h.createProgram();if(!n)throw new Error("Unable to initialize WebGL. Your browser may not support it.");this.In=h,this.Bn=n,h.attachShader(n,this.Mn(h.VERTEX_SHADER,"attribute vec2 a;attribute vec2 b;attribute vec3 c;attribute vec3 d;varying highp vec2 e;varying highp vec4 f;varying highp vec4 g;void main(void){gl_Position=vec4(a.x,a.y,0,1);e=b/16.0;f=vec4(c.r,c.g,c.b,1);g=vec4(d.r,d.g,d.b,1);}")),h.attachShader(n,this.Mn(h.FRAGMENT_SHADER,"varying highp vec2 e;varying highp vec4 f;varying highp vec4 g;uniform bool h;uniform sampler2D s;void main(void){gl_FragColor=texture2D(s,e);if(h){if(gl_FragColor.a<0.1){gl_FragColor=texture2D(s,g.rg*16.0+fract(e*16.0)/16.0);}}else{if(gl_FragColor.r<0.1) {gl_FragColor=g;} else {gl_FragColor=f;}}}")),h.linkProgram(n),h.useProgram(n),this.font.Eh&&h.uniform1i(h.getUniformLocation(n,"h"),1),this.pn=this.getAttribLocation("a"),this.Rn=this.getAttribLocation("b"),this.Un=this.getAttribLocation("c"),this.Sn=this.getAttribLocation("d");const o=s*i;this.mn=new Float32Array(3*o*4),this.vn=new Uint16Array(6*o),this.Gn=new Float32Array(2*o*4),this.bn=new Uint8Array(4*o*4),this.yn=new DataView(this.bn.buffer),this.Pn=new Uint8Array(4*o*4),this.Fn=new DataView(this.Pn.buffer);let r=0,c=0,l=0;for(let t=0;t<i;t++)for(let e=0;e<s;e++)this.mn[r++]=M(e,s),this.mn[r++]=-M(t,i),this.mn[r++]=M(e+1,s),this.mn[r++]=-M(t,i),this.mn[r++]=M(e+1,s),this.mn[r++]=-M(t+1,i),this.mn[r++]=M(e,s),this.mn[r++]=-M(t+1,i),this.vn[c++]=l+0,this.vn[c++]=l+1,this.vn[c++]=l+2,this.vn[c++]=l+0,this.vn[c++]=l+2,this.vn[c++]=l+3,l+=4;this.Hn=h.createBuffer(),this.xn=h.createBuffer(),this.kn=h.createBuffer(),this.Yn=h.createBuffer(),this.Xn=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,this.Hn),h.bufferData(h.ARRAY_BUFFER,this.mn,h.STATIC_DRAW),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.xn),h.bufferData(h.ELEMENT_ARRAY_BUFFER,this.vn,h.STATIC_DRAW),this.Wn=this.Qn(this.font.url),window.setInterval(()=>this.zn(),1e3/30)}Dn(){const t=this.canvas.parentElement.offsetWidth/this.pixelWidth,s=this.canvas.parentElement.offsetHeight/this.pixelHeight,i=Math.min(t,s),e=i*this.pixelWidth|0,h=i*this.pixelHeight|0;this.canvas.style.width=e+"px",this.canvas.style.height=h+"px"}getAttribLocation(t){const s=this.In.getAttribLocation(this.Bn,t);return this.In.enableVertexAttribArray(s),s}flush(){let t=0,s=0;for(let i=0;i<this.height;i++)for(let e=0;e<this.width;e++){const h=this.Je(e,i);if(!h.ye){t+=8,s+=16;continue}const n=h.charCode%16,o=h.charCode/16|0;this.Gn[t++]=n,this.Gn[t++]=o,this.Gn[t++]=n+1,this.Gn[t++]=o,this.Gn[t++]=n+1,this.Gn[t++]=o+1,this.Gn[t++]=n,this.Gn[t++]=o+1;for(let t=0;t<4;t++)this.yn.setUint32(s,h.ve,!1),this.Fn.setUint32(s,h.Ge,!1),s+=4;h.ye=!1}}Jn(t){const s=this.keys.getKey(t);return s&&s.j}oh(t){const s=this.keys.getKey(t);return s&&s.tt()}qn(t){const s=this.keys.getKey(t);return s?s.Z:0}Mn(t,s){const i=this.In,e=i.createShader(t);if(!e)throw new Error("An error occurred compiling the shader: ");if(i.shaderSource(e,s),i.compileShader(e),!i.getShaderParameter(e,i.COMPILE_STATUS))throw new Error("An error occurred compiling the shader: "+i.getShaderInfoLog(e));return e}Qn(t){const s=this.In,i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);const e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_BYTE,o=new Uint8Array([0,0,0,255]);s.texImage2D(s.TEXTURE_2D,0,e,1,1,0,h,n,o);const r=new Image;return r.onload=()=>{s.bindTexture(s.TEXTURE_2D,i),s.texImage2D(s.TEXTURE_2D,0,e,h,n,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR)},r.src=t,i}jn(){const t=this.In;t.clearColor(0,0,0,1),t.clearDepth(1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.viewport(0,0,this.pixelWidth,this.pixelHeight);{const s=2,i=t.FLOAT,e=!1,h=0,n=0;t.bindBuffer(t.ARRAY_BUFFER,this.Hn),t.vertexAttribPointer(this.pn,s,i,e,h,n)}{const s=2,i=t.FLOAT,e=!1,h=0,n=0;t.bindBuffer(t.ARRAY_BUFFER,this.kn),t.bufferData(t.ARRAY_BUFFER,this.Gn,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.Rn,s,i,e,h,n)}{const s=4,i=t.UNSIGNED_BYTE,e=!0,h=0,n=0;t.bindBuffer(t.ARRAY_BUFFER,this.Yn),t.bufferData(t.ARRAY_BUFFER,this.bn,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.Un,s,i,e,h,n)}{const s=4,i=t.UNSIGNED_BYTE,e=!0,h=0,n=0;t.bindBuffer(t.ARRAY_BUFFER,this.Xn),t.bufferData(t.ARRAY_BUFFER,this.Pn,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.Sn,s,i,e,h,n)}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.xn),t.useProgram(this.Bn),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.Wn);{const s=this.width*this.height*6,i=t.UNSIGNED_SHORT,e=0;t.drawElements(t.TRIANGLES,s,i,e)}}zn(){this.keys.ht(),this.gn.update(),this.update&&this.update(),this.state&&this.state.update(),this.flush(),this.jn()}}(document.querySelector("canvas"),80,45,{Zn:5}),Kt=new class{constructor(t,s){this.$n=t,this.to=s||new c,this.Tn=[]}add(t){this.Tn.push(this.to.k(this.$n,t))}hh(){if(0===this.Tn.length)return!1;const t=this.Tn.length-1,s=this.Tn[this.Tn.length-1];return s.F.hh(this.$n,s.H)&&this.Tn.splice(t,1),!0}X(){for(let t=0;t<this.Tn.length;t++)this.to.X(this.$n,this.Tn[t])}}(ft);let At=null,Et=null,Vt=null,dt=null,Ot=null,wt=0,Lt=null,Nt=!0,gt=null,Tt=null,Dt={x:0,y:0},Ct="menu",It=null;!function(t,s){const i=new Image;i.onload=()=>{const t=i.width,e=i.height,h=O(i),n=new V(t/2,e/2);for(let s=0;s<e;s+=2)for(let i=0;i<t;i+=2)w(n,h,i,s,t);s(n)},i.src=t}("menu.png",t=>{It=t}),ft.update=function(){switch(Ct){case"menu":_t();break;case"game":tt(),at()}}}])}));