(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./examples/customgui.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./examples/customgui.js":
/*!*******************************!*\
  !*** ./examples/customgui.js ***!
  \*******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_colors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../src/colors.js */ \"./src/colors.js\");\n/* harmony import */ var _src_console_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/console.js */ \"./src/console.js\");\n/* harmony import */ var _src_gui_dialogstate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/gui/dialogstate.js */ \"./src/gui/dialogstate.js\");\n/* harmony import */ var _src_gui_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/gui.js */ \"./src/gui.js\");\n/* harmony import */ var _src_gui_messagedialog_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../src/gui/messagedialog.js */ \"./src/gui/messagedialog.js\");\n/* harmony import */ var _src_gui_selectdialog_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../src/gui/selectdialog.js */ \"./src/gui/selectdialog.js\");\n/* harmony import */ var _src_keys_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../src/keys.js */ \"./src/keys.js\");\n/* harmony import */ var _src_point_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../src/point.js */ \"./src/point.js\");\n/* harmony import */ var _src_rect_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../src/rect.js */ \"./src/rect.js\");\n/* harmony import */ var _src_terminal_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../src/terminal.js */ \"./src/terminal.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nfunction CustomRenderer() {\n\n    this.getState = function (terminal, dialog) {\n        const width = dialog.contentsRect.width + 4;\n        const height = dialog.contentsRect.height + 4;\n        const x = ((terminal.width - width) / 2) | 0;\n        const y = ((terminal.height - height) / 2) | 0;\n        const state = new _src_gui_dialogstate_js__WEBPACK_IMPORTED_MODULE_2__[\"DialogState\"](\n            dialog,\n            new _src_rect_js__WEBPACK_IMPORTED_MODULE_8__[\"Rect\"](x, y, width, height),\n            new _src_point_js__WEBPACK_IMPORTED_MODULE_7__[\"Point\"](2, 2));\n        state.buffer = new _src_console_js__WEBPACK_IMPORTED_MODULE_1__[\"Console\"](width, height);\n        return state;\n    }\n\n    this.draw = function (terminal, dialogState) {\n        const buffer = dialogState.buffer;\n        const dialog = dialogState.dialog;\n        const { x, y, width, height } = dialogState.rect;\n        buffer.fillRect(0, 0, width, height, 0, _src_colors_js__WEBPACK_IMPORTED_MODULE_0__[\"Colors\"].LIGHT_CYAN, _src_colors_js__WEBPACK_IMPORTED_MODULE_0__[\"Colors\"].DARK_CYAN);\n        buffer.drawSingleBox(0, 0, width, height);\n        buffer.drawCenteredString((width / 2) | 0, 0, ' ' + dialog.title + ' ');\n        dialog.drawContents(buffer, dialogState.contentsOffset);\n        this.fadeIn(terminal, x, y, buffer, dialogState.count);\n        dialogState.count += 2;\n    }\n\n    this.fadeIn = function(dst, dstX, dstY, src, count) {\n      for (let y = 0; y < src.height; y++) {\n        for (let x = 0; x < src.width; x++) {\n            const dist = x + y;\n            if (dist < count) {\n                const cell = src.getCell(x, y);\n                dst.drawCell(dstX + x, dstY + y, cell);\n            }\n        }\n      }\n    }\n}\n\nconst term = new _src_terminal_js__WEBPACK_IMPORTED_MODULE_9__[\"Terminal\"](document.querySelector('canvas'), 80, 50);\n\nconst gui = new _src_gui_js__WEBPACK_IMPORTED_MODULE_3__[\"GUI\"](term, new CustomRenderer());\n\nconst options = [\n    'Sword',\n    'Banana',\n    'Magic Potion',\n    'Red Stapler'\n];\n\nlet x = 10;\nlet y = 10;\n\nterm.update = function () {\n    if (!gui.handleInput(term)) {\n        if (term.isKeyDown(_src_keys_js__WEBPACK_IMPORTED_MODULE_6__[\"Keys\"].VK_UP)) {\n            y--;\n        }\n        if (term.isKeyDown(_src_keys_js__WEBPACK_IMPORTED_MODULE_6__[\"Keys\"].VK_LEFT)) {\n            x--;\n        }\n        if (term.isKeyDown(_src_keys_js__WEBPACK_IMPORTED_MODULE_6__[\"Keys\"].VK_RIGHT)) {\n            x++;\n        }\n        if (term.isKeyDown(_src_keys_js__WEBPACK_IMPORTED_MODULE_6__[\"Keys\"].VK_DOWN)) {\n            y++;\n        }\n        if (term.isKeyPressed(_src_keys_js__WEBPACK_IMPORTED_MODULE_6__[\"Keys\"].VK_H)) {\n            gui.add(new _src_gui_messagedialog_js__WEBPACK_IMPORTED_MODULE_4__[\"MessageDialog\"]('ALERT', 'Hello World'));\n        }\n        if (term.isKeyPressed(_src_keys_js__WEBPACK_IMPORTED_MODULE_6__[\"Keys\"].VK_I)) {\n            gui.add(new _src_gui_selectdialog_js__WEBPACK_IMPORTED_MODULE_5__[\"SelectDialog\"]('INVENTORY', options, (choice) => {\n                gui.add(new _src_gui_messagedialog_js__WEBPACK_IMPORTED_MODULE_4__[\"MessageDialog\"]('ALERT', 'You chose: ' + options[choice]));\n            }));\n        }\n    }\n\n    term.clear();\n    term.fillRect(0, 0, 80, 50, 0, _src_colors_js__WEBPACK_IMPORTED_MODULE_0__[\"Colors\"].LIGHT_GREEN, _src_colors_js__WEBPACK_IMPORTED_MODULE_0__[\"Colors\"].BLACK);\n    term.drawString(1, 1, 'Hello world!');\n    term.drawString(1, 3, 'Use arrow keys to move');\n    term.drawString(1, 5, 'Press \"h\" to open a MessageDialog');\n    term.drawString(1, 7, 'Press \"i\" to open a SelectDialog');\n    term.drawString(x, y, '@');\n    gui.draw();\n};\n\n\n//# sourceURL=webpack:///./examples/customgui.js?");

/***/ }),

/***/ "./src/blendmode.js":
/*!**************************!*\
  !*** ./src/blendmode.js ***!
  \**************************/
/*! exports provided: BlendMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlendMode\", function() { return BlendMode; });\n\n/**\n * The BlendMode enum defines how translucent cells are rendered.\n */\nconst BlendMode = {\n\n  /**\n   * No blending.  Alpha is ignored.\n   */\n  None: 0,\n\n  /**\n   * Alpha blending.\n   *\n   * dstRGB = (srcRGB * srcA) + (dstRGB * (1-srcA))\n   *\n   * dstA = srcA + (dstA * (1-srcA))\n   */\n  Blend: 1,\n\n  /**\n   * Additive blending.\n   *\n   * dstRGB = (srcRGB * srcA) + dstRGB\n   *\n   * dstA = dstA\n   */\n  Add: 2\n};\n\n\n//# sourceURL=webpack:///./src/blendmode.js?");

/***/ }),

/***/ "./src/cell.js":
/*!*********************!*\
  !*** ./src/cell.js ***!
  \*********************/
/*! exports provided: Cell */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Cell\", function() { return Cell; });\n/* harmony import */ var _blendmode_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./blendmode.js */ \"./src/blendmode.js\");\n/* harmony import */ var _colors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./colors.js */ \"./src/colors.js\");\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./color.js */ \"./src/color.js\");\n\n\n\n\n\nfunction convertCharCode(charCode) {\n  if ((typeof charCode === 'string') && charCode.length > 0) {\n    return charCode.charCodeAt(0);\n  } else {\n    return charCode;\n  }\n}\n\nclass Cell {\n\n  constructor(charCode, fg, bg, meta) {\n    if (charCode !== undefined) {\n      this.charCode = convertCharCode(charCode);\n    } else {\n      this.charCode = ' '.charCodeAt(0);\n    }\n\n    if (fg !== undefined) {\n      this.fg = fg;\n    } else {\n      this.fg = _colors_js__WEBPACK_IMPORTED_MODULE_1__[\"Colors\"].WHITE;\n    }\n\n    if (bg !== undefined) {\n      this.bg = bg;\n    } else {\n      this.bg = _colors_js__WEBPACK_IMPORTED_MODULE_1__[\"Colors\"].BLACK;\n    }\n\n    if (meta !== undefined) {\n      this.meta = meta;\n    }\n\n    this.dirty = true;\n  }\n\n  setCharCode(charCode) {\n    if (this.charCode !== charCode) {\n      this.charCode = charCode;\n      this.dirty = true;\n    }\n  }\n\n  setForeground(fg) {\n    if (fg !== undefined && fg !== null && fg !== this.fg) {\n      this.fg = fg;\n      this.dirty = true;\n    }\n  }\n\n  setBackground(bg) {\n    if (bg !== undefined && bg !== null && bg !== this.bg) {\n      this.bg = bg;\n      this.dirty = true;\n    }\n  }\n\n  setMeta(meta) {\n    if (meta !== undefined) {\n      this.meta = meta;\n      this.dirty = true;\n    }\n  }\n\n  setValue(\n      charCode, fg, bg, meta) {\n    if (typeof charCode === 'string') {\n      charCode = charCode.charCodeAt(0);\n    }\n    if (typeof charCode === 'number') {\n      this.setCharCode(charCode);\n      this.setForeground(fg);\n      this.setBackground(bg);\n      this.setMeta(meta);\n    } else {\n      this.drawCell(charCode, _blendmode_js__WEBPACK_IMPORTED_MODULE_0__[\"BlendMode\"].None);\n    }\n    return this.dirty;\n  }\n\n  drawCell(otherCell, blendMode) {\n    const alpha = otherCell.bg & 0xFF;\n\n    if (blendMode === _blendmode_js__WEBPACK_IMPORTED_MODULE_0__[\"BlendMode\"].None || otherCell.charCode > 0) {\n      this.setCharCode(otherCell.charCode);\n      this.setForeground(otherCell.fg);\n    } else if (alpha > 0 && alpha < 255) {\n      this.setForeground(this.blendColors(this.fg, otherCell.bg, blendMode));\n    }\n\n    if (blendMode === _blendmode_js__WEBPACK_IMPORTED_MODULE_0__[\"BlendMode\"].None || alpha === 255) {\n      this.setBackground(otherCell.bg);\n    } else if (alpha > 0) {\n      this.setBackground(this.blendColors(this.bg, otherCell.bg, blendMode));\n    }\n\n    this.setMeta(otherCell.meta);\n  }\n\n  blendColors(c1, c2, blendMode) {\n    const alpha = c2 & 0xFF;\n    const w1 = (255 - alpha) / 255.0;\n    const w2 = 1.0 - w1;\n    const r1 = (c1 >> 24) & 0xFF;\n    const g1 = (c1 >> 16) & 0xFF;\n    const b1 = (c1 >> 8) & 0xFF;\n    const r2 = (c2 >> 24) & 0xFF;\n    const g2 = (c2 >> 16) & 0xFF;\n    const b2 = (c2 >> 8) & 0xFF;\n\n    switch (blendMode) {\n      case _blendmode_js__WEBPACK_IMPORTED_MODULE_0__[\"BlendMode\"].Blend:\n        return Object(_color_js__WEBPACK_IMPORTED_MODULE_2__[\"fromRgb\"])(\n            (w1 * r1 + w2 * r2) | 0, (w1 * g1 + w2 * g2) | 0,\n            (w1 * b1 + w2 * b2) | 0);\n\n      case _blendmode_js__WEBPACK_IMPORTED_MODULE_0__[\"BlendMode\"].Add:\n        return Object(_color_js__WEBPACK_IMPORTED_MODULE_2__[\"fromRgb\"])(\n            this.clamp((r1 + w2 * r2) | 0), this.clamp((g1 + w2 * g2) | 0),\n            this.clamp((b1 + w2 * b2) | 0));\n\n      default:\n        return c2;\n    }\n  }\n\n  clamp(x) {\n    return Math.min(255, x);\n  }\n}\n\n\n//# sourceURL=webpack:///./src/cell.js?");

/***/ }),

/***/ "./src/chars.js":
/*!**********************!*\
  !*** ./src/chars.js ***!
  \**********************/
/*! exports provided: Chars */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Chars\", function() { return Chars; });\n\n\n// https://en.wikipedia.org/wiki/Code_page_437\n// https://en.wikipedia.org/wiki/Block_Elements\n// https://en.wikipedia.org/wiki/Box-drawing_character\n\nconst Chars = {\n  SMILEY: 1,\n  INVERSE_SMILEY: 2,\n  HEART: 3,\n  DIAMOND: 4,\n  CLUB: 5,\n  SPADE: 6,\n  BULLET: 7,\n  INVERSE_BULLET: 8,\n\n  LIGHT_SHADE: 176,\n  MEDIUM_SHADE: 177,\n  DARK_SHADE: 178,\n\n  BOX_SINGLE_VERTICAL: 179,\n  BOX_SINGLE_VERTICAL_AND_SINGLE_LEFT: 180,\n  BOX_DOUBLE_VERTICAL_AND_DOUBLE_LEFT: 185,\n  BOX_DOUBLE_VERTICAL: 186,\n  BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT: 187,\n  BOX_DOUBLE_UP_AND_DOUBLE_LEFT: 188,\n  BOX_SINGLE_DOWN_AND_SINGLE_LEFT: 191,\n  BOX_SINGLE_UP_AND_SINGLE_RIGHT: 192,\n  BOX_SINGLE_HORIZONTAL_AND_SINGLE_UP: 193,\n  BOX_SINGLE_HORIZONTAL_AND_SINGLE_DOWN: 194,\n  BOX_SINGLE_VERTICAL_AND_SINGLE_RIGHT: 195,\n  BOX_SINGLE_HORIZONTAL: 196,\n  BOX_SINGLE_VERTICAL_AND_SINGLE_HORIZONTAL: 197,\n  BOX_DOUBLE_UP_AND_DOUBLE_RIGHT: 200,\n  BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT: 201,\n  BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_UP: 202,\n  BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_DOWN: 203,\n  BOX_DOUBLE_VERTICAL_AND_DOUBLE_RIGHT: 204,\n  BOX_DOUBLE_HORIZONTAL: 205,\n  BOX_DOUBLE_VERTICAL_AND_DOUBLE_HORIZONTAL: 206,\n  BOX_SINGLE_UP_AND_SINGLE_LEFT: 13 * 16 + 9,\n  BOX_SINGLE_DOWN_AND_SINGLE_RIGHT: 13 * 16 + 10,\n\n  BLOCK_BOTTOM_HALF: 13 * 16 + 12,\n  BLOCK_LEFT_HALF: 13 * 16 + 13,\n  BLOCK_RIGHT_HALF: 13 * 16 + 14,\n  BLOCK_TOP_HALF: 13 * 16 + 15,\n}\n\n\n//# sourceURL=webpack:///./src/chars.js?");

/***/ }),

/***/ "./src/color.js":
/*!**********************!*\
  !*** ./src/color.js ***!
  \**********************/
/*! exports provided: fromRgb, fromHsv */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fromRgb\", function() { return fromRgb; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fromHsv\", function() { return fromHsv; });\n\n/**\n * Creates a big-endian 32-bit RGBA color from red, green, and blue components.\n * @param r Red (0-255).\n * @param g Green (0-255).\n * @param b Blue (0-255).\n * @param a Optional alpha (0-255).\n * @return A 32-bit unsigned integer color.\n */\nfunction fromRgb(r, g, b, a) {\n  if (a === undefined) {\n    a = 255;\n  }\n  return ((r << 24) + (g << 16) + (b << 8) + a);\n}\n\n\n/**\n * Converts a color from HSV format to RGBA format.\n *\n * Based on: https://stackoverflow.com/a/17243070/2051724\n *\n * @param h Hue (0.0 - 1.0).\n * @param s Saturation (0.0 - 1.0).\n * @param v Value (0.0 - 1.0).\n * @param a Optional alpha (0.0 - 1.0).\n * @return A 32-bit unsigned integer color.\n */\nfunction fromHsv(h, s, v, a) {\n  const i = (h * 6) | 0;\n  const f = h * 6 - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n  let r, g, b;\n  switch (i % 6) {\n    case 0:\n      r = v, g = t, b = p;\n      break;\n    case 1:\n      r = q, g = v, b = p;\n      break;\n    case 2:\n      r = p, g = v, b = t;\n      break;\n    case 3:\n      r = p, g = q, b = v;\n      break;\n    case 4:\n      r = t, g = p, b = v;\n      break;\n    case 5:\n      r = v, g = p, b = q;\n      break;\n    default:\n      r = 0;\n      g = 0;\n      b = 0;\n  }\n  if (a === undefined) {\n    a = 1.0;\n  }\n  return fromRgb((r * 255) | 0, (g * 255) | 0, (b * 255) | 0, (a * 255) | 0);\n}\n\n\n//# sourceURL=webpack:///./src/color.js?");

/***/ }),

/***/ "./src/colors.js":
/*!***********************!*\
  !*** ./src/colors.js ***!
  \***********************/
/*! exports provided: Colors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Colors\", function() { return Colors; });\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./color.js */ \"./src/color.js\");\n\n\n\nconst Colors = {\n  BLACK: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0, 0, 0),\n  WHITE: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0xff, 0xff, 0xff),\n  LIGHT_GRAY: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0xaa, 0xaa, 0xaa),\n  DARK_GRAY: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0x55, 0x55, 0x55),\n  YELLOW: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0xff, 0xff, 0x55),\n  BROWN: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0xaa, 0x55, 0x00),\n  LIGHT_RED: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0xff, 0x55, 0x55),\n  DARK_RED: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0xaa, 0x00, 0x00),\n  LIGHT_GREEN: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0x55, 0xff, 0x55),\n  DARK_GREEN: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0x00, 0xaa, 0x00),\n  LIGHT_CYAN: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0x55, 0xff, 0xff),\n  DARK_CYAN: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0x00, 0xaa, 0xaa),\n  LIGHT_BLUE: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0x55, 0x55, 0xff),\n  DARK_BLUE: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0x00, 0x00, 0xaa),\n  LIGHT_MAGENTA: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0xff, 0x55, 0xff),\n  DARK_MAGENTA: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0xaa, 0x00, 0xaa),\n  ORANGE: Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"fromRgb\"])(0xff, 0x88, 0x00),\n};\n\n\n//# sourceURL=webpack:///./src/colors.js?");

/***/ }),

/***/ "./src/console.js":
/*!************************!*\
  !*** ./src/console.js ***!
  \************************/
/*! exports provided: Console */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Console\", function() { return Console; });\n/* harmony import */ var _blendmode_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./blendmode.js */ \"./src/blendmode.js\");\n/* harmony import */ var _cell_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cell.js */ \"./src/cell.js\");\n/* harmony import */ var _chars_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chars.js */ \"./src/chars.js\");\n\n\n\n\n\nclass Console {\n\n  constructor(width, height, opt_cellClass) {\n    this.width = width;\n    this.height = height;\n    this.grid = new Array();\n\n    const cellClass = opt_cellClass || _cell_js__WEBPACK_IMPORTED_MODULE_1__[\"Cell\"];\n\n    for (let y = 0; y < height; y++) {\n      const row = new Array();\n      for (let x = 0; x < width; x++) {\n        row.push(new cellClass(x, y));\n      }\n      this.grid.push(row);\n    }\n\n    this.clear();\n  }\n\n  clear() {\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        this.drawChar(x, y, 0);\n      }\n    }\n  }\n\n  getCell(x, y) {\n    if (x < 0 || y < 0 || x >= this.width || y >= this.height) {\n      return undefined;\n    }\n    return this.grid[y][x];\n  }\n\n  getCharCode(x, y) {\n    if (x < 0 || y < 0 || x >= this.width || y >= this.height) {\n      return undefined;\n    }\n    return this.grid[y][x].charCode;\n  }\n\n  drawChar(x, y, c, fg, bg) {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y][x].setValue(c, fg, bg);\n    }\n  }\n\n  drawString(x, y, str, fg, bg) {\n    for (let i = 0; i < str.length; i++) {\n      this.drawChar(x + i, y, str.charCodeAt(i), fg, bg);\n    }\n  }\n\n  drawCenteredString(x, y, str, fg, bg) {\n    this.drawString(x - Math.floor(str.length / 2), y, str, fg, bg);\n  }\n\n  drawHLine(x, y, width, c, fg, bg) {\n    for (let xi = x; xi < x + width; xi++) {\n      this.drawChar(xi, y, c, fg, bg);\n    }\n  }\n\n  drawVLine(x, y, height, c, fg, bg) {\n    for (let yi = y; yi < y + height; yi++) {\n      this.drawChar(x, yi, c, fg, bg);\n    }\n  }\n\n  drawRect(x, y, width, height, c, fg, bg) {\n    this.drawHLine(x, y, width, c, fg, bg);\n    this.drawHLine(x, y + height - 1, width, c, fg, bg);\n    this.drawVLine(x, y, height, c, fg, bg);\n    this.drawVLine(x + width - 1, y, height, c, fg, bg);\n  }\n\n  drawBox(\n      x, y, width, height, topChar,\n      rightChar, bottomChar, leftChar,\n      topLeftChar, topRightChar, bottomRightChar,\n      bottomLeftChar, fg, bg) {\n    this.fillRect(x, y, width, height, 0, fg, bg);\n\n    this.drawHLine(x, y, width, topChar);\n    this.drawHLine(x, y + height - 1, width, bottomChar);\n\n    this.drawVLine(x, y, height, leftChar);\n    this.drawVLine(x + width - 1, y, height, rightChar);\n\n    this.drawChar(x, y, topLeftChar);\n    this.drawChar(x + width - 1, y, topRightChar);\n    this.drawChar(x, y + height - 1, bottomLeftChar);\n    this.drawChar(x + width - 1, y + height - 1, bottomRightChar);\n  }\n\n  drawSingleBox(x, y, width, height, fg, bg) {\n    this.drawBox(\n        x, y, width, height, _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_SINGLE_HORIZONTAL,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_SINGLE_VERTICAL, _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_SINGLE_HORIZONTAL,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_SINGLE_VERTICAL, _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_SINGLE_DOWN_AND_SINGLE_RIGHT,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_SINGLE_DOWN_AND_SINGLE_LEFT,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_SINGLE_UP_AND_SINGLE_LEFT,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_SINGLE_UP_AND_SINGLE_RIGHT, fg, bg);\n  }\n\n  drawDoubleBox(x, y, width, height, fg, bg) {\n    this.drawBox(\n        x, y, width, height, _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_DOUBLE_HORIZONTAL,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_DOUBLE_VERTICAL, _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_DOUBLE_HORIZONTAL,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_DOUBLE_VERTICAL, _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_DOUBLE_UP_AND_DOUBLE_LEFT,\n        _chars_js__WEBPACK_IMPORTED_MODULE_2__[\"Chars\"].BOX_DOUBLE_UP_AND_DOUBLE_RIGHT, fg, bg);\n  }\n\n  fillRect(x, y, width, height, c, fg, bg) {\n    for (let yi = y; yi < y + height; yi++) {\n      this.drawHLine(x, yi, width, c, fg, bg);\n    }\n  }\n\n  drawConsole(\n      dstX, dstY, srcConsole, srcX,\n      srcY, srcWidth, srcHeight,\n      blendMode) {\n    blendMode = blendMode || _blendmode_js__WEBPACK_IMPORTED_MODULE_0__[\"BlendMode\"].None;\n\n    for (let y = 0; y < srcHeight; y++) {\n      for (let x = 0; x < srcWidth; x++) {\n        const cell = srcConsole.getCell(srcX + x, srcY + y);\n        if (cell) {\n          this.drawCell(dstX + x, dstY + y, cell, blendMode);\n        }\n      }\n    }\n  }\n\n  drawCell(x, y, cell, blendMode) {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y][x].drawCell(cell, blendMode);\n    }\n  }\n}\n\n\n//# sourceURL=webpack:///./src/console.js?");

/***/ }),

/***/ "./src/font.js":
/*!*********************!*\
  !*** ./src/font.js ***!
  \*********************/
/*! exports provided: Font, DEFAULT_FONT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Font\", function() { return Font; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DEFAULT_FONT\", function() { return DEFAULT_FONT; });\n\nclass Font {\n\n  constructor(\n      url, charWidth, charHeight, scale,\n      graphical) {\n    this.url = url;\n    this.charWidth = charWidth;\n    this.charHeight = charHeight;\n    this.scale = scale || 1.0;\n    this.graphical = !!graphical;\n  }\n}\n\n/**\n * Font image as data URL.\n * IBM terminal font.\n * See img/font.png.\n */\nconst FONT_IMAGE = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQ' +\n    'MAAAD58POIAAAABlBMVEUAAAD///+l2Z/dAAAEhklEQVRIx42Sv4oUQRDGC4UzadSwwMUD8' +\n    'QEKlbWD4Q58B/NGpTVocKO1wXHUzMAH0AcwMTYVGg5ag0IzEXaRjdZEZKNzkKbHqtnzHypY' +\n    '09M9+5uvqr7pbYCuC6ftaRhgONXs30eAh0O1rYDm4IS/eH0B8GxRW2vxo396yu/fb0ZFrW1' +\n    'zcOXlPU/XPwK8PGjbWhVwM4KnH61912oK4+zmmHJaQotyt1kvtC2Atdo24iohPDiG/v4eIC' +\n    'JsY3Wy8Yvr0DSIBOdxgH6v8wsriWhc8s0AtaK/GzSl1jR0nSjQnwki6FQxNFKjgzO2a7BBq' +\n    'ucH7dL4M9z96CIhT1Fs/AgKgcA6dKCxI29DaHNwRJ4EGAU1sU0OG9rmE4SIc3A4FChACqqh' +\n    'JRwpxkqh9wxag4DSmEJ5DtpFwAP4GUf6lmKcFFti1BYuQp4xN8kxM2kNhjdkTOiTUeAKGvh' +\n    'A1rLpMbYACQzCITlTDRMbLYoEa2JWPSMRFZIupcSzMVKcEUkX+sOG+ChNX2vD8ex6k7OFHL' +\n    '0P1655JuPd53WAD+yTv3UrCQiuHmYBbfIxpkImuvpBQBkVb5g4XHv3JkNireG8AO9zDhBZu' +\n    '2z2OMZ11S5/RIlyMefMNaZ4GsCz5xcjyM6hHYEjAYEfO8Ig1rklAe9sRIeYAdwyoIBq6YIz' +\n    'CAKiWoifA3m3o2AzWcdYKOdY47EIf8QABCuYgIUVmdVMEYEDA0Hmo/3D6KKJbh5mxhP3UsW' +\n    'IE97wnEygyizOfOLi2JOJW8CeOblW9IHeKZgv4zxuzDryOmb+4aQH+MXV6e0ywdUcxqCjBW' +\n    'l5GpbzZduOG1QEiGXP86T7EfiJfkMQ4OO4H0yqyNC2zlziWEN7Ywuc2fQ4p5BNkS5QYXP2h' +\n    '5NtRJh0vCKQidtVJmCGAwDSSQpYggSxiRIyzewsgCh4xxiTPDMh5aj//l7btqkr6rQyIOtL' +\n    'ji4lVRQwXdzvus40Y53M33fh50GZwF4ExQeMlvuTggLzSi4ElKczUO7zVtpwdyMKdqZKOWb' +\n    '2nDblawPxPmuMwFEWBW+jlZR1eYtS442kiBGMWCi/h1/+GAR6NYOJWiqNJXFygFtrkx5C0O' +\n    '3IeFGs67HhEEhmBu/BUOT+0551pXxYIF+Elpi5AKRkLl5GUbCCZddyMv621ujEBPP4vSy2f' +\n    'otTx3U+d3WBiFOA6VSGSB49v/M7GBX9FPrDaT2c9qr4PCpwZ7qz813R94dVFIe19v33GlMZ' +\n    'UghQFb8BrfE7QBmgBMbrn2B3enn/y3B5+DL8UBAdnejdYdBxeV9ejwoYNTgW0Ok/gA7UG2G' +\n    'AzanhL0DG7q4svynwF8UwDPu7u/vD0IudzSltMtVbP+J/gUbR29oJ7Fg9s6Uy+DnpiTCOYc' +\n    '4cXOeXMWfsusSw7FOg9x655nax6BlecwpOQQ68WBwp+H2LMQTuOq2RUigzh2Q/R3CWARJIJ' +\n    'G199EwOTyKBlQMznshCRGeQ5gHABAQl6M4gLEdAzVaBWMCiANdsayDCHBA/hagKYfielrJI' +\n    'lipKKQIA9Nf3wBloTHT6BuAx15zRNa1nAAAAAElFTkSuQmCC';\n\nconst DEFAULT_FONT = new Font(FONT_IMAGE, 8, 8);\n\n\n//# sourceURL=webpack:///./src/font.js?");

/***/ }),

/***/ "./src/gui.js":
/*!********************!*\
  !*** ./src/gui.js ***!
  \********************/
/*! exports provided: GUI */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GUI\", function() { return GUI; });\n/* harmony import */ var _gui_defaultdialogrenderer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gui/defaultdialogrenderer.js */ \"./src/gui/defaultdialogrenderer.js\");\n\n\n\nclass GUI {\n\n  constructor(terminal, renderer) {\n    this.terminal = terminal;\n    this.renderer = renderer || new _gui_defaultdialogrenderer_js__WEBPACK_IMPORTED_MODULE_0__[\"DefaultDialogRenderer\"]();\n    this.dialogs = [];\n  }\n\n  add(dialog) {\n    this.dialogs.push(this.renderer.getState(this.terminal, dialog));\n  }\n\n  handleInput() {\n    if (this.dialogs.length === 0) {\n      return false;\n    }\n\n    const activeIndex = this.dialogs.length - 1;\n    const activeState = this.dialogs[this.dialogs.length - 1];\n    const activeDialog = activeState.dialog;\n    if (activeDialog.handleInput(this.terminal, activeState.contentsOffset)) {\n      this.dialogs.splice(activeIndex, 1);\n    }\n\n    return true;\n  }\n\n  draw() {\n    for (let i = 0; i < this.dialogs.length; i++) {\n      this.renderer.draw(this.terminal, this.dialogs[i]);\n    }\n  }\n}\n\n\n//# sourceURL=webpack:///./src/gui.js?");

/***/ }),

/***/ "./src/gui/defaultdialogrenderer.js":
/*!******************************************!*\
  !*** ./src/gui/defaultdialogrenderer.js ***!
  \******************************************/
/*! exports provided: DefaultDialogRenderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DefaultDialogRenderer\", function() { return DefaultDialogRenderer; });\n/* harmony import */ var _colors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../colors.js */ \"./src/colors.js\");\n/* harmony import */ var _point_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../point.js */ \"./src/point.js\");\n/* harmony import */ var _rect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../rect.js */ \"./src/rect.js\");\n/* harmony import */ var _dialogstate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dialogstate.js */ \"./src/gui/dialogstate.js\");\n\n\n\n;\n\n\nclass DefaultDialogRenderer {\n  getState(terminal, dialog) {\n    const width = dialog.contentsRect.width + 4;\n    const height = dialog.contentsRect.height + 4;\n    const x = ((terminal.width - width) / 2) | 0;\n    const y = ((terminal.height - height) / 2) | 0;\n    return new _dialogstate_js__WEBPACK_IMPORTED_MODULE_3__[\"DialogState\"](\n        dialog, new _rect_js__WEBPACK_IMPORTED_MODULE_2__[\"Rect\"](x, y, width, height), new _point_js__WEBPACK_IMPORTED_MODULE_1__[\"Point\"](x + 2, y + 2));\n  }\n\n  draw(term, dialogState) {\n    const dialog = dialogState.dialog;\n    const {x, y, width, height} = dialogState.rect;\n    term.fillRect(x, y, width, height, 0, _colors_js__WEBPACK_IMPORTED_MODULE_0__[\"Colors\"].WHITE, _colors_js__WEBPACK_IMPORTED_MODULE_0__[\"Colors\"].BLACK);\n    term.drawSingleBox(x, y, width, height);\n    term.drawCenteredString(x + (width / 2) | 0, y, ' ' + dialog.title + ' ');\n    dialog.drawContents(term, dialogState.contentsOffset);\n  }\n}\n\n//# sourceURL=webpack:///./src/gui/defaultdialogrenderer.js?");

/***/ }),

/***/ "./src/gui/dialog.js":
/*!***************************!*\
  !*** ./src/gui/dialog.js ***!
  \***************************/
/*! exports provided: Dialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Dialog\", function() { return Dialog; });\n\nclass Dialog {\n\n  constructor(contentsRect, title) {\n    this.contentsRect = contentsRect;\n    this.title = title;\n  }\n\n  drawContents(console, offset) {}\n\n  handleInput(terminal, offset) {}\n}\n\n\n//# sourceURL=webpack:///./src/gui/dialog.js?");

/***/ }),

/***/ "./src/gui/dialogstate.js":
/*!********************************!*\
  !*** ./src/gui/dialogstate.js ***!
  \********************************/
/*! exports provided: DialogState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DialogState\", function() { return DialogState; });\n\nclass DialogState {\n\n  constructor(dialog, rect, contentsOffset) {\n    this.dialog = dialog;\n    this.rect = rect;\n    this.contentsOffset = contentsOffset;\n    this.open = false;\n    this.count = 0;\n  }\n}\n\n\n//# sourceURL=webpack:///./src/gui/dialogstate.js?");

/***/ }),

/***/ "./src/gui/messagedialog.js":
/*!**********************************!*\
  !*** ./src/gui/messagedialog.js ***!
  \**********************************/
/*! exports provided: MessageDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MessageDialog\", function() { return MessageDialog; });\n/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../keys.js */ \"./src/keys.js\");\n/* harmony import */ var _rect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rect.js */ \"./src/rect.js\");\n/* harmony import */ var _dialog_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dialog.js */ \"./src/gui/dialog.js\");\n\n\n\n\n\nclass MessageDialog extends _dialog_js__WEBPACK_IMPORTED_MODULE_2__[\"Dialog\"] {\n\n  constructor(title, message) {\n    const lines = message.split('\\n');\n    let width = title.length;\n    for (let i = 0; i < lines.length; i++) {\n      width = Math.max(width, lines[i].length);\n    }\n\n    const height = lines.length;\n    const rect = new _rect_js__WEBPACK_IMPORTED_MODULE_1__[\"Rect\"](0, 0, width, height);\n    super(rect, title);\n    this.lines = lines;\n  }\n\n  drawContents(console, offset) {\n    for (let i = 0; i < this.lines.length; i++) {\n      console.drawString(offset.x, offset.y + i, this.lines[i]);\n    }\n  }\n\n  handleInput(terminal, offset) {\n    return terminal.isKeyPressed(_keys_js__WEBPACK_IMPORTED_MODULE_0__[\"Keys\"].VK_ESCAPE);\n  }\n}\n\n\n//# sourceURL=webpack:///./src/gui/messagedialog.js?");

/***/ }),

/***/ "./src/gui/selectdialog.js":
/*!*********************************!*\
  !*** ./src/gui/selectdialog.js ***!
  \*********************************/
/*! exports provided: SelectDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SelectDialog\", function() { return SelectDialog; });\n/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../keys.js */ \"./src/keys.js\");\n/* harmony import */ var _rect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rect.js */ \"./src/rect.js\");\n/* harmony import */ var _dialog_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dialog.js */ \"./src/gui/dialog.js\");\n\n\n\n\n\nclass SelectDialog extends _dialog_js__WEBPACK_IMPORTED_MODULE_2__[\"Dialog\"] {\n\n  constructor(\n      title, options, callback) {\n    let width = title.length;\n    for (let i = 0; i < options.length; i++) {\n      width = Math.max(width, options[i].length + 4);\n    }\n\n    const height = options.length;\n    const rect = new _rect_js__WEBPACK_IMPORTED_MODULE_1__[\"Rect\"](0, 0, width, height);\n    super(rect, title);\n    this.options = options;\n    this.callback = callback;\n  }\n\n  drawContents(console, offset) {\n    for (let i = 0; i < this.options.length; i++) {\n      const str = String.fromCharCode(65 + i) + ' - ' + this.options[i];\n      console.drawString(offset.x, offset.y + i, str);\n    }\n  }\n\n  handleInput(terminal, offset) {\n    for (let i = 0; i < this.options.length; i++) {\n      if (terminal.isKeyPressed(_keys_js__WEBPACK_IMPORTED_MODULE_0__[\"Keys\"].VK_A + i)) {\n        this.callback(i);\n        return true;\n      }\n    }\n    return terminal.isKeyPressed(_keys_js__WEBPACK_IMPORTED_MODULE_0__[\"Keys\"].VK_ESCAPE);\n  }\n}\n\n\n//# sourceURL=webpack:///./src/gui/selectdialog.js?");

/***/ }),

/***/ "./src/input.js":
/*!**********************!*\
  !*** ./src/input.js ***!
  \**********************/
/*! exports provided: Input */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Input\", function() { return Input; });\n\n/**\n * The delay in frames before input repeating.\n * Assume 60 FPS.\n */\nconst INPUT_REPEAT_DELAY = 30;\n\n/**\n * The delay between subsequent repeat firing.\n * Assume 60 FPS.\n */\nconst INPUT_REPEAT_RATE = 3;\n\n/**\n * The Input class represents a pysical input.\n * Example: keyboard key or mouse button.\n */\nclass Input {\n    constructor() {\n        this.down = false;\n        this.downCount = 0;\n        this.upCount = 0;\n    }\n\n    update() {\n        if (this.down) {\n            this.downCount++;\n            this.upCount = 0;\n        } else {\n            this.downCount = 0;\n            this.upCount++;\n        }\n    }\n\n    /**\n     * Returns true if the input is \"pressed\".\n     * Pressed is a one time event when the input first goes down.\n     * It then repeats on repeat delay.\n     */\n    isPressed() {\n        const count = this.downCount;\n        return count === 1 || (count > INPUT_REPEAT_DELAY && count % INPUT_REPEAT_RATE === 0);\n    }\n\n    /**\n     * Returns true if the input is \"clicked\".\n     * Clicked is a one time event when the input first goes up.\n     */\n    isClicked() {\n        return this.upCount === 1;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/input.js?");

/***/ }),

/***/ "./src/keys.js":
/*!*********************!*\
  !*** ./src/keys.js ***!
  \*********************/
/*! exports provided: Keyboard, Keys */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Keyboard\", function() { return Keyboard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Keys\", function() { return Keys; });\n/* harmony import */ var _input_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./input.js */ \"./src/input.js\");\n\n\n/**\n * Number of keys to track.\n */\nconst KEY_COUNT = 256;\n\nclass Keyboard {\n\n  /**\n   * Creates a new keyboard module.\n   *\n   * @param el DOM el to attach listeners.\n   */\n  constructor(el) {\n    this.keys = new Array(KEY_COUNT);\n    for (let i = 0; i < KEY_COUNT; i++) {\n      this.keys[i] = new _input_js__WEBPACK_IMPORTED_MODULE_0__[\"Input\"]();\n    }\n\n    el.addEventListener('keydown', e => this.setKey(e, true));\n    el.addEventListener('keyup', e => this.setKey(e, false));\n  }\n\n\n  setKey(e, state) {\n    const keyCode = e.keyCode;\n    if (keyCode === Keys.VK_F11) {\n      // Allow fullscreen requests to go through\n      return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n    if (keyCode >= 0 && keyCode < KEY_COUNT) {\n      this.keys[keyCode].down = state;\n    }\n  }\n\n  updateKeys() {\n    for (let i = 0; i < KEY_COUNT; i++) {\n      this.keys[i].update();\n    }\n  }\n\n  getKey(keyCode) {\n    return keyCode >= 0 && keyCode < KEY_COUNT ? this.keys[keyCode] : null;\n  }\n}\n\nconst Keys = {\n  VK_CANCEL: 3,\n  VK_HELP: 6,\n  VK_BACK_SPACE: 8,\n  VK_TAB: 9,\n  VK_CLEAR: 12,\n  VK_ENTER: 13,\n  VK_SHIFT: 16,\n  VK_CONTROL: 17,\n  VK_ALT: 18,\n  VK_PAUSE: 19,\n  VK_CAPS_LOCK: 20,\n  VK_ESCAPE: 27,\n  VK_SPACE: 32,\n  VK_PAGE_UP: 33,\n  VK_PAGE_DOWN: 34,\n  VK_END: 35,\n  VK_HOME: 36,\n  VK_LEFT: 37,\n  VK_UP: 38,\n  VK_RIGHT: 39,\n  VK_DOWN: 40,\n  VK_PRINTSCREEN: 44,\n  VK_INSERT: 45,\n  VK_DELETE: 46,\n  VK_0: 48,\n  VK_1: 49,\n  VK_2: 50,\n  VK_3: 51,\n  VK_4: 52,\n  VK_5: 53,\n  VK_6: 54,\n  VK_7: 55,\n  VK_8: 56,\n  VK_9: 57,\n  VK_COLON: 58,\n  VK_SEMICOLON: 59,\n  VK_LESS_THAN: 60,\n  VK_EQUALS: 61,\n  VK_GREATER_THAN: 62,\n  VK_QUESTION_MARK: 63,\n  VK_AT: 64,\n  VK_A: 65,\n  VK_B: 66,\n  VK_C: 67,\n  VK_D: 68,\n  VK_E: 69,\n  VK_F: 70,\n  VK_G: 71,\n  VK_H: 72,\n  VK_I: 73,\n  VK_J: 74,\n  VK_K: 75,\n  VK_L: 76,\n  VK_M: 77,\n  VK_N: 78,\n  VK_O: 79,\n  VK_P: 80,\n  VK_Q: 81,\n  VK_R: 82,\n  VK_S: 83,\n  VK_T: 84,\n  VK_U: 85,\n  VK_V: 86,\n  VK_W: 87,\n  VK_X: 88,\n  VK_Y: 89,\n  VK_Z: 90,\n  VK_CONTEXT_MENU: 93,\n  VK_NUMPAD0: 96,\n  VK_NUMPAD1: 97,\n  VK_NUMPAD2: 98,\n  VK_NUMPAD3: 99,\n  VK_NUMPAD4: 100,\n  VK_NUMPAD5: 101,\n  VK_NUMPAD6: 102,\n  VK_NUMPAD7: 103,\n  VK_NUMPAD8: 104,\n  VK_NUMPAD9: 105,\n  VK_MULTIPLY: 106,\n  VK_ADD: 107,\n  VK_SEPARATOR: 108,\n  VK_SUBTRACT: 109,\n  VK_DECIMAL: 110,\n  VK_DIVIDE: 111,\n  VK_F1: 112,\n  VK_F2: 113,\n  VK_F3: 114,\n  VK_F4: 115,\n  VK_F5: 116,\n  VK_F6: 117,\n  VK_F7: 118,\n  VK_F8: 119,\n  VK_F9: 120,\n  VK_F10: 121,\n  VK_F11: 122,\n  VK_F12: 123,\n  VK_F13: 124,\n  VK_F14: 125,\n  VK_F15: 126,\n  VK_F16: 127,\n  VK_F17: 128,\n  VK_F18: 129,\n  VK_F19: 130,\n  VK_F20: 131,\n  VK_F21: 132,\n  VK_F22: 133,\n  VK_F23: 134,\n  VK_F24: 135,\n  VK_NUM_LOCK: 144,\n  VK_SCROLL_LOCK: 145,\n  VK_CIRCUMFLEX: 160,\n  VK_EXCLAMATION: 161,\n  VK_DOUBLE_QUOTE: 162,\n  VK_HASH: 163,\n  VK_DOLLAR: 164,\n  VK_PERCENT: 165,\n  VK_AMPERSAND: 166,\n  VK_UNDERSCORE: 167,\n  VK_OPEN_PAREN: 168,\n  VK_CLOSE_PAREN: 169,\n  VK_ASTERISK: 170,\n  VK_PLUS: 171,\n  VK_PIPE: 172,\n  VK_HYPHEN_MINUS: 173,\n  VK_OPEN_CURLY_BRACKET: 174,\n  VK_CLOSE_CURLY_BRACKET: 175,\n  VK_TILDE: 176,\n  VK_COMMA: 188,\n  VK_PERIOD: 190,\n  VK_SLASH: 191,\n  VK_BACK_QUOTE: 192,\n  VK_OPEN_BRACKET: 219,\n  VK_BACK_SLASH: 220,\n  VK_CLOSE_BRACKET: 221,\n  VK_QUOTE: 222,\n  VK_META: 224,\n  VK_ALTGR: 225,\n  VK_WIN: 91,\n  VK_KANA: 21,\n  VK_HANGUL: 21,\n  VK_EISU: 22,\n  VK_JUNJA: 23,\n  VK_FINAL: 24,\n  VK_HANJA: 25,\n  VK_KANJI: 25,\n  VK_CONVERT: 28,\n  VK_NONCONVERT: 29,\n  VK_ACCEPT: 30,\n  VK_MODECHANGE: 31,\n  VK_SELECT: 41,\n  VK_PRINT: 42,\n  VK_EXECUTE: 43,\n  VK_SLEEP: 95,\n};\n\n\n//# sourceURL=webpack:///./src/keys.js?");

/***/ }),

/***/ "./src/mouse.js":
/*!**********************!*\
  !*** ./src/mouse.js ***!
  \**********************/
/*! exports provided: Mouse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Mouse\", function() { return Mouse; });\n/* harmony import */ var _rect_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rect.js */ \"./src/rect.js\");\n/* harmony import */ var _input_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./input.js */ \"./src/input.js\");\n\n\n\n\nclass Mouse {\n\n  constructor(terminal, options) {\n    this.el = terminal.canvas;\n    this.width = terminal.width;\n    this.height = terminal.height;\n    this.options = options;\n    this.prevX = 0;\n    this.prevY = 0;\n    this.x = 0;\n    this.y = 0;\n    this.dx = 0;\n    this.dy = 0;\n    this.buttons = [new _input_js__WEBPACK_IMPORTED_MODULE_1__[\"Input\"](), new _input_js__WEBPACK_IMPORTED_MODULE_1__[\"Input\"](), new _input_js__WEBPACK_IMPORTED_MODULE_1__[\"Input\"]()];\n\n    const el = this.el;\n    el.addEventListener('mousedown', e => this.handleEvent(e));\n    el.addEventListener('mouseup', e => this.handleEvent(e));\n    el.addEventListener('mousemove', e => this.handleEvent(e));\n    el.addEventListener('contextmenu', e => this.handleEvent(e));\n\n    const touchEventHandler = this.handleTouchEvent.bind(this);\n    el.addEventListener('touchstart', touchEventHandler);\n    el.addEventListener('touchend', touchEventHandler);\n    el.addEventListener('touchcancel', touchEventHandler);\n    el.addEventListener('touchmove', touchEventHandler);\n  }\n\n  handleTouchEvent(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (e.type === 'touchend' && this.options.requestFullscreen) {\n      this.requestFullscreen();\n    }\n\n    if (e.touches.length > 0) {\n      const touch = e.touches[0];\n      this.updatePosition(touch.clientX, touch.clientY);\n      this.buttons[0].down = true;\n    } else {\n      this.buttons[0].down = false;\n    }\n  }\n\n  handleEvent(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.updatePosition(e.clientX, e.clientY);\n\n    if (e.type === 'mousedown') {\n      this.buttons[e.button].down = true;\n\n      this.el.focus();\n\n      if (this.options.requestFullscreen) {\n        this.requestFullscreen();\n      }\n    }\n\n    if (e.type === 'mouseup') {\n      this.buttons[e.button].down = false;\n    }\n  }\n\n  updatePosition(clientX, clientY) {\n    let rect = this.el.getBoundingClientRect();\n\n    // If the client rect is not the same aspect ratio as canvas,\n    // then we are fullscreen.\n    // Need to update client rect accordingly.\n\n    const terminalAspectRatio = this.width / this.height;\n    const rectAspectRatio = rect.width / rect.height;\n\n    if (rectAspectRatio - terminalAspectRatio > 0.01) {\n      const actualWidth = terminalAspectRatio * rect.height;\n      const excess = rect.width - actualWidth;\n      rect = new _rect_js__WEBPACK_IMPORTED_MODULE_0__[\"Rect\"](Math.floor(excess / 2), 0, actualWidth, rect.height);\n    }\n\n    if (rectAspectRatio - terminalAspectRatio < -0.01) {\n      const actualHeight = rect.width / terminalAspectRatio;\n      const excess = rect.height - actualHeight;\n      rect = new _rect_js__WEBPACK_IMPORTED_MODULE_0__[\"Rect\"](0, Math.floor(excess / 2), rect.width, actualHeight);\n    }\n\n    this.x = (this.width * (clientX - rect.left) / rect.width) | 0;\n    this.y = (this.height * (clientY - rect.top) / rect.height) | 0;\n  }\n\n  requestFullscreen() {\n    const canvas = this.el;\n    if (canvas.requestFullscreen) {\n      canvas.requestFullscreen();\n    } else if (canvas.webkitRequestFullscreen) {\n      canvas.webkitRequestFullscreen();\n    } else if (canvas.mozRequestFullScreen) {\n      canvas.mozRequestFullScreen();\n    }\n  }\n\n  update() {\n    this.dx = this.x - this.prevX;\n    this.dy = this.y - this.prevY;\n    this.prevX = this.x;\n    this.prevY = this.y;\n\n    for (let i = 0; i < this.buttons.length; i++) {\n      this.buttons[i].update();\n    }\n  }\n}\n\n//# sourceURL=webpack:///./src/mouse.js?");

/***/ }),

/***/ "./src/point.js":
/*!**********************!*\
  !*** ./src/point.js ***!
  \**********************/
/*! exports provided: Point */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Point\", function() { return Point; });\n\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\n\n//# sourceURL=webpack:///./src/point.js?");

/***/ }),

/***/ "./src/rect.js":
/*!*********************!*\
  !*** ./src/rect.js ***!
  \*********************/
/*! exports provided: Rect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Rect\", function() { return Rect; });\n/* harmony import */ var _point_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./point.js */ \"./src/point.js\");\n\n\nclass Rect {\n  constructor(x, y, width, height) {\n    this.x = this.left = x;\n    this.y = this.top = y;\n    this.width = width;\n    this.height = height;\n    this.x2 = x + width;\n    this.y2 = y + height;\n  }\n\n  getCenter() {\n    return new _point_js__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](this.x + (this.width / 2) | 0, this.y + (this.height / 2) | 0);\n  }\n\n  intersects(other) {\n    return this.x <= other.x2 && this.x2 >= other.x && this.y <= other.y2 && this.y2 >= other.y;\n  }\n\n  contains(point) {\n    return point.x >= this.x && point.y < this.x2 && point.y >= this.y && point.y < this.y2;\n  }\n}\n\n\n//# sourceURL=webpack:///./src/rect.js?");

/***/ }),

/***/ "./src/shaders.js":
/*!************************!*\
  !*** ./src/shaders.js ***!
  \************************/
/*! exports provided: VERTEX_SHADER_SOURCE, FRAGMENT_SHADER_SOURCE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VERTEX_SHADER_SOURCE\", function() { return VERTEX_SHADER_SOURCE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FRAGMENT_SHADER_SOURCE\", function() { return FRAGMENT_SHADER_SOURCE; });\n\n/**\n * Vertex shader program.\n *\n * a = attribute vec2 aVertexPosition;\n * b = attribute vec2 aTextureCoord;\n * c = attribute vec3 aFgColor;\n * d = attribute vec3 aBgColor;\n * e = varying vec2 vTextureCoord;\n * f = varying vec4 vFgColor;\n * g = varying vec4 vBgColor;\n */\nconst VERTEX_SHADER_SOURCE = 'attribute vec2 a;' +\n    'attribute vec2 b;' +\n    'attribute vec3 c;' +\n    'attribute vec3 d;' +\n    'varying highp vec2 e;' +\n    'varying highp vec4 f;' +\n    'varying highp vec4 g;' +\n    'void main(void){' +\n    'gl_Position=vec4(a.x,a.y,0,1);' +\n    'e=b/16.0;' +\n    'f=vec4(c.r,c.g,c.b,1);' +\n    'g=vec4(d.r,d.g,d.b,1);' +\n    '}';\n\n/**\n * Fragment shader program.\n *\n * e = varying vec2 vTextureCoord;\n * f = varying vec4 vFgColor;\n * g = varying vec4 vBgColor;\n * h = uniform bool uGraphicalTiles;\n * s = uniform sampler2D uSampler;\n */\nconst FRAGMENT_SHADER_SOURCE = 'varying highp vec2 e;' +\n    'varying highp vec4 f;' +\n    'varying highp vec4 g;' +\n    'uniform bool h;' +\n    'uniform sampler2D s;' +\n    'void main(void){' +\n    'gl_FragColor=texture2D(s,e);' +\n    'if(h){' +\n    // Using graphical tiles\n    'if(gl_FragColor.a<0.1){' +\n    // The current pixel of the foreground sprite is transparent.\n    // Draw the background tile instead.\n    // Use the background red channel for the tile X coordinate.\n    // Use the background green channel for the tile Y coordinate.\n    // Use the fractional component of the texture coord for the pixel offset.\n    'gl_FragColor=texture2D(s,g.rg*16.0+fract(e*16.0)/16.0);' +\n    '}' +\n    '}else{' +\n    // Using ASCII characters\n    'if(gl_FragColor.r<0.1) {' +\n    // Black background, so use bgColor\n    'gl_FragColor=g;' +\n    '} else {' +\n    // White background, so use fgColor\n    'gl_FragColor=f;' +\n    '}' +\n    '}' +\n    '}';\n\n\n//# sourceURL=webpack:///./src/shaders.js?");

/***/ }),

/***/ "./src/terminal.js":
/*!*************************!*\
  !*** ./src/terminal.js ***!
  \*************************/
/*! exports provided: Terminal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Terminal\", function() { return Terminal; });\n/* harmony import */ var _console_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./console.js */ \"./src/console.js\");\n/* harmony import */ var _font_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./font.js */ \"./src/font.js\");\n/* harmony import */ var _keys_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./keys.js */ \"./src/keys.js\");\n/* harmony import */ var _mouse_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mouse.js */ \"./src/mouse.js\");\n/* harmony import */ var _shaders_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shaders.js */ \"./src/shaders.js\");\n\n\n\n\n\n\n\n/**\n * Linearly interpolates a number in the range 0-max to -1.0-1.0.\n *\n * @param i The value between 0 and max.\n * @param max The maximum value.\n * @returns The interpolated value between -1.0 and 1.0.\n */\nfunction interpolate(i, max) {\n  return -1.0 + 2.0 * (i / max);\n}\n\nconst DEFAULT_OPTIONS = {\n  font: _font_js__WEBPACK_IMPORTED_MODULE_1__[\"DEFAULT_FONT\"],\n  requestFullscreen: false\n};\n\nclass Terminal extends _console_js__WEBPACK_IMPORTED_MODULE_0__[\"Console\"] {\n  constructor(canvas, width, height, options) {\n    super(width, height);\n\n    options = options || DEFAULT_OPTIONS;\n\n    this.canvas = canvas;\n    this.font = options.font || _font_js__WEBPACK_IMPORTED_MODULE_1__[\"DEFAULT_FONT\"];\n    this.pixelWidth = width * this.font.charWidth;\n    this.pixelHeight = height * this.font.charHeight;\n\n    canvas.width = this.pixelWidth;\n    canvas.height = this.pixelHeight;\n    canvas.style.width = (this.font.scale * this.pixelWidth) + 'px';\n    canvas.style.height = (this.font.scale * this.pixelHeight) + 'px';\n    canvas.style.imageRendering = 'pixelated';\n    canvas.style.outline = 'none';\n    canvas.tabIndex = 0;\n    this.handleResize();\n    window.addEventListener('resize', () => this.handleResize());\n\n    this.keys = new _keys_js__WEBPACK_IMPORTED_MODULE_2__[\"Keyboard\"](canvas);\n    this.mouse = new _mouse_js__WEBPACK_IMPORTED_MODULE_3__[\"Mouse\"](this, options);\n\n    // Get the WebGL context from the canvas\n    const gl = canvas.getContext('webgl', {antialias: false});\n    if (!gl) {\n      throw new Error(\n          'Unable to initialize WebGL. Your browser may not support it.');\n    }\n\n    const program = gl.createProgram();\n    if (!program) {\n      throw new Error(\n          'Unable to initialize WebGL. Your browser may not support it.');\n    }\n\n    this.gl = gl;\n    this.program = program;\n\n    gl.attachShader(program, this.buildShader(gl.VERTEX_SHADER, _shaders_js__WEBPACK_IMPORTED_MODULE_4__[\"VERTEX_SHADER_SOURCE\"]));\n    gl.attachShader(program, this.buildShader(gl.FRAGMENT_SHADER, _shaders_js__WEBPACK_IMPORTED_MODULE_4__[\"FRAGMENT_SHADER_SOURCE\"]));\n    gl.linkProgram(program);\n    gl.useProgram(program);\n\n    if (this.font.graphical) {\n      // Set the flag to ignore foreground/background colors, and use texture\n      // directly\n      gl.uniform1i(gl.getUniformLocation(program, 'h'), 1);\n    }\n\n    this.positionAttribLocation = this.getAttribLocation('a');\n    this.textureAttribLocation = this.getAttribLocation('b');\n    this.fgColorAttribLocation = this.getAttribLocation('c');\n    this.bgColorAttribLocation = this.getAttribLocation('d');\n\n    const cellCount = width * height;\n    this.positionsArray = new Float32Array(cellCount * 3 * 4);\n    this.indexArray = new Uint16Array(cellCount * 6);\n    this.textureArray = new Float32Array(cellCount * 2 * 4);\n    this.foregroundUint8Array = new Uint8Array(cellCount * 4 * 4);\n    this.foregroundDataView = new DataView(this.foregroundUint8Array.buffer);\n    this.backgroundUint8Array = new Uint8Array(cellCount * 4 * 4);\n    this.backgroundDataView = new DataView(this.backgroundUint8Array.buffer);\n\n    // Init the positions buffer\n    let i = 0;\n    let j = 0;\n    let k = 0;\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        // Top-left\n        this.positionsArray[i++] = interpolate(x, width);\n        this.positionsArray[i++] = -interpolate(y, height);\n\n        // Top-right\n        this.positionsArray[i++] = interpolate(x + 1, width);\n        this.positionsArray[i++] = -interpolate(y, height);\n\n        // Bottom-right\n        this.positionsArray[i++] = interpolate(x + 1, width);\n        this.positionsArray[i++] = -interpolate(y + 1, height);\n\n        // Bottom-left\n        this.positionsArray[i++] = interpolate(x, width);\n        this.positionsArray[i++] = -interpolate(y + 1, height);\n\n        this.indexArray[j++] = k + 0;\n        this.indexArray[j++] = k + 1;\n        this.indexArray[j++] = k + 2;\n        this.indexArray[j++] = k + 0;\n        this.indexArray[j++] = k + 2;\n        this.indexArray[j++] = k + 3;\n\n        k += 4;\n      }\n    }\n\n    this.positionBuffer = gl.createBuffer();\n    this.indexBuffer = gl.createBuffer();\n    this.textureBuffer = gl.createBuffer();\n    this.foregroundBuffer = gl.createBuffer();\n    this.backgroundBuffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this.positionsArray, gl.STATIC_DRAW);\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indexArray, gl.STATIC_DRAW);\n\n    this.texture = this.loadTexture(this.font.url);\n\n    this.frameDelay = options.frameDelay || 0;\n    this.frameIndex = 0;\n\n    this.renderLoop();\n  }\n\n  handleResize() {\n    const width = this.canvas.parentElement.offsetWidth;\n    const height = width * this.pixelHeight / this.pixelWidth;\n    this.canvas.style.width = width + 'px';\n    this.canvas.style.height = height + 'px';\n  }\n\n  getAttribLocation(name) {\n    const location = this.gl.getAttribLocation(this.program, name);\n    this.gl.enableVertexAttribArray(location);\n    return location;\n  }\n\n  flush() {\n    let textureArrayIndex = 0;\n    let colorArrayIndex = 0;\n\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        const cell = this.getCell(x, y);\n\n        if (!cell.dirty) {\n          textureArrayIndex += 8;\n          colorArrayIndex += 16;\n          continue;\n        }\n\n        const textureX = (cell.charCode % 16);\n        const textureY = ((cell.charCode / 16) | 0);\n\n        this.textureArray[textureArrayIndex++] = textureX;\n        this.textureArray[textureArrayIndex++] = textureY;\n\n        this.textureArray[textureArrayIndex++] = textureX + 1;\n        this.textureArray[textureArrayIndex++] = textureY;\n\n        this.textureArray[textureArrayIndex++] = textureX + 1;\n        this.textureArray[textureArrayIndex++] = textureY + 1;\n\n        this.textureArray[textureArrayIndex++] = textureX;\n        this.textureArray[textureArrayIndex++] = textureY + 1;\n\n        for (let i = 0; i < 4; i++) {\n          this.foregroundDataView.setUint32(colorArrayIndex, cell.fg, false);\n          this.backgroundDataView.setUint32(colorArrayIndex, cell.bg, false);\n          colorArrayIndex += 4;\n        }\n\n        cell.dirty = false;\n      }\n    }\n  }\n\n  isKeyDown(keyCode) {\n    const key = this.keys.getKey(keyCode);\n    return key && key.down;\n  }\n\n  isKeyPressed(keyCode) {\n    const key = this.keys.getKey(keyCode);\n    return key && key.isPressed();\n  }\n\n  getKeyDownCount(keyCode) {\n    const key = this.keys.getKey(keyCode);\n    return key ? key.downCount : 0;\n  }\n\n  buildShader(type, source) {\n    const gl = this.gl;\n    const sh = gl.createShader(type);\n    if (!sh) {\n      throw new Error('An error occurred compiling the shader: ');\n    }\n    gl.shaderSource(sh, source);\n    gl.compileShader(sh);\n    if (!gl.getShaderParameter(sh, gl.COMPILE_STATUS)) {\n      throw new Error(\n          'An error occurred compiling the shader: ' + gl.getShaderInfoLog(sh));\n    }\n    return sh;\n  }\n\n  /**\n   * Initialize a texture and load an image.\n   * When the image finished loading copy it into the texture.\n   * @param url\n   */\n  loadTexture(url) {\n    const gl = this.gl;\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    // Because images have to be download over the internet\n    // they might take a moment until they are ready.\n    // Until then put a single pixel in the texture so we can\n    // use it immediately. When the image has finished downloading\n    // we'll update the texture with the contents of the image.\n    const level = 0;\n    const internalFormat = gl.RGBA;\n    const width = 1;\n    const height = 1;\n    const border = 0;\n    const srcFormat = gl.RGBA;\n    const srcType = gl.UNSIGNED_BYTE;\n    const pixel = new Uint8Array([0, 0, 0, 255]);  // opaque black\n    gl.texImage2D(\n        gl.TEXTURE_2D, level, internalFormat, width, height, border, srcFormat,\n        srcType, pixel);\n\n    const image = new Image();\n    image.onload = () => {\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texImage2D(\n          gl.TEXTURE_2D, level, internalFormat, srcFormat, srcType, image);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    };\n    image.src = url;\n\n    return texture;\n  }\n\n  //\n  // Draw the scene.\n  //\n  render() {\n    const gl = this.gl;\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\n    gl.clearDepth(1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    gl.viewport(0, 0, this.pixelWidth, this.pixelHeight);\n\n    // Tell WebGL how to pull out the positions from the position\n    // buffer into the vertexPosition attribute\n    {\n      const numComponents = 2;\n      const type = gl.FLOAT;\n      const normalize = false;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n      gl.vertexAttribPointer(\n          this.positionAttribLocation, numComponents, type, normalize, stride,\n          offset);\n    }\n\n    // Tell WebGL how to pull out the texture coordinates from\n    // the texture coordinate buffer into the textureCoord attribute.\n    {\n      const numComponents = 2;\n      const type = gl.FLOAT;\n      const normalize = false;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.textureBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, this.textureArray, gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(\n          this.textureAttribLocation, numComponents, type, normalize, stride,\n          offset);\n    }\n\n    // Foreground color\n    {\n      const numComponents = 4;\n      const type = gl.UNSIGNED_BYTE;\n      const normalize = true;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.foregroundBuffer);\n      gl.bufferData(\n          gl.ARRAY_BUFFER, this.foregroundUint8Array, gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(\n          this.fgColorAttribLocation, numComponents, type, normalize, stride,\n          offset);\n    }\n\n    // Background color\n    {\n      const numComponents = 4;\n      const type = gl.UNSIGNED_BYTE;\n      const normalize = true;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.backgroundBuffer);\n      gl.bufferData(\n          gl.ARRAY_BUFFER, this.backgroundUint8Array, gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(\n          this.bgColorAttribLocation, numComponents, type, normalize, stride,\n          offset);\n    }\n\n    // Tell WebGL which indices to use to index the vertices\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n\n    // Tell WebGL to use our program when drawing\n    gl.useProgram(this.program);\n\n    // Tell WebGL we want to affect texture unit 0\n    gl.activeTexture(gl.TEXTURE0);\n\n    // Bind the texture to texture unit 0\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n    // Tell the shader we bound the texture to texture unit 0\n    {\n      const vertexCount = this.width * this.height * 6;\n      const type = gl.UNSIGNED_SHORT;\n      const offset = 0;\n      gl.drawElements(gl.TRIANGLES, vertexCount, type, offset);\n    }\n  }\n\n  renderLoop() {\n    this.frameIndex++;\n    if (this.frameIndex >= this.frameDelay) {\n      this.keys.updateKeys();\n      this.mouse.update();\n      if (this.update) {\n        this.update();\n      }\n      this.flush();\n      this.render();\n      this.frameIndex = 0;\n    }\n    requestAnimationFrame(this.renderLoop.bind(this));\n  }\n}\n\n\n//# sourceURL=webpack:///./src/terminal.js?");

/***/ })

/******/ });
});