import{R as a,P as g,C as r,K as l}from"./terminal.fe5b05f3.js";class u{constructor(t,e,s){this.dialog=t,this.rect=e,this.contentsOffset=s,this.open=!1,this.count=0}}class w{getState(t,e){const s=e.contentsRect.width+4,n=e.contentsRect.height+4,i=(t.width-s)/2|0,h=(t.height-n)/2|0;return new u(e,new a(i,h,s,n),new g(i+2,h+2))}draw(t,e){const s=e.dialog,{x:n,y:i,width:h,height:o}=e.rect;t.fillRect(n,i,h,o,0,r.WHITE,r.BLACK),t.drawSingleBox(n,i,h,o),t.drawCenteredString(n+h/2|0,i," "+s.title+" "),s.drawContents(t,e.contentsOffset)}}class y{constructor(t,e){this.terminal=t,this.renderer=e||new w,this.dialogs=[]}add(t){this.dialogs.push(this.renderer.getState(this.terminal,t))}handleInput(){if(this.dialogs.length===0)return!1;const t=this.dialogs.length-1,e=this.dialogs[this.dialogs.length-1];return e.dialog.handleInput(this.terminal,e.contentsOffset)&&this.dialogs.splice(t,1),!0}draw(){for(let t=0;t<this.dialogs.length;t++)this.renderer.draw(this.terminal,this.dialogs[t])}}class d{constructor(t,e){this.contentsRect=t,this.title=e}}class p extends d{constructor(t,e){const s=e.split(`
`);let n=t.length;for(let o=0;o<s.length;o++)n=Math.max(n,s[o].length);const i=s.length,h=new a(0,0,n,i);super(h,t),this.lines=s}drawContents(t,e){for(let s=0;s<this.lines.length;s++)t.drawString(e.x,e.y+s,this.lines[s])}handleInput(t,e){return t.isKeyPressed(l.VK_ESCAPE)}}class C extends d{constructor(t,e,s){let n=t.length;for(let o=0;o<e.length;o++)n=Math.max(n,e[o].length+4);const i=e.length,h=new a(0,0,n,i);super(h,t),this.options=e,this.callback=s,this.hoverIndex=-1}drawContents(t,e){for(let s=0;s<this.options.length;s++){const n=String.fromCharCode(65+s)+" - "+this.options[s];s===this.hoverIndex?t.drawString(e.x,e.y+s,n,r.BLACK,r.WHITE):t.drawString(e.x,e.y+s,n,r.WHITE,r.BLACK)}}handleInput(t,e){if(this.hoverIndex=-1,t.mouse.x>=e.x&&t.mouse.x<e.x+this.contentsRect.width&&t.mouse.y>=e.y&&t.mouse.y<e.y+this.contentsRect.height&&(this.hoverIndex=t.mouse.y-e.y,t.mouse.buttons[0].upCount===1))return this.callback(this.hoverIndex),!0;for(let s=0;s<this.options.length;s++)if(t.isKeyPressed(l.VK_A+s))return this.callback(s),!0;return t.isKeyPressed(l.VK_ESCAPE)}isMouseOverOption(t,e,s){return t.mouse.x>=e.x&&t.mouse.x<e.x+this.contentsRect.width&&t.mouse.y===e.y+s}}export{u as D,y as G,p as M,C as S};
