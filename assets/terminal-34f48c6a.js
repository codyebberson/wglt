var m=(t=>(t[t.None=0]="None",t[t.Blend=1]="Blend",t[t.Add=2]="Add",t))(m||{});function L(t,e,i,s){return s===void 0&&(s=255),(t<<24)+(e<<16)+(i<<8)+s}function ut(t,e,i,s){const o=t*6|0,r=t*6-o,n=i*(1-e),_=i*(1-r*e),a=i*(1-(1-r)*e);let h,u,l;switch(o%6){case 0:h=i,u=a,l=n;break;case 1:h=_,u=i,l=n;break;case 2:h=n,u=i,l=a;break;case 3:h=n,u=_,l=i;break;case 4:h=a,u=n,l=i;break;case 5:h=i,u=n,l=_;break;default:h=0,u=0,l=0}return s===void 0&&(s=1),L(h*255|0,u*255|0,l*255|0,s*255|0)}const U={BLACK:L(0,0,0),WHITE:L(255,255,255),LIGHT_GRAY:L(170,170,170),DARK_GRAY:L(85,85,85),YELLOW:L(255,255,85),BROWN:L(170,85,0),LIGHT_RED:L(255,85,85),DARK_RED:L(170,0,0),LIGHT_GREEN:L(85,255,85),DARK_GREEN:L(0,170,0),LIGHT_CYAN:L(85,255,255),DARK_CYAN:L(0,170,170),LIGHT_BLUE:L(85,85,255),DARK_BLUE:L(0,0,170),LIGHT_MAGENTA:L(255,85,255),DARK_MAGENTA:L(170,0,170),ORANGE:L(255,136,0)},b=new Map;function g(t){b.set(t.name,t)}var P=Object.defineProperty,G=Object.getOwnPropertyDescriptor,C=(t,e,i,s)=>{for(var o=s>1?void 0:s?G(e,i):e,r=t.length-1,n;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&P(e,i,o),o};function X(t){return typeof t=="string"&&t.length>0?t.charCodeAt(0):t}let v=class{constructor(t,e,i,s,o){this.x=t,this.y=e,i!==void 0?this.charCode=X(i):this.charCode=" ".charCodeAt(0),s!==void 0?this.fg=s:this.fg=U.WHITE,o!==void 0?this.bg=o:this.bg=U.BLACK,this.dirty=!0,this.blocked=!1,this.blockedSight=!1,this.explored=!1,this.visible=!1,this.pathId=-1,this.g=0,this.h=0,this.prev=null}setCharCode(t){this.charCode!==t&&(this.charCode=t,this.dirty=!0)}setForeground(t){t!=null&&t!==this.fg&&(this.fg=t,this.dirty=!0)}setBackground(t){t!=null&&t!==this.bg&&(this.bg=t,this.dirty=!0)}setValue(t,e,i){return typeof t=="string"&&(t=t.charCodeAt(0)),typeof t=="number"?(this.setCharCode(t),e!==void 0&&this.setForeground(e),i!==void 0&&this.setBackground(i)):this.drawCell(t,m.None),this.dirty}drawCell(t,e){const i=t.bg&255;e===m.None||t.charCode>0?(this.setCharCode(t.charCode),this.setForeground(t.fg)):i>0&&i<255&&this.setForeground(this.blendColors(this.fg,t.bg,e)),e===m.None||i===255?this.setBackground(t.bg):i>0&&this.setBackground(this.blendColors(this.bg,t.bg,e))}blendColors(t,e,i){const o=(255-(e&255))/255,r=1-o,n=t>>24&255,_=t>>16&255,a=t>>8&255,h=e>>24&255,u=e>>16&255,l=e>>8&255;switch(i){case m.Blend:return L(o*n+r*h|0,o*_+r*u|0,o*a+r*l|0);case m.Add:return L(this.clamp(n+r*h|0),this.clamp(_+r*u|0),this.clamp(a+r*l|0));default:return e}}clamp(t){return Math.min(255,t)}};v=C([g],v);var O=(t=>(t[t.SMILEY=1]="SMILEY",t[t.INVERSE_SMILEY=2]="INVERSE_SMILEY",t[t.HEART=3]="HEART",t[t.DIAMOND=4]="DIAMOND",t[t.CLUB=5]="CLUB",t[t.SPADE=6]="SPADE",t[t.BULLET=7]="BULLET",t[t.INVERSE_BULLET=8]="INVERSE_BULLET",t[t.LIGHT_SHADE=176]="LIGHT_SHADE",t[t.MEDIUM_SHADE=177]="MEDIUM_SHADE",t[t.DARK_SHADE=178]="DARK_SHADE",t[t.BOX_SINGLE_VERTICAL=179]="BOX_SINGLE_VERTICAL",t[t.BOX_SINGLE_VERTICAL_AND_SINGLE_LEFT=180]="BOX_SINGLE_VERTICAL_AND_SINGLE_LEFT",t[t.BOX_DOUBLE_VERTICAL_AND_DOUBLE_LEFT=185]="BOX_DOUBLE_VERTICAL_AND_DOUBLE_LEFT",t[t.BOX_DOUBLE_VERTICAL=186]="BOX_DOUBLE_VERTICAL",t[t.BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT=187]="BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT",t[t.BOX_DOUBLE_UP_AND_DOUBLE_LEFT=188]="BOX_DOUBLE_UP_AND_DOUBLE_LEFT",t[t.BOX_SINGLE_DOWN_AND_SINGLE_LEFT=191]="BOX_SINGLE_DOWN_AND_SINGLE_LEFT",t[t.BOX_SINGLE_UP_AND_SINGLE_RIGHT=192]="BOX_SINGLE_UP_AND_SINGLE_RIGHT",t[t.BOX_SINGLE_HORIZONTAL_AND_SINGLE_UP=193]="BOX_SINGLE_HORIZONTAL_AND_SINGLE_UP",t[t.BOX_SINGLE_HORIZONTAL_AND_SINGLE_DOWN=194]="BOX_SINGLE_HORIZONTAL_AND_SINGLE_DOWN",t[t.BOX_SINGLE_VERTICAL_AND_SINGLE_RIGHT=195]="BOX_SINGLE_VERTICAL_AND_SINGLE_RIGHT",t[t.BOX_SINGLE_HORIZONTAL=196]="BOX_SINGLE_HORIZONTAL",t[t.BOX_SINGLE_VERTICAL_AND_SINGLE_HORIZONTAL=197]="BOX_SINGLE_VERTICAL_AND_SINGLE_HORIZONTAL",t[t.BOX_DOUBLE_UP_AND_DOUBLE_RIGHT=200]="BOX_DOUBLE_UP_AND_DOUBLE_RIGHT",t[t.BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT=201]="BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT",t[t.BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_UP=202]="BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_UP",t[t.BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_DOWN=203]="BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_DOWN",t[t.BOX_DOUBLE_VERTICAL_AND_DOUBLE_RIGHT=204]="BOX_DOUBLE_VERTICAL_AND_DOUBLE_RIGHT",t[t.BOX_DOUBLE_HORIZONTAL=205]="BOX_DOUBLE_HORIZONTAL",t[t.BOX_DOUBLE_VERTICAL_AND_DOUBLE_HORIZONTAL=206]="BOX_DOUBLE_VERTICAL_AND_DOUBLE_HORIZONTAL",t[t.BOX_SINGLE_UP_AND_SINGLE_LEFT=217]="BOX_SINGLE_UP_AND_SINGLE_LEFT",t[t.BOX_SINGLE_DOWN_AND_SINGLE_RIGHT=218]="BOX_SINGLE_DOWN_AND_SINGLE_RIGHT",t[t.BLOCK_FULL=219]="BLOCK_FULL",t[t.BLOCK_BOTTOM_HALF=220]="BLOCK_BOTTOM_HALF",t[t.BLOCK_LEFT_HALF=221]="BLOCK_LEFT_HALF",t[t.BLOCK_RIGHT_HALF=222]="BLOCK_RIGHT_HALF",t[t.BLOCK_TOP_HALF=223]="BLOCK_TOP_HALF",t))(O||{}),H=Object.defineProperty,K=Object.getOwnPropertyDescriptor,M=(t,e,i,s)=>{for(var o=s>1?void 0:s?K(e,i):e,r=t.length-1,n;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&H(e,i,o),o},I=(t=>(t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT",t))(I||{});let w=class{constructor(t,e,i,s,o){this.text=t,this.fg=e,this.bg=i,this.children=s,this.align=o}getWidth(){let t=0;if(this.text)for(const e of this.text.split(`
`))t=Math.max(t,e.length);if(this.children)for(const e of this.children)t=Math.max(t,e.getWidth());return t}getHeight(){let t=0;if(this.text&&(t+=this.text.split(`
`).length),this.children)for(const e of this.children)t+=e.getHeight();return t}};w=M([g],w);function Y(t,e){const i=new RegExp("(\\S(.{0,"+e+"}\\S)?)\\s+","g");return(t+" ").replace(i,`$1
`).trim().split(`
`).map(s=>s.trim())}var W=Object.defineProperty,k=Object.getOwnPropertyDescriptor,y=(t,e,i,s)=>{for(var o=s>1?void 0:s?k(e,i):e,r=t.length-1,n;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&W(e,i,o),o};let x=class{constructor(t,e,i){this.width=t,this.height=e,this.grid=[],this.originX=0,this.originY=0,this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.radius=0;for(let s=0;s<e;s++){const o=[];for(let r=0;r<t;r++)o.push(new v(r,s));this.grid.push(o)}if(this.clear(),i)for(let s=0;s<e;s++)for(let o=0;o<t;o++)this.grid[s][o].blocked=this.grid[s][o].blockedSight=i(o,s)}clear(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++)this.drawChar(e,t,0)}getCell(t,e){if(!(t<0||e<0||t>=this.width||e>=this.height))return this.grid[e][t]}getCharCode(t,e){if(!(t<0||e<0||t>=this.width||e>=this.height))return this.grid[e][t].charCode}drawChar(t,e,i,s,o){this.clip&&!this.clip.contains({x:t,y:e})||t>=0&&t<this.width&&e>=0&&e<this.height&&this.grid[e|0][t|0].setValue(i,s,o)}drawString(t,e,i,s,o){const r=i.split(`
`);for(let n=0;n<r.length;n++)this.drawStringLine(t,e+n,r[n],s,o)}drawStringLine(t,e,i,s,o){for(let r=0;r<i.length;r++)this.drawChar(t+r,e,i.charCodeAt(r),s,o)}drawCenteredString(t,e,i,s,o){this.drawString(t-Math.floor(i.length/2),e,i,s,o)}drawMessage(t,e,i,s){if(i.text){i.align===I.RIGHT?t+=s-i.text.length:i.align===I.CENTER&&(t+=s/2-i.text.length/2);const o=Y(i.text,s||this.width-t);for(const r of o)this.drawStringLine(t,e,r,i.fg,i.bg),e++}if(i.children)for(const o of i.children)e=this.drawMessage(t,e,o,s);return e}drawHLine(t,e,i,s,o,r){for(let n=t;n<t+i;n++)this.drawChar(n,e,s,o,r)}drawVLine(t,e,i,s,o,r){for(let n=e;n<e+i;n++)this.drawChar(t,n,s,o,r)}drawRect(t,e,i,s,o,r,n){this.drawHLine(t,e,i,o,r,n),this.drawHLine(t,e+s-1,i,o,r,n),this.drawVLine(t,e,s,o,r,n),this.drawVLine(t+i-1,e,s,o,r,n)}drawBox(t,e,i,s,o,r,n,_,a,h,u,l,c,A){this.drawHLine(t,e,i,o,c,A),this.drawHLine(t,e+s-1,i,n,c,A),this.drawVLine(t,e,s,_,c,A),this.drawVLine(t+i-1,e,s,r,c,A),this.drawChar(t,e,a,c,A),this.drawChar(t+i-1,e,h,c,A),this.drawChar(t,e+s-1,l,c,A),this.drawChar(t+i-1,e+s-1,u,c,A)}drawSingleBox(t,e,i,s,o,r){this.drawBox(t,e,i,s,O.BOX_SINGLE_HORIZONTAL,O.BOX_SINGLE_VERTICAL,O.BOX_SINGLE_HORIZONTAL,O.BOX_SINGLE_VERTICAL,O.BOX_SINGLE_DOWN_AND_SINGLE_RIGHT,O.BOX_SINGLE_DOWN_AND_SINGLE_LEFT,O.BOX_SINGLE_UP_AND_SINGLE_LEFT,O.BOX_SINGLE_UP_AND_SINGLE_RIGHT,o,r)}drawDoubleBox(t,e,i,s,o,r){this.drawBox(t,e,i,s,O.BOX_DOUBLE_HORIZONTAL,O.BOX_DOUBLE_VERTICAL,O.BOX_DOUBLE_HORIZONTAL,O.BOX_DOUBLE_VERTICAL,O.BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT,O.BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT,O.BOX_DOUBLE_UP_AND_DOUBLE_LEFT,O.BOX_DOUBLE_UP_AND_DOUBLE_RIGHT,o,r)}fillRect(t,e,i,s,o,r,n){for(let _=e;_<e+s;_++)this.drawHLine(t,_,i,o,r,n)}drawConsole(t,e,i,s,o,r,n,_){_=_||m.None;for(let a=0;a<n;a++)for(let h=0;h<r;h++){const u=i.getCell(s+h,o+a);u&&this.drawCell(t+h,e+a,u,_)}}drawCell(t,e,i,s){t>=0&&t<this.width&&e>=0&&e<this.height&&this.grid[e][t].drawCell(i,s)}setBlocked(t,e,i){t>=0&&t<this.width&&e>=0&&e<this.height&&(this.grid[e][t].blocked=i)}setBlockedSight(t,e,i){t>=0&&t<this.width&&e>=0&&e<this.height&&(this.grid[e][t].blockedSight=i)}isVisible(t,e){return t<this.minX||t>this.maxX||e<this.minY||e>this.maxY?!1:this.grid[e][t].visible}isBlocked(t,e){return t<0||t>this.width||e<0||e>this.height?!0:this.grid[e][t].blocked}isBlockedSight(t,e){return t<0||t>this.width||e<0||e>this.height?!0:this.grid[e][t].blockedSight}computeOctantY(t,e){const i=[],s=[];let o=1,r=0,n=0,_=0,a,h,u,l,c,A,R,D,T,B;for(h=this.originY+e;h>=this.minY&&h<=this.maxY;h+=e,n=r,++o)for(u=.5/o,B=-1,l=Math.floor(_*o+.5),a=this.originX+l*t;l<=o&&a>=this.minX&&a<=this.maxX;a+=t,++l,B=T){if(c=!0,A=!1,R=l/o,D=B,T=R+u,n>0){if(!(this.grid[h-e][a].visible&&!this.grid[h-e][a].blockedSight)&&!(this.grid[h-e][a-t].visible&&!this.grid[h-e][a-t].blockedSight))c=!1;else for(let E=0;E<n&&c;++E)if(D<=s[E]&&T>=i[E]){if(this.grid[h][a].blockedSight)if(D>=i[E]&&T<=s[E]){c=!1;break}else i[E]=Math.min(i[E],D),s[E]=Math.max(s[E],T),A=!0;else if(R>i[E]&&R<s[E]){c=!1;break}}}c&&(this.grid[h][a].visible=!0,this.grid[h][a].blockedSight&&(_>=D?_=T:A||(i[r]=D,s[r++]=T)))}}computeOctantX(t,e){const i=[],s=[];let o=1,r=0,n=0,_=0,a,h,u,l,c,A,R,D,T,B;for(a=this.originX+t;a>=this.minX&&a<=this.maxX;a+=t,n=r,++o)for(u=.5/o,B=-1,l=Math.floor(_*o+.5),h=this.originY+l*e;l<=o&&h>=this.minY&&h<=this.maxY;h+=e,++l,B=T){if(c=!0,A=!1,R=l/o,D=B,T=R+u,n>0){if(!(this.grid[h][a-t].visible&&!this.grid[h][a-t].blockedSight)&&!(this.grid[h-e][a-t].visible&&!this.grid[h-e][a-t].blockedSight))c=!1;else for(let E=0;E<n&&c;++E)if(D<=s[E]&&T>=i[E]){if(this.grid[h][a].blockedSight)if(D>=i[E]&&T<=s[E]){c=!1;break}else i[E]=Math.min(i[E],D),s[E]=Math.max(s[E],T),A=!0;else if(R>i[E]&&R<s[E]){c=!1;break}}}c&&(this.grid[h][a].visible=!0,this.grid[h][a].blockedSight&&(_>=D?_=T:A||(i[r]=D,s[r++]=T)))}}computeFov(t,e,i,s,o){if(this.originX=t,this.originY=e,this.radius=i,s)this.minX=Math.min(this.minX,Math.max(0,t-i)),this.minY=Math.min(this.minY,Math.max(0,e-i)),this.maxX=Math.max(this.maxX,Math.min(this.width-1,t+i)),this.maxY=Math.max(this.maxY,Math.min(this.height-1,e+i));else{this.minX=Math.max(0,t-i),this.minY=Math.max(0,e-i),this.maxX=Math.min(this.width-1,t+i),this.maxY=Math.min(this.height-1,e+i);for(let r=this.minY;r<=this.maxY;r++)for(let n=this.minX;n<=this.maxX;n++)this.grid[r][n].visible=!1}this.grid[e][t].visible=!0,o===void 0?(this.computeOctantY(1,1),this.computeOctantX(1,1),this.computeOctantX(1,-1),this.computeOctantY(1,-1),this.computeOctantY(-1,-1),this.computeOctantX(-1,-1),this.computeOctantX(-1,1),this.computeOctantY(-1,1)):(o&1&&this.computeOctantY(1,1),o&2&&this.computeOctantX(1,1),o&4&&this.computeOctantX(1,-1),o&8&&this.computeOctantY(1,-1),o&16&&this.computeOctantY(-1,-1),o&32&&this.computeOctantX(-1,-1),o&64&&this.computeOctantX(-1,1),o&128&&this.computeOctantY(-1,1))}updateExplored(){for(let t=this.minY;t<=this.maxY;t++)for(let e=this.minX;e<=this.maxX;e++){const i=this.grid[t][e];i.explored=i.explored||i.visible}}};x=y([g],x);class z{constructor(e,i,s,o){this.url=e,this.charWidth=i,this.charHeight=s,this.scale=o||1}}const Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQMAAAD58POIAAAABlBMVEUAAAD///+l2Z/dAAAEhklEQVRIx42Sv4oUQRDGC4UzadSwwMUD8QEKlbWD4Q58B/NGpTVocKO1wXHUzMAH0AcwMTYVGg5ag0IzEXaRjdZEZKNzkKbHqtnzHypY09M9+5uvqr7pbYCuC6ftaRhgONXs30eAh0O1rYDm4IS/eH0B8GxRW2vxo396yu/fb0ZFrW1zcOXlPU/XPwK8PGjbWhVwM4KnH61912oK4+zmmHJaQotyt1kvtC2Atdo24iohPDiG/v4eICJsY3Wy8Yvr0DSIBOdxgH6v8wsriWhc8s0AtaK/GzSl1jR0nSjQnwki6FQxNFKjgzO2a7BBqucH7dL4M9z96CIhT1Fs/AgKgcA6dKCxI29DaHNwRJ4EGAU1sU0OG9rmE4SIc3A4FChACqqhJRwpxkqh9wxag4DSmEJ5DtpFwAP4GUf6lmKcFFti1BYuQp4xN8kxM2kNhjdkTOiTUeAKGvhA1rLpMbYACQzCITlTDRMbLYoEa2JWPSMRFZIupcSzMVKcEUkX+sOG+ChNX2vD8ex6k7OFHL0P1655JuPd53WAD+yTv3UrCQiuHmYBbfIxpkImuvpBQBkVb5g4XHv3JkNireG8AO9zDhBZu2z2OMZ11S5/RIlyMefMNaZ4GsCz5xcjyM6hHYEjAYEfO8Ig1rklAe9sRIeYAdwyoIBq6YIzCAKiWoifA3m3o2AzWcdYKOdY47EIf8QABCuYgIUVmdVMEYEDA0Hmo/3D6KKJbh5mxhP3UsWIE97wnEygyizOfOLi2JOJW8CeOblW9IHeKZgv4zxuzDryOmb+4aQH+MXV6e0ywdUcxqCjBWl5GpbzZduOG1QEiGXP86T7EfiJfkMQ4OO4H0yqyNC2zlziWEN7Ywuc2fQ4p5BNkS5QYXP2h5NtRJh0vCKQidtVJmCGAwDSSQpYggSxiRIyzewsgCh4xxiTPDMh5aj//l7btqkr6rQyIOtLji4lVRQwXdzvus40Y53M33fh50GZwF4ExQeMlvuTggLzSi4ElKczUO7zVtpwdyMKdqZKOWb2nDblawPxPmuMwFEWBW+jlZR1eYtS442kiBGMWCi/h1/+GAR6NYOJWiqNJXFygFtrkx5C0O3IeFGs67HhEEhmBu/BUOT+0551pXxYIF+Elpi5AKRkLl5GUbCCZddyMv621ujEBPP4vSy2fotTx3U+d3WBiFOA6VSGSB49v/M7GBX9FPrDaT2c9qr4PCpwZ7qz813R94dVFIe19v33GlMZUghQFb8BrfE7QBmgBMbrn2B3enn/y3B5+DL8UBAdnejdYdBxeV9ejwoYNTgW0Ok/gA7UG2GAzanhL0DG7q4svynwF8UwDPu7u/vD0IudzSltMtVbP+J/gUbR29oJ7Fg9s6Uy+DnpiTCOYc4cXOeXMWfsusSw7FOg9x655nax6BlecwpOQQ68WBwp+H2LMQTuOq2RUigzh2Q/R3CWARJIJG199EwOTyKBlQMznshCRGeQ5gHABAQl6M4gLEdAzVaBWMCiANdsayDCHBA/hagKYfielrJIlipKKQIA9Nf3wBloTHT6BuAx15zRNa1nAAAAAElFTkSuQmCC",S=new z(Q,8,8);var Z=Object.defineProperty,j=Object.getOwnPropertyDescriptor,q=(t,e,i,s)=>{for(var o=s>1?void 0:s?j(e,i):e,r=t.length-1,n;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&Z(e,i,o),o};let f=class{constructor(t,e){this.x=t,this.y=e}};f=q([g],f);var J=Object.defineProperty,$=Object.getOwnPropertyDescriptor,tt=(t,e,i,s)=>{for(var o=s>1?void 0:s?$(e,i):e,r=t.length-1,n;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&J(e,i,o),o};let N=class{constructor(t,e,i,s){this.x=this.left=t,this.y=this.top=e,this.width=i,this.height=s,this.x2=t+i,this.y2=e+s}getCenter(){return new f(this.x+this.width/2|0,this.y+this.height/2|0)}intersects(t){return this.x<=t.x2&&this.x2>=t.x&&this.y<=t.y2&&this.y2>=t.y}contains(t){return t.x>=this.x&&t.x<this.x2&&t.y>=this.y&&t.y<this.y2}};N=tt([g],N);const et=200,it=1e3/15;class rt{constructor(){this.down=!1,this.downTime=0,this.repeat=!1,this.repeatTime=0,this.downCount=0,this.upCount=100}setDown(e){this.down!==e&&(this.down=e,this.repeat=!1,this.downTime=this.repeatTime=performance.now())}update(e){this.repeat=!1,this.down?(this.downCount++,this.upCount=0,e-this.downTime>=et&&e-this.repeatTime>=it&&(this.repeat=!0,this.repeatTime=e)):(this.downCount=0,this.upCount++)}isPressed(){return this.downCount===1||this.repeat}isClicked(){return this.upCount===1}}class V{constructor(){this.inputs=new Map}clear(){this.inputs.clear()}get(e){let i=this.inputs.get(e);return i||(i=new rt,this.inputs.set(e,i)),i}updateAll(e){this.inputs.forEach(i=>i.update(e))}}class st{constructor(e){this.keys=new V,e.addEventListener("keydown",i=>this.setKey(i,!0)),e.addEventListener("keyup",i=>this.setKey(i,!1))}clear(){this.keys.clear()}getKey(e){return this.keys.get(e)}setKey(e,i){const s=e.code;s!=="F11"&&(e.stopPropagation(),e.preventDefault(),this.keys.get(s).setDown(i))}updateKeys(e){this.keys.updateAll(e)}}var d=(t=>(t.VK_BACKSPACE="Backspace",t.VK_TAB="Tab",t.VK_ENTER="Enter",t.VK_SHIFT_LEFT="ShiftLeft",t.VK_SHIFT_RIGHT="ShiftRight",t.VK_CONTROL_LEFT="ControlLeft",t.VK_CONTROL_RIGHT="ControlRight",t.VK_ALT_LEFT="AltLeft",t.VK_ALT_RIGHT="AltRight",t.VK_PAUSE="Pause",t.VK_CAPS_LOCK="CapsLock",t.VK_ESCAPE="Escape",t.VK_SPACE="Space",t.VK_PAGE_UP="PageUp",t.VK_PAGE_DOWN="PageDown",t.VK_END="End",t.VK_HOME="Home",t.VK_LEFT="ArrowLeft",t.VK_UP="ArrowUp",t.VK_RIGHT="ArrowRight",t.VK_DOWN="ArrowDown",t.VK_INSERT="Insert",t.VK_DELETE="Delete",t.VK_0="Digit0",t.VK_1="Digit1",t.VK_2="Digit2",t.VK_3="Digit3",t.VK_4="Digit4",t.VK_5="Digit5",t.VK_6="Digit6",t.VK_7="Digit7",t.VK_8="Digit8",t.VK_9="Digit9",t.VK_SEMICOLON="Semicolon",t.VK_EQUALS="Equal",t.VK_A="KeyA",t.VK_B="KeyB",t.VK_C="KeyC",t.VK_D="KeyD",t.VK_E="KeyE",t.VK_F="KeyF",t.VK_G="KeyG",t.VK_H="KeyH",t.VK_I="KeyI",t.VK_J="KeyJ",t.VK_K="KeyK",t.VK_L="KeyL",t.VK_M="KeyM",t.VK_N="KeyN",t.VK_O="KeyO",t.VK_P="KeyP",t.VK_Q="KeyQ",t.VK_R="KeyR",t.VK_S="KeyS",t.VK_T="KeyT",t.VK_U="KeyU",t.VK_V="KeyV",t.VK_W="KeyW",t.VK_X="KeyX",t.VK_Y="KeyY",t.VK_Z="KeyZ",t.VK_CONTEXT_MENU="ContextMenu",t.VK_NUMPAD0="Numpad0",t.VK_NUMPAD1="Numpad1",t.VK_NUMPAD2="Numpad2",t.VK_NUMPAD3="Numpad3",t.VK_NUMPAD4="Numpad4",t.VK_NUMPAD5="Numpad5",t.VK_NUMPAD6="Numpad6",t.VK_NUMPAD7="Numpad7",t.VK_NUMPAD8="Numpad8",t.VK_NUMPAD9="Numpad9",t.VK_NUMPAD_ENTER="NumpadEnter",t.VK_MULTIPLY="NumpadMultiply",t.VK_ADD="NumpadAdd",t.VK_SEPARATOR="NumpadSeparator",t.VK_SUBTRACT="NumpadSubtract",t.VK_DECIMAL="NumpadDecimal",t.VK_DIVIDE="NumpadDivide",t.VK_F1="F1",t.VK_F2="F2",t.VK_F3="F3",t.VK_F4="F4",t.VK_F5="F5",t.VK_F6="F6",t.VK_F7="F7",t.VK_F8="F8",t.VK_F9="F9",t.VK_F10="F10",t.VK_F11="F11",t.VK_F12="F12",t.VK_F13="F13",t.VK_F14="F14",t.VK_F15="F15",t.VK_F16="F16",t.VK_F17="F17",t.VK_F18="F18",t.VK_F19="F19",t.VK_F20="F20",t.VK_F21="F21",t.VK_F22="F22",t.VK_F23="F23",t.VK_F24="F24",t.VK_NUM_LOCK="NumLock",t.VK_SCROLL_LOCK="ScrollLock",t.VK_COMMA="Comma",t.VK_PERIOD="Period",t.VK_SLASH="Slash",t.VK_BACKQUOTE="Backquote",t.VK_OPEN_BRACKET="BracketLeft",t.VK_BACK_SLASH="Backslash",t.VK_CLOSE_BRACKET="BracketRight",t.VK_QUOTE="Quote",t.VK_META="OSLeft",t))(d||{});class ot{constructor(e){this.buttons=new V,this.el=e.canvas,this.width=e.width,this.height=e.height,this.prevX=0,this.prevY=0,this.x=0,this.y=0,this.dx=0,this.dy=0,this.wheelDeltaX=0,this.wheelDeltaY=0;const i=this.el;i.addEventListener("mousedown",s=>this.handleEvent(s)),i.addEventListener("mouseup",s=>this.handleEvent(s)),i.addEventListener("mousemove",s=>this.handleEvent(s)),i.addEventListener("contextmenu",s=>this.handleEvent(s)),i.addEventListener("touchstart",s=>this.handleTouchEvent(s)),i.addEventListener("touchend",s=>this.handleTouchEvent(s)),i.addEventListener("touchcancel",s=>this.handleTouchEvent(s)),i.addEventListener("touchmove",s=>this.handleTouchEvent(s)),i.addEventListener("wheel",s=>this.handleWheelEvent(s))}handleTouchEvent(e){if(e.stopPropagation(),e.preventDefault(),e.touches.length>0){const i=e.touches[0];this.updatePosition(i.clientX,i.clientY),this.buttons.get(0).setDown(!0)}else this.buttons.get(0).setDown(!1)}handleEvent(e){e.stopPropagation(),e.preventDefault(),this.updatePosition(e.clientX,e.clientY),e.type==="mousedown"&&(this.buttons.get(e.button).setDown(!0),this.el.focus()),e.type==="mouseup"&&this.buttons.get(e.button).setDown(!1)}handleWheelEvent(e){e.stopPropagation(),e.preventDefault(),this.wheelDeltaX=e.deltaX,this.wheelDeltaY=e.deltaY}updatePosition(e,i){let s=this.el.getBoundingClientRect();const o=this.width/this.height,r=s.width/s.height;if(r-o>.01){const n=o*s.height,_=s.width-n;s=new N(Math.floor(_/2),0,n,s.height)}if(r-o<-.01){const n=s.width/o,_=s.height-n;s=new N(0,Math.floor(_/2),s.width,n)}this.x=this.width*(e-s.left)/s.width|0,this.y=this.height*(i-s.top)/s.height|0}update(e){this.dx=this.x-this.prevX,this.dy=this.y-this.prevY,this.prevX=this.x,this.prevY=this.y,this.buttons.updateAll(e)}}const nt=`#version 300 es
precision highp float;in vec2 a;in vec2 b;in vec3 c;in vec3 d;out vec2 e;out vec4 f;out vec4 g;void main(void){gl_Position=vec4(a.x,a.y,0,1);e=b/16.0;f=vec4(c.r,c.g,c.b,1);g=vec4(d.r,d.g,d.b,1);}`,ht=`#version 300 es
precision highp float;in vec2 e;in vec4 f;in vec4 g;uniform sampler2D s;out vec4 o;void main(void){o=texture(s,e);if(o.r<0.1) {o=g;} else {o=f;}}`,at=`#version 300 es
precision highp float;
in vec2 a_position;
in vec2 a_texCoord;
out vec2 v_texCoord;
void main(void) {
  gl_Position=vec4(a_position.x, a_position.y, 0.0, 1.0);
  v_texCoord = a_texCoord;
}`,_t=`#version 300 es
#define PI 3.1415926535897932384626433832795
precision highp float;
in vec2 v_texCoord;
uniform sampler2D u_texture;
uniform float u_blur;
uniform float u_curvature;
uniform float u_chroma;
uniform float u_scanlineWidth;
uniform float u_scanlineIntensity;
uniform float u_vignette;
out vec4 outputColor;

vec2 curve(vec2 uv) {
  uv = (uv - 0.5) * 2.0;
  uv *= 1.1;
  uv.x *= 1.0 + pow((abs(uv.y) * u_curvature), 2.0);
  uv.y *= 1.0 + pow((abs(uv.x) * u_curvature), 2.0);
  uv /= 1.1;
  uv = (uv / 2.0) + 0.5;
  return uv;
}

void main() {
  vec2 iResolution = vec2(640.0, 360.0);
  vec2 q = v_texCoord;
  vec2 fragCoord = v_texCoord;
  vec2 uv = q;
  uv = curve(uv);

  // Outside of range is black
  if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
    outputColor = vec4(0.0, 0.0, 0.0, 1.0);
    return;
  }

  vec4 col;

  // Chromatic aberration
  // col = texture(u_texture, uv.xy);
  col.r = 0.7 * texture(u_texture, vec2(uv.x + 0.001 * u_chroma, uv.y + 0.001 * u_chroma)).r;
  col.g = 0.7 * texture(u_texture, vec2(uv.x + 0.000 * u_chroma, uv.y - 0.002 * u_chroma)).g;
  col.b = 0.7 * texture(u_texture, vec2(uv.x - 0.002 * u_chroma, uv.y + 0.000 * u_chroma)).b;
  
  // Blur
  col += 0.05 * texture(u_texture, vec2(uv.x - 2.0 * u_blur / iResolution.x, uv.y));
  col += 0.10 * texture(u_texture, vec2(uv.x - 1.0 * u_blur / iResolution.x, uv.y));
  col += 0.10 * texture(u_texture, vec2(uv.x + 1.0 * u_blur / iResolution.x, uv.y));
  col += 0.05 * texture(u_texture, vec2(uv.x + 2.0 * u_blur / iResolution.x, uv.y));

  // Vignette
  col *= pow(16.0 * uv.x * uv.y * (1.0 - uv.x) * (1.0 - uv.y), u_vignette);

  // Scanlines
  col *= clamp(1.0 + u_scanlineWidth * sin(uv.y * iResolution.y * 2.0 * PI), 1.0 - u_scanlineIntensity, 1.0);

  outputColor = vec4(col.rgb, 1.0);
}`;function p(t,e){return-1+2*(t/e)}const F={font:S,movementKeys:{[d.VK_K]:new f(0,-1),[d.VK_UP]:new f(0,-1),[d.VK_NUMPAD8]:new f(0,-1),[d.VK_J]:new f(0,1),[d.VK_DOWN]:new f(0,1),[d.VK_NUMPAD2]:new f(0,1),[d.VK_H]:new f(-1,0),[d.VK_LEFT]:new f(-1,0),[d.VK_NUMPAD4]:new f(-1,0),[d.VK_L]:new f(1,0),[d.VK_RIGHT]:new f(1,0),[d.VK_NUMPAD6]:new f(1,0),[d.VK_Y]:new f(-1,-1),[d.VK_NUMPAD7]:new f(-1,-1),[d.VK_U]:new f(1,-1),[d.VK_NUMPAD9]:new f(1,-1),[d.VK_B]:new f(-1,1),[d.VK_NUMPAD1]:new f(-1,1),[d.VK_N]:new f(1,1),[d.VK_NUMPAD3]:new f(1,1),[d.VK_PERIOD]:new f(0,0),[d.VK_NUMPAD5]:new f(0,0)}};class ct extends x{constructor(e,i,s,o){var l;super(i,s),o=o||F,this.canvas=e,this.font=o.font||S,this.crt=o.crt,this.maxFps=o.maxFps,this.pixelWidth=i*this.font.charWidth,this.pixelHeight=s*this.font.charHeight,this.pixelScale=((l=o.crt)==null?void 0:l.scale)||1,e.width=this.pixelWidth*this.pixelScale,e.height=this.pixelHeight*this.pixelScale,e.style.imageRendering="pixelated",e.style.outline="none",e.tabIndex=0,this.handleResize(),window.addEventListener("resize",()=>this.handleResize()),this.keys=new st(e),this.mouse=new ot(this);const r=e.getContext("webgl2",{antialias:!1});if(!r)throw new Error("Unable to initialize WebGL. Your browser may not support it.");const n=r.createProgram();if(!n)throw new Error("Unable to initialize WebGL. Your browser may not support it.");this.gl=r,this.program=n,r.attachShader(n,this.buildShader(r.VERTEX_SHADER,nt)),r.attachShader(n,this.buildShader(r.FRAGMENT_SHADER,ht)),r.linkProgram(n),r.useProgram(n),this.crtProgram=r.createProgram(),r.attachShader(this.crtProgram,this.buildShader(r.VERTEX_SHADER,at)),r.attachShader(this.crtProgram,this.buildShader(r.FRAGMENT_SHADER,_t)),r.linkProgram(this.crtProgram),r.useProgram(this.crtProgram),this.crtBlurLocation=r.getUniformLocation(this.crtProgram,"u_blur"),this.crtCurvatureLocation=r.getUniformLocation(this.crtProgram,"u_curvature"),this.crtChromaLocation=r.getUniformLocation(this.crtProgram,"u_chroma"),this.crtScanlineWidthLocation=r.getUniformLocation(this.crtProgram,"u_scanlineWidth"),this.crtScanlineIntensityLocation=r.getUniformLocation(this.crtProgram,"u_scanlineIntensity"),this.crtVignetteLocation=r.getUniformLocation(this.crtProgram,"u_vignette"),this.crtPositionLocation=r.getAttribLocation(this.crtProgram,"a_position"),this.crtPositionBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.crtPositionBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(this.crtPositionLocation),r.vertexAttribPointer(this.crtPositionLocation,2,r.FLOAT,!1,0,0),this.crtTexCoordLocation=r.getAttribLocation(this.crtProgram,"a_texCoord"),this.crtTexCoordBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.crtTexCoordBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(this.crtTexCoordLocation),r.vertexAttribPointer(this.crtTexCoordLocation,2,r.FLOAT,!1,0,0),this.positionAttribLocation=this.getAttribLocation("a"),this.textureAttribLocation=this.getAttribLocation("b"),this.fgColorAttribLocation=this.getAttribLocation("c"),this.bgColorAttribLocation=this.getAttribLocation("d");const _=i*s;this.positionsArray=new Float32Array(_*3*4),this.indexArray=new Uint16Array(_*6),this.textureArray=new Float32Array(_*2*4),this.foregroundUint8Array=new Uint8Array(_*4*4),this.foregroundDataView=new DataView(this.foregroundUint8Array.buffer),this.backgroundUint8Array=new Uint8Array(_*4*4),this.backgroundDataView=new DataView(this.backgroundUint8Array.buffer),this.frameBufferTexture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.frameBufferTexture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.pixelWidth,this.pixelHeight,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),this.frameBuffer=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,this.frameBuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.frameBufferTexture,0);let a=0,h=0,u=0;for(let c=0;c<s;c++)for(let A=0;A<i;A++)this.positionsArray[a++]=p(A,i),this.positionsArray[a++]=-p(c,s),this.positionsArray[a++]=p(A+1,i),this.positionsArray[a++]=-p(c,s),this.positionsArray[a++]=p(A+1,i),this.positionsArray[a++]=-p(c+1,s),this.positionsArray[a++]=p(A,i),this.positionsArray[a++]=-p(c+1,s),this.indexArray[h++]=u+0,this.indexArray[h++]=u+1,this.indexArray[h++]=u+2,this.indexArray[h++]=u+0,this.indexArray[h++]=u+2,this.indexArray[h++]=u+3,u+=4;this.positionBuffer=r.createBuffer(),this.indexBuffer=r.createBuffer(),this.textureBuffer=r.createBuffer(),this.foregroundBuffer=r.createBuffer(),this.backgroundBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.positionBuffer),r.bufferData(r.ARRAY_BUFFER,this.positionsArray,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,this.indexArray,r.STATIC_DRAW),this.texture=this.loadTexture(this.font.url),this.lastRenderTime=0,this.renderDelta=0,this.fps=0,this.averageFps=0,this.maxFps===void 0?this.requestAnimationFrame():window.setInterval(()=>this.renderLoop(performance.now()),1e3/this.maxFps)}handleResize(){const e=this.canvas.parentElement;if(!e)return;const i=e.offsetWidth/this.pixelWidth,s=e.offsetHeight/this.pixelHeight,o=Math.min(i,s),r=o*this.pixelWidth|0,n=o*this.pixelHeight|0;this.canvas.style.width=r+"px",this.canvas.style.height=n+"px"}getAttribLocation(e){const i=this.gl.getAttribLocation(this.program,e);return this.gl.enableVertexAttribArray(i),i}flush(){let e=0,i=0;for(let s=0;s<this.height;s++)for(let o=0;o<this.width;o++){const r=this.getCell(o,s);if(!r.dirty){e+=8,i+=16;continue}const n=r.charCode%16,_=r.charCode/16|0;this.textureArray[e++]=n,this.textureArray[e++]=_,this.textureArray[e++]=n+1,this.textureArray[e++]=_,this.textureArray[e++]=n+1,this.textureArray[e++]=_+1,this.textureArray[e++]=n,this.textureArray[e++]=_+1;for(let a=0;a<4;a++)this.foregroundDataView.setUint32(i,r.fg,!1),this.backgroundDataView.setUint32(i,r.bg,!1),i+=4;r.dirty=!1}}isKeyDown(e){return this.keys.getKey(e).down}isKeyPressed(e){return this.keys.getKey(e).isPressed()}getKeyDownCount(e){return this.keys.getKey(e).downCount}getMovementKey(e=F.movementKeys){for(const i in e)if(this.isKeyPressed(i))return e[i]}buildShader(e,i){const s=this.gl,o=s.createShader(e);if(!o)throw new Error("An error occurred compiling the shader: ");if(s.shaderSource(o,i),s.compileShader(o),!s.getShaderParameter(o,s.COMPILE_STATUS))throw new Error("An error occurred compiling the shader: "+s.getShaderInfoLog(o));return o}loadTexture(e){const i=this.gl,s=i.createTexture();i.bindTexture(i.TEXTURE_2D,s);const o=0,r=i.RGBA,n=1,_=1,a=0,h=i.RGBA,u=i.UNSIGNED_BYTE,l=new Uint8Array([0,0,0,255]);i.texImage2D(i.TEXTURE_2D,o,r,n,_,a,h,u,l);const c=new Image;return c.onload=()=>{i.bindTexture(i.TEXTURE_2D,s),i.texImage2D(i.TEXTURE_2D,o,r,h,u,c),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR)},c.src=e,s}render(){const e=this.gl;e.clearColor(0,0,0,1),e.clearDepth(1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.crt?e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer):e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,this.pixelWidth,this.pixelHeight);{const s=e.FLOAT,o=!1,r=0,n=0;e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.vertexAttribPointer(this.positionAttribLocation,2,s,o,r,n)}{const s=e.FLOAT,o=!1,r=0,n=0;e.bindBuffer(e.ARRAY_BUFFER,this.textureBuffer),e.bufferData(e.ARRAY_BUFFER,this.textureArray,e.DYNAMIC_DRAW),e.vertexAttribPointer(this.textureAttribLocation,2,s,o,r,n)}{const s=e.UNSIGNED_BYTE,o=!0,r=0,n=0;e.bindBuffer(e.ARRAY_BUFFER,this.foregroundBuffer),e.bufferData(e.ARRAY_BUFFER,this.foregroundUint8Array,e.DYNAMIC_DRAW),e.vertexAttribPointer(this.fgColorAttribLocation,4,s,o,r,n)}{const s=e.UNSIGNED_BYTE,o=!0,r=0,n=0;e.bindBuffer(e.ARRAY_BUFFER,this.backgroundBuffer),e.bufferData(e.ARRAY_BUFFER,this.backgroundUint8Array,e.DYNAMIC_DRAW),e.vertexAttribPointer(this.bgColorAttribLocation,4,s,o,r,n)}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.useProgram(this.program),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture);{const i=this.width*this.height*6,s=e.UNSIGNED_SHORT,o=0;e.drawElements(e.TRIANGLES,i,s,o)}}renderCrt(){const e=this.crt;if(!e)return;const i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,this.pixelWidth*this.pixelScale,this.pixelHeight*this.pixelScale),i.useProgram(this.crtProgram),i.uniform1f(this.crtBlurLocation,e.blur),i.uniform1f(this.crtCurvatureLocation,e.curvature),i.uniform1f(this.crtChromaLocation,e.chroma),i.uniform1f(this.crtVignetteLocation,e.vignette),i.uniform1f(this.crtScanlineWidthLocation,e.scanlineWidth),i.uniform1f(this.crtScanlineIntensityLocation,e.scanlineIntensity),i.bindBuffer(i.ARRAY_BUFFER,this.crtPositionBuffer),i.vertexAttribPointer(this.crtPositionLocation,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.crtTexCoordBuffer),i.vertexAttribPointer(this.crtTexCoordLocation,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.frameBufferTexture),i.drawArrays(i.TRIANGLES,0,6)}requestAnimationFrame(){window.requestAnimationFrame(e=>this.renderLoop(e))}renderLoop(e){this.lastRenderTime===0?(this.lastRenderTime=e,this.fps=0):(this.renderDelta=e-this.lastRenderTime,this.lastRenderTime=e,this.fps=1e3/this.renderDelta,this.averageFps=.95*this.averageFps+.05*this.fps),this.keys.updateKeys(e),this.mouse.update(e),this.update&&this.update(),this.flush(),this.render(),this.crt&&this.renderCrt(),this.maxFps===void 0&&this.requestAnimationFrame()}}export{m as B,U as C,z as F,d as K,w as M,f as P,N as R,ct as T,x as a,O as b,I as c,ut as d,L as f,g as s};
