import"../modulepreload-polyfill-3cfb730f.js";/* empty css                */var F=Object.defineProperty,b=Object.getOwnPropertyDescriptor,N=(t,e,r,s)=>{for(var i=s>1?void 0:s?b(e,r):e,h=t.length-1,n;h>=0;h--)(n=t[h])&&(i=(s?n(e,r,i):n(i))||i);return s&&i&&F(e,r,i),i},V=(t=>(t[t.None=0]="None",t[t.Blend=1]="Blend",t[t.Add=2]="Add",t))(V||{});function o(t,e,r,s){return s===void 0&&(s=255),(t<<24)+(e<<16)+(r<<8)+s}var B={BLACK:o(0,0,0),WHITE:o(255,255,255),LIGHT_GRAY:o(170,170,170),DARK_GRAY:o(85,85,85),YELLOW:o(255,255,85),BROWN:o(170,85,0),LIGHT_RED:o(255,85,85),DARK_RED:o(170,0,0),LIGHT_GREEN:o(85,255,85),DARK_GREEN:o(0,170,0),LIGHT_CYAN:o(85,255,255),DARK_CYAN:o(0,170,170),LIGHT_BLUE:o(85,85,255),DARK_BLUE:o(0,0,170),LIGHT_MAGENTA:o(255,85,255),DARK_MAGENTA:o(170,0,170),ORANGE:o(255,136,0)},H=new Map;function m(t){H.set(t.name,t)}function G(t){return typeof t=="string"&&t.length>0?t.charCodeAt(0):t}var x=class{constructor(t,e,r,s,i){this.x=t,this.y=e,r!==void 0?this.charCode=G(r):this.charCode=" ".charCodeAt(0),s!==void 0?this.fg=s:this.fg=B.WHITE,i!==void 0?this.bg=i:this.bg=B.BLACK,this.dirty=!0,this.blocked=!1,this.blockedSight=!1,this.explored=!1,this.visible=!1,this.pathId=-1,this.g=0,this.h=0,this.prev=null}setCharCode(t){this.charCode!==t&&(this.charCode=t,this.dirty=!0)}setForeground(t){t!=null&&t!==this.fg&&(this.fg=t,this.dirty=!0)}setBackground(t){t!=null&&t!==this.bg&&(this.bg=t,this.dirty=!0)}setValue(t,e,r){return typeof t=="string"&&(t=t.charCodeAt(0)),typeof t=="number"?(this.setCharCode(t),e!==void 0&&this.setForeground(e),r!==void 0&&this.setBackground(r)):this.drawCell(t,0),this.dirty}drawCell(t,e){let r=t.bg&255;e===0||t.charCode>0?(this.setCharCode(t.charCode),this.setForeground(t.fg)):r>0&&r<255&&this.setForeground(this.blendColors(this.fg,t.bg,e)),e===0||r===255?this.setBackground(t.bg):r>0&&this.setBackground(this.blendColors(this.bg,t.bg,e))}blendColors(t,e,r){let s=(255-(e&255))/255,i=1-s,h=t>>24&255,n=t>>16&255,u=t>>8&255,_=e>>24&255,a=e>>16&255,c=e>>8&255;switch(r){case 1:return o(s*h+i*_|0,s*n+i*a|0,s*u+i*c|0);case 2:return o(this.clamp(h+i*_|0),this.clamp(n+i*a|0),this.clamp(u+i*c|0));default:return e}}clamp(t){return Math.min(255,t)}};x=N([m],x);var P=(t=>(t[t.SMILEY=1]="SMILEY",t[t.INVERSE_SMILEY=2]="INVERSE_SMILEY",t[t.HEART=3]="HEART",t[t.DIAMOND=4]="DIAMOND",t[t.CLUB=5]="CLUB",t[t.SPADE=6]="SPADE",t[t.BULLET=7]="BULLET",t[t.INVERSE_BULLET=8]="INVERSE_BULLET",t[t.LIGHT_SHADE=176]="LIGHT_SHADE",t[t.MEDIUM_SHADE=177]="MEDIUM_SHADE",t[t.DARK_SHADE=178]="DARK_SHADE",t[t.BOX_SINGLE_VERTICAL=179]="BOX_SINGLE_VERTICAL",t[t.BOX_SINGLE_VERTICAL_AND_SINGLE_LEFT=180]="BOX_SINGLE_VERTICAL_AND_SINGLE_LEFT",t[t.BOX_DOUBLE_VERTICAL_AND_DOUBLE_LEFT=185]="BOX_DOUBLE_VERTICAL_AND_DOUBLE_LEFT",t[t.BOX_DOUBLE_VERTICAL=186]="BOX_DOUBLE_VERTICAL",t[t.BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT=187]="BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT",t[t.BOX_DOUBLE_UP_AND_DOUBLE_LEFT=188]="BOX_DOUBLE_UP_AND_DOUBLE_LEFT",t[t.BOX_SINGLE_DOWN_AND_SINGLE_LEFT=191]="BOX_SINGLE_DOWN_AND_SINGLE_LEFT",t[t.BOX_SINGLE_UP_AND_SINGLE_RIGHT=192]="BOX_SINGLE_UP_AND_SINGLE_RIGHT",t[t.BOX_SINGLE_HORIZONTAL_AND_SINGLE_UP=193]="BOX_SINGLE_HORIZONTAL_AND_SINGLE_UP",t[t.BOX_SINGLE_HORIZONTAL_AND_SINGLE_DOWN=194]="BOX_SINGLE_HORIZONTAL_AND_SINGLE_DOWN",t[t.BOX_SINGLE_VERTICAL_AND_SINGLE_RIGHT=195]="BOX_SINGLE_VERTICAL_AND_SINGLE_RIGHT",t[t.BOX_SINGLE_HORIZONTAL=196]="BOX_SINGLE_HORIZONTAL",t[t.BOX_SINGLE_VERTICAL_AND_SINGLE_HORIZONTAL=197]="BOX_SINGLE_VERTICAL_AND_SINGLE_HORIZONTAL",t[t.BOX_DOUBLE_UP_AND_DOUBLE_RIGHT=200]="BOX_DOUBLE_UP_AND_DOUBLE_RIGHT",t[t.BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT=201]="BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT",t[t.BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_UP=202]="BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_UP",t[t.BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_DOWN=203]="BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_DOWN",t[t.BOX_DOUBLE_VERTICAL_AND_DOUBLE_RIGHT=204]="BOX_DOUBLE_VERTICAL_AND_DOUBLE_RIGHT",t[t.BOX_DOUBLE_HORIZONTAL=205]="BOX_DOUBLE_HORIZONTAL",t[t.BOX_DOUBLE_VERTICAL_AND_DOUBLE_HORIZONTAL=206]="BOX_DOUBLE_VERTICAL_AND_DOUBLE_HORIZONTAL",t[t.BOX_SINGLE_UP_AND_SINGLE_LEFT=217]="BOX_SINGLE_UP_AND_SINGLE_LEFT",t[t.BOX_SINGLE_DOWN_AND_SINGLE_RIGHT=218]="BOX_SINGLE_DOWN_AND_SINGLE_RIGHT",t[t.BLOCK_FULL=219]="BLOCK_FULL",t[t.BLOCK_BOTTOM_HALF=220]="BLOCK_BOTTOM_HALF",t[t.BLOCK_LEFT_HALF=221]="BLOCK_LEFT_HALF",t[t.BLOCK_RIGHT_HALF=222]="BLOCK_RIGHT_HALF",t[t.BLOCK_TOP_HALF=223]="BLOCK_TOP_HALF",t))(P||{}),X=(t=>(t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT",t))(X||{}),U=class{constructor(t,e,r,s,i){this.text=t,this.fg=e,this.bg=r,this.children=s,this.align=i}getWidth(){let t=0;if(this.text)for(let e of this.text.split(`
`))t=Math.max(t,e.length);if(this.children)for(let e of this.children)t=Math.max(t,e.getWidth());return t}getHeight(){let t=0;if(this.text&&(t+=this.text.split(`
`).length),this.children)for(let e of this.children)t+=e.getHeight();return t}};U=N([m],U);function M(t,e){let r=new RegExp("(\\S(.{0,"+e+"}\\S)?)\\s+","g");return(t+" ").replace(r,`$1
`).trim().split(`
`).map(s=>s.trim())}var K=class{constructor(t,e,r){this.width=t,this.height=e,this.grid=[],this.originX=0,this.originY=0,this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.radius=0;for(let s=0;s<e;s++){let i=[];for(let h=0;h<t;h++)i.push(new x(h,s));this.grid.push(i)}if(this.clear(),r)for(let s=0;s<e;s++)for(let i=0;i<t;i++)this.grid[s][i].blocked=this.grid[s][i].blockedSight=r(i,s)}clear(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++)this.drawChar(e,t,0)}getCell(t,e){if(!(t<0||e<0||t>=this.width||e>=this.height))return this.grid[e][t]}getCharCode(t,e){if(!(t<0||e<0||t>=this.width||e>=this.height))return this.grid[e][t].charCode}drawChar(t,e,r,s,i){this.clip&&!this.clip.contains({x:t,y:e})||t>=0&&t<this.width&&e>=0&&e<this.height&&this.grid[e|0][t|0].setValue(r,s,i)}drawString(t,e,r,s,i){let h=r.split(`
`);for(let n=0;n<h.length;n++)this.drawStringLine(t,e+n,h[n],s,i)}drawStringLine(t,e,r,s,i){for(let h=0;h<r.length;h++)this.drawChar(t+h,e,r.charCodeAt(h),s,i)}drawCenteredString(t,e,r,s,i){this.drawString(t-Math.floor(r.length/2),e,r,s,i)}drawMessage(t,e,r,s){if(r.text){r.align===2?t+=s-r.text.length:r.align===1&&(t+=s/2-r.text.length/2);let i=M(r.text,s||this.width-t);for(let h of i)this.drawStringLine(t,e,h,r.fg,r.bg),e++}if(r.children)for(let i of r.children)e=this.drawMessage(t,e,i,s);return e}drawHLine(t,e,r,s,i,h){for(let n=t;n<t+r;n++)this.drawChar(n,e,s,i,h)}drawVLine(t,e,r,s,i,h){for(let n=e;n<e+r;n++)this.drawChar(t,n,s,i,h)}drawRect(t,e,r,s,i,h,n){this.drawHLine(t,e,r,i,h,n),this.drawHLine(t,e+s-1,r,i,h,n),this.drawVLine(t,e,s,i,h,n),this.drawVLine(t+r-1,e,s,i,h,n)}drawBox(t,e,r,s,i,h,n,u,_,a,c,T,A,l){this.drawHLine(t,e,r,i,A,l),this.drawHLine(t,e+s-1,r,n,A,l),this.drawVLine(t,e,s,u,A,l),this.drawVLine(t+r-1,e,s,h,A,l),this.drawChar(t,e,_,A,l),this.drawChar(t+r-1,e,a,A,l),this.drawChar(t,e+s-1,T,A,l),this.drawChar(t+r-1,e+s-1,c,A,l)}drawSingleBox(t,e,r,s,i,h){this.drawBox(t,e,r,s,196,179,196,179,218,191,217,192,i,h)}drawDoubleBox(t,e,r,s,i,h){this.drawBox(t,e,r,s,205,186,205,186,201,187,188,200,i,h)}fillRect(t,e,r,s,i,h,n){for(let u=e;u<e+s;u++)this.drawHLine(t,u,r,i,h,n)}drawConsole(t,e,r,s,i,h,n,u){u=u||0;for(let _=0;_<n;_++)for(let a=0;a<h;a++){let c=r.getCell(s+a,i+_);c&&this.drawCell(t+a,e+_,c,u)}}drawCell(t,e,r,s){t>=0&&t<this.width&&e>=0&&e<this.height&&this.grid[e][t].drawCell(r,s)}setBlocked(t,e,r){t>=0&&t<this.width&&e>=0&&e<this.height&&(this.grid[e][t].blocked=r)}setBlockedSight(t,e,r){t>=0&&t<this.width&&e>=0&&e<this.height&&(this.grid[e][t].blockedSight=r)}isVisible(t,e){return t<this.minX||t>this.maxX||e<this.minY||e>this.maxY?!1:this.grid[e][t].visible}isBlocked(t,e){return t<0||t>this.width||e<0||e>this.height?!0:this.grid[e][t].blocked}isBlockedSight(t,e){return t<0||t>this.width||e<0||e>this.height?!0:this.grid[e][t].blockedSight}computeOctantY(t,e){let r=[],s=[],i=1,h=0,n=0,u=0,_,a,c,T,A,l,f,g,L,O;for(a=this.originY+e;a>=this.minY&&a<=this.maxY;a+=e,n=h,++i)for(c=.5/i,O=-1,T=Math.floor(u*i+.5),_=this.originX+T*t;T<=i&&_>=this.minX&&_<=this.maxX;_+=t,++T,O=L){if(A=!0,l=!1,f=T/i,g=O,L=f+c,n>0){if(!(this.grid[a-e][_].visible&&!this.grid[a-e][_].blockedSight)&&!(this.grid[a-e][_-t].visible&&!this.grid[a-e][_-t].blockedSight))A=!1;else for(let d=0;d<n&&A;++d)if(g<=s[d]&&L>=r[d]){if(this.grid[a][_].blockedSight)if(g>=r[d]&&L<=s[d]){A=!1;break}else r[d]=Math.min(r[d],g),s[d]=Math.max(s[d],L),l=!0;else if(f>r[d]&&f<s[d]){A=!1;break}}}A&&(this.grid[a][_].visible=!0,this.grid[a][_].blockedSight&&(u>=g?u=L:l||(r[h]=g,s[h++]=L)))}}computeOctantX(t,e){let r=[],s=[],i=1,h=0,n=0,u=0,_,a,c,T,A,l,f,g,L,O;for(_=this.originX+t;_>=this.minX&&_<=this.maxX;_+=t,n=h,++i)for(c=.5/i,O=-1,T=Math.floor(u*i+.5),a=this.originY+T*e;T<=i&&a>=this.minY&&a<=this.maxY;a+=e,++T,O=L){if(A=!0,l=!1,f=T/i,g=O,L=f+c,n>0){if(!(this.grid[a][_-t].visible&&!this.grid[a][_-t].blockedSight)&&!(this.grid[a-e][_-t].visible&&!this.grid[a-e][_-t].blockedSight))A=!1;else for(let d=0;d<n&&A;++d)if(g<=s[d]&&L>=r[d]){if(this.grid[a][_].blockedSight)if(g>=r[d]&&L<=s[d]){A=!1;break}else r[d]=Math.min(r[d],g),s[d]=Math.max(s[d],L),l=!0;else if(f>r[d]&&f<s[d]){A=!1;break}}}A&&(this.grid[a][_].visible=!0,this.grid[a][_].blockedSight&&(u>=g?u=L:l||(r[h]=g,s[h++]=L)))}}computeFov(t,e,r,s,i){if(this.originX=t,this.originY=e,this.radius=r,s)this.minX=Math.min(this.minX,Math.max(0,t-r)),this.minY=Math.min(this.minY,Math.max(0,e-r)),this.maxX=Math.max(this.maxX,Math.min(this.width-1,t+r)),this.maxY=Math.max(this.maxY,Math.min(this.height-1,e+r));else{this.minX=Math.max(0,t-r),this.minY=Math.max(0,e-r),this.maxX=Math.min(this.width-1,t+r),this.maxY=Math.min(this.height-1,e+r);for(let h=this.minY;h<=this.maxY;h++)for(let n=this.minX;n<=this.maxX;n++)this.grid[h][n].visible=!1}this.grid[e][t].visible=!0,i===void 0?(this.computeOctantY(1,1),this.computeOctantX(1,1),this.computeOctantX(1,-1),this.computeOctantY(1,-1),this.computeOctantY(-1,-1),this.computeOctantX(-1,-1),this.computeOctantX(-1,1),this.computeOctantY(-1,1)):(i&1&&this.computeOctantY(1,1),i&2&&this.computeOctantX(1,1),i&4&&this.computeOctantX(1,-1),i&8&&this.computeOctantY(1,-1),i&16&&this.computeOctantY(-1,-1),i&32&&this.computeOctantX(-1,-1),i&64&&this.computeOctantX(-1,1),i&128&&this.computeOctantY(-1,1))}updateExplored(){for(let t=this.minY;t<=this.maxY;t++)for(let e=this.minX;e<=this.maxX;e++){let r=this.grid[t][e];r.explored=r.explored||r.visible}}};K=N([m],K);var Y=class{constructor(t,e,r,s){this.url=t,this.charWidth=e,this.charHeight=r,this.scale=s||1}},W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQMAAAD58POIAAAABlBMVEUAAAD///+l2Z/dAAAEhklEQVRIx42Sv4oUQRDGC4UzadSwwMUD8QEKlbWD4Q58B/NGpTVocKO1wXHUzMAH0AcwMTYVGg5ag0IzEXaRjdZEZKNzkKbHqtnzHypY09M9+5uvqr7pbYCuC6ftaRhgONXs30eAh0O1rYDm4IS/eH0B8GxRW2vxo396yu/fb0ZFrW1zcOXlPU/XPwK8PGjbWhVwM4KnH61912oK4+zmmHJaQotyt1kvtC2Atdo24iohPDiG/v4eICJsY3Wy8Yvr0DSIBOdxgH6v8wsriWhc8s0AtaK/GzSl1jR0nSjQnwki6FQxNFKjgzO2a7BBqucH7dL4M9z96CIhT1Fs/AgKgcA6dKCxI29DaHNwRJ4EGAU1sU0OG9rmE4SIc3A4FChACqqhJRwpxkqh9wxag4DSmEJ5DtpFwAP4GUf6lmKcFFti1BYuQp4xN8kxM2kNhjdkTOiTUeAKGvhA1rLpMbYACQzCITlTDRMbLYoEa2JWPSMRFZIupcSzMVKcEUkX+sOG+ChNX2vD8ex6k7OFHL0P1655JuPd53WAD+yTv3UrCQiuHmYBbfIxpkImuvpBQBkVb5g4XHv3JkNireG8AO9zDhBZu2z2OMZ11S5/RIlyMefMNaZ4GsCz5xcjyM6hHYEjAYEfO8Ig1rklAe9sRIeYAdwyoIBq6YIzCAKiWoifA3m3o2AzWcdYKOdY47EIf8QABCuYgIUVmdVMEYEDA0Hmo/3D6KKJbh5mxhP3UsWIE97wnEygyizOfOLi2JOJW8CeOblW9IHeKZgv4zxuzDryOmb+4aQH+MXV6e0ywdUcxqCjBWl5GpbzZduOG1QEiGXP86T7EfiJfkMQ4OO4H0yqyNC2zlziWEN7Ywuc2fQ4p5BNkS5QYXP2h5NtRJh0vCKQidtVJmCGAwDSSQpYggSxiRIyzewsgCh4xxiTPDMh5aj//l7btqkr6rQyIOtLji4lVRQwXdzvus40Y53M33fh50GZwF4ExQeMlvuTggLzSi4ElKczUO7zVtpwdyMKdqZKOWb2nDblawPxPmuMwFEWBW+jlZR1eYtS442kiBGMWCi/h1/+GAR6NYOJWiqNJXFygFtrkx5C0O3IeFGs67HhEEhmBu/BUOT+0551pXxYIF+Elpi5AKRkLl5GUbCCZddyMv621ujEBPP4vSy2fotTx3U+d3WBiFOA6VSGSB49v/M7GBX9FPrDaT2c9qr4PCpwZ7qz813R94dVFIe19v33GlMZUghQFb8BrfE7QBmgBMbrn2B3enn/y3B5+DL8UBAdnejdYdBxeV9ejwoYNTgW0Ok/gA7UG2GAzanhL0DG7q4svynwF8UwDPu7u/vD0IudzSltMtVbP+J/gUbR29oJ7Fg9s6Uy+DnpiTCOYc4cXOeXMWfsusSw7FOg9x655nax6BlecwpOQQ68WBwp+H2LMQTuOq2RUigzh2Q/R3CWARJIJG199EwOTyKBlQMznshCRGeQ5gHABAQl6M4gLEdAzVaBWMCiANdsayDCHBA/hagKYfielrJIlipKKQIA9Nf3wBloTHT6BuAx15zRNa1nAAAAAElFTkSuQmCC",I=new Y(W,8,8),k=(t=>(t[t.OCTANT_SOUTH_SOUTHEAST=1]="OCTANT_SOUTH_SOUTHEAST",t[t.OCTANT_EAST_SOUTHEAST=2]="OCTANT_EAST_SOUTHEAST",t[t.OCTANT_EAST_NORTHTHEAST=4]="OCTANT_EAST_NORTHTHEAST",t[t.OCTANT_NORTH_NORTHEAST=8]="OCTANT_NORTH_NORTHEAST",t[t.OCTANT_NORTH_NORTHWEST=16]="OCTANT_NORTH_NORTHWEST",t[t.OCTANT_WEST_NORTHEAST=32]="OCTANT_WEST_NORTHEAST",t[t.OCTANT_WEST_SOUTHWEST=64]="OCTANT_WEST_SOUTHWEST",t[t.OCTANT_SOUTH_SOUTHWEST=128]="OCTANT_SOUTH_SOUTHWEST",t))(k||{}),Q=(t=>(t[t.QUADRANT_SOUTHEAST=3]="QUADRANT_SOUTHEAST",t[t.QUADRANT_EAST=6]="QUADRANT_EAST",t[t.QUADRANT_NORTHEAST=12]="QUADRANT_NORTHEAST",t[t.QUADRANT_NORTH=24]="QUADRANT_NORTH",t[t.QUADRANT_NORTHWEST=48]="QUADRANT_NORTHWEST",t[t.QUADRANT_WEST=96]="QUADRANT_WEST",t[t.QUADRANT_SOUTHWEST=192]="QUADRANT_SOUTHWEST",t[t.QUADRANT_SOUTH=129]="QUADRANT_SOUTH",t))(Q||{}),E=class{constructor(t,e){this.x=t,this.y=e}};E=N([m],E);var p=class{constructor(t,e,r,s){this.x=this.left=t,this.y=this.top=e,this.width=r,this.height=s,this.x2=t+r,this.y2=e+s}getCenter(){return new E(this.x+this.width/2|0,this.y+this.height/2|0)}intersects(t){return this.x<=t.x2&&this.x2>=t.x&&this.y<=t.y2&&this.y2>=t.y}contains(t){return t.x>=this.x&&t.x<this.x2&&t.y>=this.y&&t.y<this.y2}};p=N([m],p);var z=66.66666666666667,Z=class{constructor(){this.down=!1,this.downTime=0,this.repeat=!1,this.repeatTime=0,this.downCount=0,this.upCount=100}setDown(t){this.down!==t&&(this.down=t,this.repeat=!1,this.downTime=this.repeatTime=performance.now())}update(t){this.repeat=!1,this.down?(this.downCount++,this.upCount=0,t-this.downTime>=200&&t-this.repeatTime>=z&&(this.repeat=!0,this.repeatTime=t)):(this.downCount=0,this.upCount++)}isPressed(){return this.downCount===1||this.repeat}isClicked(){return this.upCount===1}},y=class{constructor(){this.inputs=new Map}clear(){this.inputs.clear()}get(t){let e=this.inputs.get(t);return e||(e=new Z,this.inputs.set(t,e)),e}updateAll(t){this.inputs.forEach(e=>e.update(t))}},q=class{constructor(t){this.keys=new y,t.addEventListener("keydown",e=>this.setKey(e,!0)),t.addEventListener("keyup",e=>this.setKey(e,!1))}clear(){this.keys.clear()}getKey(t){return this.keys.get(t)}setKey(t,e){let r=t.code;r!=="F11"&&(t.stopPropagation(),t.preventDefault(),this.keys.get(r).setDown(e))}updateKeys(t){this.keys.updateAll(t)}},J=(t=>(t.VK_BACKSPACE="Backspace",t.VK_TAB="Tab",t.VK_ENTER="Enter",t.VK_SHIFT_LEFT="ShiftLeft",t.VK_SHIFT_RIGHT="ShiftRight",t.VK_CONTROL_LEFT="ControlLeft",t.VK_CONTROL_RIGHT="ControlRight",t.VK_ALT_LEFT="AltLeft",t.VK_ALT_RIGHT="AltRight",t.VK_PAUSE="Pause",t.VK_CAPS_LOCK="CapsLock",t.VK_ESCAPE="Escape",t.VK_SPACE="Space",t.VK_PAGE_UP="PageUp",t.VK_PAGE_DOWN="PageDown",t.VK_END="End",t.VK_HOME="Home",t.VK_LEFT="ArrowLeft",t.VK_UP="ArrowUp",t.VK_RIGHT="ArrowRight",t.VK_DOWN="ArrowDown",t.VK_INSERT="Insert",t.VK_DELETE="Delete",t.VK_0="Digit0",t.VK_1="Digit1",t.VK_2="Digit2",t.VK_3="Digit3",t.VK_4="Digit4",t.VK_5="Digit5",t.VK_6="Digit6",t.VK_7="Digit7",t.VK_8="Digit8",t.VK_9="Digit9",t.VK_SEMICOLON="Semicolon",t.VK_EQUALS="Equal",t.VK_A="KeyA",t.VK_B="KeyB",t.VK_C="KeyC",t.VK_D="KeyD",t.VK_E="KeyE",t.VK_F="KeyF",t.VK_G="KeyG",t.VK_H="KeyH",t.VK_I="KeyI",t.VK_J="KeyJ",t.VK_K="KeyK",t.VK_L="KeyL",t.VK_M="KeyM",t.VK_N="KeyN",t.VK_O="KeyO",t.VK_P="KeyP",t.VK_Q="KeyQ",t.VK_R="KeyR",t.VK_S="KeyS",t.VK_T="KeyT",t.VK_U="KeyU",t.VK_V="KeyV",t.VK_W="KeyW",t.VK_X="KeyX",t.VK_Y="KeyY",t.VK_Z="KeyZ",t.VK_CONTEXT_MENU="ContextMenu",t.VK_NUMPAD0="Numpad0",t.VK_NUMPAD1="Numpad1",t.VK_NUMPAD2="Numpad2",t.VK_NUMPAD3="Numpad3",t.VK_NUMPAD4="Numpad4",t.VK_NUMPAD5="Numpad5",t.VK_NUMPAD6="Numpad6",t.VK_NUMPAD7="Numpad7",t.VK_NUMPAD8="Numpad8",t.VK_NUMPAD9="Numpad9",t.VK_NUMPAD_ENTER="NumpadEnter",t.VK_MULTIPLY="NumpadMultiply",t.VK_ADD="NumpadAdd",t.VK_SEPARATOR="NumpadSeparator",t.VK_SUBTRACT="NumpadSubtract",t.VK_DECIMAL="NumpadDecimal",t.VK_DIVIDE="NumpadDivide",t.VK_F1="F1",t.VK_F2="F2",t.VK_F3="F3",t.VK_F4="F4",t.VK_F5="F5",t.VK_F6="F6",t.VK_F7="F7",t.VK_F8="F8",t.VK_F9="F9",t.VK_F10="F10",t.VK_F11="F11",t.VK_F12="F12",t.VK_F13="F13",t.VK_F14="F14",t.VK_F15="F15",t.VK_F16="F16",t.VK_F17="F17",t.VK_F18="F18",t.VK_F19="F19",t.VK_F20="F20",t.VK_F21="F21",t.VK_F22="F22",t.VK_F23="F23",t.VK_F24="F24",t.VK_NUM_LOCK="NumLock",t.VK_SCROLL_LOCK="ScrollLock",t.VK_COMMA="Comma",t.VK_PERIOD="Period",t.VK_SLASH="Slash",t.VK_BACKQUOTE="Backquote",t.VK_OPEN_BRACKET="BracketLeft",t.VK_BACK_SLASH="Backslash",t.VK_CLOSE_BRACKET="BracketRight",t.VK_QUOTE="Quote",t.VK_META="OSLeft",t))(J||{}),j=class{constructor(t){this.buttons=new y,this.el=t.canvas,this.width=t.width,this.height=t.height,this.prevX=0,this.prevY=0,this.x=0,this.y=0,this.dx=0,this.dy=0,this.wheelDeltaX=0,this.wheelDeltaY=0;let e=this.el;e.addEventListener("mousedown",r=>this.handleEvent(r)),e.addEventListener("mouseup",r=>this.handleEvent(r)),e.addEventListener("mousemove",r=>this.handleEvent(r)),e.addEventListener("contextmenu",r=>this.handleEvent(r)),e.addEventListener("touchstart",r=>this.handleTouchEvent(r)),e.addEventListener("touchend",r=>this.handleTouchEvent(r)),e.addEventListener("touchcancel",r=>this.handleTouchEvent(r)),e.addEventListener("touchmove",r=>this.handleTouchEvent(r)),e.addEventListener("wheel",r=>this.handleWheelEvent(r))}handleTouchEvent(t){if(t.stopPropagation(),t.preventDefault(),t.touches.length>0){let e=t.touches[0];this.updatePosition(e.clientX,e.clientY),this.buttons.get(0).setDown(!0)}else this.buttons.get(0).setDown(!1)}handleEvent(t){t.stopPropagation(),t.preventDefault(),this.updatePosition(t.clientX,t.clientY),t.type==="mousedown"&&(this.buttons.get(t.button).setDown(!0),this.el.focus()),t.type==="mouseup"&&this.buttons.get(t.button).setDown(!1)}handleWheelEvent(t){t.stopPropagation(),t.preventDefault(),this.wheelDeltaX=t.deltaX,this.wheelDeltaY=t.deltaY}updatePosition(t,e){let r=this.el.getBoundingClientRect(),s=this.width/this.height,i=r.width/r.height;if(i-s>.01){let h=s*r.height,n=r.width-h;r=new p(Math.floor(n/2),0,h,r.height)}if(i-s<-.01){let h=r.width/s,n=r.height-h;r=new p(0,Math.floor(n/2),r.width,h)}this.x=this.width*(t-r.left)/r.width|0,this.y=this.height*(e-r.top)/r.height|0}update(t){this.dx=this.x-this.prevX,this.dy=this.y-this.prevY,this.prevX=this.x,this.prevY=this.y,this.buttons.updateAll(t)}};o(0,0,0),o(255,255,255),o(136,0,0),o(170,255,238),o(204,68,204),o(0,204,85),o(0,0,170),o(238,238,119),o(221,136,85),o(102,68,0),o(255,119,119),o(51,51,51),o(119,119,119),o(170,255,102),o(0,136,255),o(187,187,187);o(0,0,0),o(255,255,255),o(136,0,0),o(170,255,238),o(204,68,204),o(0,204,85),o(0,0,170),o(238,238,119),o(221,136,85),o(102,68,0),o(255,119,119),o(51,51,51),o(119,119,119),o(170,255,102),o(0,136,255),o(187,187,187);o(0,0,0),o(29,43,83),o(126,37,83),o(0,135,81),o(171,82,54),o(95,87,79),o(194,195,199),o(255,241,232),o(255,0,77),o(255,163,0),o(255,236,39),o(0,228,54),o(41,173,255),o(131,118,156),o(255,119,168),o(255,204,170);var v=class{constructor(t){this.m=2147483648,this.a=1103515245,this.c=12345,this.state=t||1}nextInt(){return this.state=(this.a*this.state+this.c)%this.m,this.state}nextFloat(){return this.nextInt()/(this.m-1)}nextRange(t,e){let r=e-t,s=this.nextInt()/this.m,i=t+(s*r|0);if(isNaN(i))throw new Error("rand nan");return i}chooseIndex(t){let e=t.reduce((i,h)=>i+h),r=this.nextRange(1,e+1),s=0;for(let i=0;i<t.length;i++)if(s+=t[i],r<=s)return i;return t.length-1}chooseKey(t){let e=Object.keys(t),r=e.map(s=>t[s]);return e[this.chooseIndex(r)]}};v=N([m],v);var $=`#version 300 es
precision highp float;in vec2 a;in vec2 b;in vec3 c;in vec3 d;out vec2 e;out vec4 f;out vec4 g;void main(void){gl_Position=vec4(a.x,a.y,0,1);e=b/16.0;f=vec4(c.r,c.g,c.b,1);g=vec4(d.r,d.g,d.b,1);}`,tt=`#version 300 es
precision highp float;in vec2 e;in vec4 f;in vec4 g;uniform sampler2D s;out vec4 o;void main(void){o=texture(s,e);if(o.r<0.1) {o=g;} else {o=f;}}`,et=`#version 300 es
precision highp float;
in vec2 a_position;
in vec2 a_texCoord;
out vec2 v_texCoord;
void main(void) {
  gl_Position=vec4(a_position.x, a_position.y, 0.0, 1.0);
  v_texCoord = a_texCoord;
}`,it=`#version 300 es
#define PI 3.1415926535897932384626433832795
precision highp float;
in vec2 v_texCoord;
uniform sampler2D u_texture;
uniform float u_blur;
uniform float u_curvature;
uniform float u_chroma;
uniform float u_scanlineWidth;
uniform float u_scanlineIntensity;
uniform float u_vignette;
out vec4 outputColor;

vec2 curve(vec2 uv) {
  uv = (uv - 0.5) * 2.0;
  uv *= 1.1;
  uv.x *= 1.0 + pow((abs(uv.y) * u_curvature), 2.0);
  uv.y *= 1.0 + pow((abs(uv.x) * u_curvature), 2.0);
  uv /= 1.1;
  uv = (uv / 2.0) + 0.5;
  return uv;
}

void main() {
  vec2 iResolution = vec2(640.0, 360.0);
  vec2 q = v_texCoord;
  vec2 fragCoord = v_texCoord;
  vec2 uv = q;
  uv = curve(uv);

  // Outside of range is black
  if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
    outputColor = vec4(0.0, 0.0, 0.0, 1.0);
    return;
  }

  vec4 col;

  // Chromatic aberration
  // col = texture(u_texture, uv.xy);
  col.r = 0.7 * texture(u_texture, vec2(uv.x + 0.001 * u_chroma, uv.y + 0.001 * u_chroma)).r;
  col.g = 0.7 * texture(u_texture, vec2(uv.x + 0.000 * u_chroma, uv.y - 0.002 * u_chroma)).g;
  col.b = 0.7 * texture(u_texture, vec2(uv.x - 0.002 * u_chroma, uv.y + 0.000 * u_chroma)).b;
  
  // Blur
  col += 0.05 * texture(u_texture, vec2(uv.x - 2.0 * u_blur / iResolution.x, uv.y));
  col += 0.10 * texture(u_texture, vec2(uv.x - 1.0 * u_blur / iResolution.x, uv.y));
  col += 0.10 * texture(u_texture, vec2(uv.x + 1.0 * u_blur / iResolution.x, uv.y));
  col += 0.05 * texture(u_texture, vec2(uv.x + 2.0 * u_blur / iResolution.x, uv.y));

  // Vignette
  col *= pow(16.0 * uv.x * uv.y * (1.0 - uv.x) * (1.0 - uv.y), u_vignette);

  // Scanlines
  col *= clamp(1.0 + u_scanlineWidth * sin(uv.y * iResolution.y * 2.0 * PI), 1.0 - u_scanlineIntensity, 1.0);

  outputColor = vec4(col.rgb, 1.0);
}`;function R(t,e){return-1+2*(t/e)}var S={font:I,movementKeys:{KeyK:new E(0,-1),ArrowUp:new E(0,-1),Numpad8:new E(0,-1),KeyJ:new E(0,1),ArrowDown:new E(0,1),Numpad2:new E(0,1),KeyH:new E(-1,0),ArrowLeft:new E(-1,0),Numpad4:new E(-1,0),KeyL:new E(1,0),ArrowRight:new E(1,0),Numpad6:new E(1,0),KeyY:new E(-1,-1),Numpad7:new E(-1,-1),KeyU:new E(1,-1),Numpad9:new E(1,-1),KeyB:new E(-1,1),Numpad1:new E(-1,1),KeyN:new E(1,1),Numpad3:new E(1,1),Period:new E(0,0),Numpad5:new E(0,0)}},rt=class extends K{constructor(t,e,r,s){var c;super(e,r),s=s||S,this.canvas=t,this.font=s.font||I,this.crt=s.crt,this.maxFps=s.maxFps,this.pixelWidth=e*this.font.charWidth,this.pixelHeight=r*this.font.charHeight,this.pixelScale=((c=s.crt)==null?void 0:c.scale)||1,t.width=this.pixelWidth*this.pixelScale,t.height=this.pixelHeight*this.pixelScale,t.style.imageRendering="pixelated",t.style.outline="none",t.tabIndex=0,this.handleResize(),window.addEventListener("resize",()=>this.handleResize()),this.keys=new q(t),this.mouse=new j(this);let i=t.getContext("webgl2",{antialias:!1});if(!i)throw new Error("Unable to initialize WebGL. Your browser may not support it.");let h=i.createProgram();if(!h)throw new Error("Unable to initialize WebGL. Your browser may not support it.");this.gl=i,this.program=h,i.attachShader(h,this.buildShader(i.VERTEX_SHADER,$)),i.attachShader(h,this.buildShader(i.FRAGMENT_SHADER,tt)),i.linkProgram(h),i.useProgram(h),this.crtProgram=i.createProgram(),i.attachShader(this.crtProgram,this.buildShader(i.VERTEX_SHADER,et)),i.attachShader(this.crtProgram,this.buildShader(i.FRAGMENT_SHADER,it)),i.linkProgram(this.crtProgram),i.useProgram(this.crtProgram),this.crtBlurLocation=i.getUniformLocation(this.crtProgram,"u_blur"),this.crtCurvatureLocation=i.getUniformLocation(this.crtProgram,"u_curvature"),this.crtChromaLocation=i.getUniformLocation(this.crtProgram,"u_chroma"),this.crtScanlineWidthLocation=i.getUniformLocation(this.crtProgram,"u_scanlineWidth"),this.crtScanlineIntensityLocation=i.getUniformLocation(this.crtProgram,"u_scanlineIntensity"),this.crtVignetteLocation=i.getUniformLocation(this.crtProgram,"u_vignette"),this.crtPositionLocation=i.getAttribLocation(this.crtProgram,"a_position"),this.crtPositionBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.crtPositionBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),i.STATIC_DRAW),i.enableVertexAttribArray(this.crtPositionLocation),i.vertexAttribPointer(this.crtPositionLocation,2,i.FLOAT,!1,0,0),this.crtTexCoordLocation=i.getAttribLocation(this.crtProgram,"a_texCoord"),this.crtTexCoordBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.crtTexCoordBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),i.STATIC_DRAW),i.enableVertexAttribArray(this.crtTexCoordLocation),i.vertexAttribPointer(this.crtTexCoordLocation,2,i.FLOAT,!1,0,0),this.positionAttribLocation=this.getAttribLocation("a"),this.textureAttribLocation=this.getAttribLocation("b"),this.fgColorAttribLocation=this.getAttribLocation("c"),this.bgColorAttribLocation=this.getAttribLocation("d");let n=e*r;this.positionsArray=new Float32Array(n*3*4),this.indexArray=new Uint16Array(n*6),this.textureArray=new Float32Array(n*2*4),this.foregroundUint8Array=new Uint8Array(n*4*4),this.foregroundDataView=new DataView(this.foregroundUint8Array.buffer),this.backgroundUint8Array=new Uint8Array(n*4*4),this.backgroundDataView=new DataView(this.backgroundUint8Array.buffer),this.frameBufferTexture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.frameBufferTexture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.pixelWidth,this.pixelHeight,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.frameBuffer=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,this.frameBuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.frameBufferTexture,0);let u=0,_=0,a=0;for(let T=0;T<r;T++)for(let A=0;A<e;A++)this.positionsArray[u++]=R(A,e),this.positionsArray[u++]=-R(T,r),this.positionsArray[u++]=R(A+1,e),this.positionsArray[u++]=-R(T,r),this.positionsArray[u++]=R(A+1,e),this.positionsArray[u++]=-R(T+1,r),this.positionsArray[u++]=R(A,e),this.positionsArray[u++]=-R(T+1,r),this.indexArray[_++]=a+0,this.indexArray[_++]=a+1,this.indexArray[_++]=a+2,this.indexArray[_++]=a+0,this.indexArray[_++]=a+2,this.indexArray[_++]=a+3,a+=4;this.positionBuffer=i.createBuffer(),this.indexBuffer=i.createBuffer(),this.textureBuffer=i.createBuffer(),this.foregroundBuffer=i.createBuffer(),this.backgroundBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer),i.bufferData(i.ARRAY_BUFFER,this.positionsArray,i.STATIC_DRAW),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indexArray,i.STATIC_DRAW),this.texture=this.loadTexture(this.font.url),this.lastRenderTime=0,this.renderDelta=0,this.fps=0,this.averageFps=0,this.maxFps===void 0?this.requestAnimationFrame():window.setInterval(()=>this.renderLoop(performance.now()),1e3/this.maxFps)}handleResize(){let t=this.canvas.parentElement;if(!t)return;let e=t.offsetWidth/this.pixelWidth,r=t.offsetHeight/this.pixelHeight,s=Math.min(e,r),i=s*this.pixelWidth|0,h=s*this.pixelHeight|0;this.canvas.style.width=i+"px",this.canvas.style.height=h+"px"}getAttribLocation(t){let e=this.gl.getAttribLocation(this.program,t);return this.gl.enableVertexAttribArray(e),e}flush(){let t=0,e=0;for(let r=0;r<this.height;r++)for(let s=0;s<this.width;s++){let i=this.getCell(s,r);if(!i.dirty){t+=8,e+=16;continue}let h=i.charCode%16,n=i.charCode/16|0;this.textureArray[t++]=h,this.textureArray[t++]=n,this.textureArray[t++]=h+1,this.textureArray[t++]=n,this.textureArray[t++]=h+1,this.textureArray[t++]=n+1,this.textureArray[t++]=h,this.textureArray[t++]=n+1;for(let u=0;u<4;u++)this.foregroundDataView.setUint32(e,i.fg,!1),this.backgroundDataView.setUint32(e,i.bg,!1),e+=4;i.dirty=!1}}isKeyDown(t){return this.keys.getKey(t).down}isKeyPressed(t){return this.keys.getKey(t).isPressed()}getKeyDownCount(t){return this.keys.getKey(t).downCount}getMovementKey(t=S.movementKeys){for(let e in t)if(this.isKeyPressed(e))return t[e]}buildShader(t,e){let r=this.gl,s=r.createShader(t);if(!s)throw new Error("An error occurred compiling the shader: ");if(r.shaderSource(s,e),r.compileShader(s),!r.getShaderParameter(s,r.COMPILE_STATUS))throw new Error("An error occurred compiling the shader: "+r.getShaderInfoLog(s));return s}loadTexture(t){let e=this.gl,r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);let s=0,i=e.RGBA,h=1,n=1,u=0,_=e.RGBA,a=e.UNSIGNED_BYTE,c=new Uint8Array([0,0,0,255]);e.texImage2D(e.TEXTURE_2D,s,i,h,n,u,_,a,c);let T=new Image;return T.onload=()=>{e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,s,i,_,a,T),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)},T.src=t,r}render(){let t=this.gl;t.clearColor(0,0,0,1),t.clearDepth(1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.crt?t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer):t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,this.pixelWidth,this.pixelHeight);{let e=t.FLOAT,r=!1,s=0,i=0;t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.vertexAttribPointer(this.positionAttribLocation,2,e,r,s,i)}{let e=t.FLOAT,r=!1,s=0,i=0;t.bindBuffer(t.ARRAY_BUFFER,this.textureBuffer),t.bufferData(t.ARRAY_BUFFER,this.textureArray,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.textureAttribLocation,2,e,r,s,i)}{let e=t.UNSIGNED_BYTE,r=!0,s=0,i=0;t.bindBuffer(t.ARRAY_BUFFER,this.foregroundBuffer),t.bufferData(t.ARRAY_BUFFER,this.foregroundUint8Array,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.fgColorAttribLocation,4,e,r,s,i)}{let e=t.UNSIGNED_BYTE,r=!0,s=0,i=0;t.bindBuffer(t.ARRAY_BUFFER,this.backgroundBuffer),t.bufferData(t.ARRAY_BUFFER,this.backgroundUint8Array,t.DYNAMIC_DRAW),t.vertexAttribPointer(this.bgColorAttribLocation,4,e,r,s,i)}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.useProgram(this.program),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture);{let e=this.width*this.height*6,r=t.UNSIGNED_SHORT,s=0;t.drawElements(t.TRIANGLES,e,r,s)}}renderCrt(){let t=this.crt;if(!t)return;let e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,this.pixelWidth*this.pixelScale,this.pixelHeight*this.pixelScale),e.useProgram(this.crtProgram),e.uniform1f(this.crtBlurLocation,t.blur),e.uniform1f(this.crtCurvatureLocation,t.curvature),e.uniform1f(this.crtChromaLocation,t.chroma),e.uniform1f(this.crtVignetteLocation,t.vignette),e.uniform1f(this.crtScanlineWidthLocation,t.scanlineWidth),e.uniform1f(this.crtScanlineIntensityLocation,t.scanlineIntensity),e.bindBuffer(e.ARRAY_BUFFER,this.crtPositionBuffer),e.vertexAttribPointer(this.crtPositionLocation,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.crtTexCoordBuffer),e.vertexAttribPointer(this.crtTexCoordLocation,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.frameBufferTexture),e.drawArrays(e.TRIANGLES,0,6)}requestAnimationFrame(){window.requestAnimationFrame(t=>this.renderLoop(t))}renderLoop(t){this.lastRenderTime===0?(this.lastRenderTime=t,this.fps=0):(this.renderDelta=t-this.lastRenderTime,this.lastRenderTime=t,this.fps=1e3/this.renderDelta,this.averageFps=.95*this.averageFps+.05*this.fps),this.keys.updateKeys(t),this.mouse.update(t),this.update&&this.update(),this.flush(),this.render(),this.crt&&this.renderCrt(),this.maxFps===void 0&&this.requestAnimationFrame()}};const D=new rt(document.querySelector("canvas"),80,45);D.fillRect(0,0,80,45,0,B.YELLOW,B.DARK_BLUE);let w=10,C=10;D.update=function(){const t=D.getMovementKey();t&&(w+=t.x,C+=t.y),D.clear(),D.drawString(1,1,"Hello world!"),D.drawString(1,3,"Use arrow keys to move"),D.drawString(w,C,"@")};
