import{T as m,K as g,C as l,R as C,P as K,a as S}from"../terminal-rrr_PGb0.js";import{M as h,S as p,G as I,a as x}from"../selectdialog-DngyHUZF.js";class P{getState(a,e){const t=e.contentsRect.width+4,s=e.contentsRect.height+4,i=(a.width-t)/2|0,r=(a.height-s)/2|0,n=new x(e,new C(i,r,t,s),new K(2,2));return n.buffer=new S(t,s),n}draw(a,e){const t=e.buffer;if(!t)return;const s=e.dialog,{x:i,y:r,width:n,height:w}=e.rect;t.fillRect(0,0,n,w,0,l.LIGHT_CYAN,l.DARK_CYAN),t.drawSingleBox(0,0,n,w),t.drawCenteredString(n/2|0,0," "+s.title+" "),s.drawContents(t,e.contentsOffset),this.fadeIn(a,i,r,t,e.count),e.count+=2}fadeIn(a,e,t,s,i){for(let r=0;r<s.height;r++)for(let n=0;n<s.width;n++)if(n+r<i){const f=s.getCell(n,r);f&&a.drawCell(e+n,t+r,f)}}}const o=new m(document.querySelector("canvas"),80,45),c=new I(o,new P),u=["Sword","Banana","Magic Potion","Red Stapler"];let y=10,R=10;o.update=()=>{if(!c.handleInput()){const d=o.getMovementKey();d&&(y+=d.x,R+=d.y),o.isKeyPressed(g.VK_M)&&c.add(new h("ALERT","Hello World")),o.isKeyPressed(g.VK_I)&&c.add(new p("INVENTORY",u,a=>{c.add(new h("ALERT","You chose: "+u[a]))}))}o.clear(),o.fillRect(0,0,80,45,0,l.LIGHT_GREEN,l.BLACK),o.drawString(1,1,"Hello world!"),o.drawString(1,3,"Use arrow keys to move"),o.drawString(1,5,'Press "m" to open a MessageDialog'),o.drawString(1,7,'Press "i" to open a SelectDialog'),o.drawString(y,R,"@"),c.draw()};
