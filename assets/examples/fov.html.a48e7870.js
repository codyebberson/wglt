import"../modulepreload-polyfill.b7f2da20.js";/* empty css                */import{T as D,a as m,d as c}from"../terminal.9bf168bf.js";import{c as u}from"../path.ee3991af.js";var _=(e=>(e[e.QUADRANT_SOUTHEAST=3]="QUADRANT_SOUTHEAST",e[e.QUADRANT_EAST=6]="QUADRANT_EAST",e[e.QUADRANT_NORTHEAST=12]="QUADRANT_NORTHEAST",e[e.QUADRANT_NORTH=24]="QUADRANT_NORTH",e[e.QUADRANT_NORTHWEST=48]="QUADRANT_NORTHWEST",e[e.QUADRANT_WEST=96]="QUADRANT_WEST",e[e.QUADRANT_SOUTHWEST=192]="QUADRANT_SOUTHWEST",e[e.QUADRANT_SOUTH=129]="QUADRANT_SOUTH",e))(_||{});function I(e,o){return e>0?o>0?3:o===0?6:12:e<0?o>0?192:o===0?96:48:o>0?129:24}const R=80,E=45,S=["    ########        #########        ########    ","    #......#        #.......#        #......#    ","    #......#        #...#...#        #......#    ","    #....#.#        #.#####.#        #......#    ","    #....#.#        #...#...#        #......#    ","    #..###.#        #.......#        #......#    ","    #......##########.......##########......#    ","#####.......................................#####","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#####.......................................#####","    #......##########.......##########......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......##########.......##########......#    ","#####.......................................#####","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#####.......................................#####","    #......#############.#############......#    ","    #......#        #..#.#..#        #......#    ","    #..#####        #..#.#..#        #......#    ","    #......#        #..#.#..#        #......#    ","    #####..#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    ########        #########        ########    "],A=S[0].length,s=S.length,h=(R-A)/2|0,f=(E-s)/2|0,g=15;function a(e,o){return S[o].charAt(e)}function x(e,o){return a(e,o)!=="."}const T=new D(document.querySelector("canvas"),R,E,{crt:{scale:3,blur:.5,curvature:.05,chroma:.5,vignette:.1,scanlineWidth:.75,scanlineIntensity:.25}}),t={x:Math.floor(A/2),y:Math.floor(s/2),direction:_.QUADRANT_NORTH,path:null,pathIndex:0},i=new m(A,s,x);function H(){i.computeFov(t.x,t.y,g,!1,t.direction),i.updateExplored()}function N(e,o){const r=t.x+e,n=t.y+o;r<0||r>=A||n<0||n>=s||x(r,n)||(t.x=r,t.y=n,t.direction=I(e,o),H())}T.update=function(){const e=T.getMovementKey();if(e&&N(e.x,e.y),t.path){for(;t.pathIndex<t.path.length&&t.x===t.path[t.pathIndex].x&&t.y===t.path[t.pathIndex].y;)t.pathIndex++;t.pathIndex<t.path.length&&N(t.path[t.pathIndex].x-t.x,t.path[t.pathIndex].y-t.y)}T.clear(),i.fillRect(0,0,R,E,0,c.WHITE,c.BLACK);for(let n=0;n<s;n++)for(let l=0;l<A;l++){const p=i.getCell(l,n);if(p&&p.explored){const U=i.isVisible(l,n)?c.WHITE:c.DARK_GRAY;i.drawString(l,n,a(l,n),U)}}const o={x:T.mouse.x-h,y:T.mouse.y-f},r=u(i,t,o,1e3);if(r){for(let n=1;n<r.length;n++){const l=r[n],p=i.getCell(l.x,l.y);p&&p.setBackground(c.RED)}T.mouse.buttons.get(0).isClicked()&&(t.path=r,t.pathIndex=0)}T.drawConsole(h,f,i,0,0,A,s),T.drawString(h+t.x,f+t.y,"@"),T.drawString(1,1,"Hello world!",c.WHITE),T.drawString(1,3,"Use arrow keys to move",c.WHITE)};H();
