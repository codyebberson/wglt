import{f as e,T as D,a as d}from"../terminal-z3zRAHYA.js";import{c as x}from"../path-UyLYMGee.js";const A={QUADRANT_SOUTHEAST:3,QUADRANT_EAST:6,QUADRANT_NORTHEAST:12,QUADRANT_NORTH:24,QUADRANT_NORTHWEST:48,QUADRANT_WEST:96,QUADRANT_SOUTHWEST:192,QUADRANT_SOUTH:129};function m(r,o){return r>0?o>0?A.QUADRANT_SOUTHEAST:o===0?A.QUADRANT_EAST:A.QUADRANT_NORTHEAST:r<0?o>0?A.QUADRANT_SOUTHWEST:o===0?A.QUADRANT_WEST:A.QUADRANT_NORTHWEST:o>0?A.QUADRANT_SOUTH:A.QUADRANT_NORTH}const c={BLACK:e(0,0,0),WHITE:e(255,255,255),RED:e(136,0,0),CYAN:e(170,255,238),VIOLET:e(204,68,204),GREEN:e(0,204,85),BLUE:e(0,0,170),YELLOW:e(238,238,119),ORANGE:e(221,136,85),BROWN:e(102,68,0),LIGHT_RED:e(255,119,119),DARK_GRAY:e(51,51,51),GRAY:e(119,119,119),LIGHT_GREEN:e(170,255,102),LIGHT_BLUE:e(0,136,255),LIGHT_GRAY:e(187,187,187)},f=80,h=45,p=["    ########        #########        ########    ","    #......#        #.......#        #......#    ","    #......#        #...#...#        #......#    ","    #....#.#        #.#####.#        #......#    ","    #....#.#        #...#...#        #......#    ","    #..###.#        #.......#        #......#    ","    #......##########.......##########......#    ","#####.......................................#####","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#####.......................................#####","    #......##########.......##########......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    #......##########.......##########......#    ","#####.......................................#####","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#...............................................#","#####.......................................#####","    #......#############.#############......#    ","    #......#        #..#.#..#        #......#    ","    #..#####        #..#.#..#        #......#    ","    #......#        #..#.#..#        #......#    ","    #####..#        #.......#        #......#    ","    #......#        #.......#        #......#    ","    ########        #########        ########    "],i=p[0].length,R=p.length,u=(f-i)/2|0,N=(h-R)/2|0,O=15;function H(r,o){return p[o].charAt(r)}function S(r,o){return H(r,o)!=="."}const T=new D(document.querySelector("canvas"),f,h,{crt:{scale:3,blur:.5,curvature:.05,chroma:.5,vignette:.1,scanlineWidth:.75,scanlineIntensity:.25}}),t={x:Math.floor(i/2),y:Math.floor(R/2),direction:A.QUADRANT_NORTH,path:null,pathIndex:0},l=new d(i,R,S);function I(){l.computeFov(t.x,t.y,O,!1,t.direction),l.updateExplored()}function _(r,o){const a=t.x+r,n=t.y+o;a<0||a>=i||n<0||n>=R||S(a,n)||(t.x=a,t.y=n,t.direction=m(r,o),I())}T.update=()=>{const r=T.getMovementKey();if(r&&_(r.x,r.y),t.path){for(;t.pathIndex<t.path.length&&t.x===t.path[t.pathIndex].x&&t.y===t.path[t.pathIndex].y;)t.pathIndex++;t.pathIndex<t.path.length&&_(t.path[t.pathIndex].x-t.x,t.path[t.pathIndex].y-t.y)}T.clear(),l.fillRect(0,0,f,h,0,c.WHITE,c.BLACK);for(let n=0;n<R;n++)for(let s=0;s<i;s++){const E=l.getCell(s,n);if(E&&E.explored){const U=l.isVisible(s,n)?c.WHITE:c.DARK_GRAY;l.drawString(s,n,H(s,n),U)}}const o={x:T.mouse.x-u,y:T.mouse.y-N},a=x(l,t,o,1e3);if(a){for(let n=1;n<a.length;n++){const s=a[n],E=l.getCell(s.x,s.y);E&&E.setBackground(c.RED)}T.mouse.buttons.get(0).isClicked()&&(t.path=a,t.pathIndex=0)}T.drawConsole(u,N,l,0,0,i,R),T.drawString(u+t.x,N+t.y,"@"),T.drawString(1,1,"Hello world!",c.WHITE),T.drawString(1,3,"Use arrow keys to move",c.WHITE)};I();
