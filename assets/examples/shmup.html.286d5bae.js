import{T as S,c as M,K as T,C as s}from"../terminal.fe5b05f3.js";import{R as D}from"../rng.cc89da0e.js";const w=80,c=45,u=180,R=10,K=15,o=new S(document.querySelector("canvas"),w,c),l=new D,n={x:w/2,y:c-5,cooldown:0},f=[],E=[];for(let y=0;y<100;y++){const e=l.nextRange(64,192);E.push({x:l.nextRange(0,w),y:l.nextRange(0,c),color:M(e,e,e),dy:l.nextRange(1,4)})}const r=[],h=[{x:60,y:40},{x:70,y:30},{x:60,y:20},{x:40,y:40},{x:20,y:20},{x:10,y:30},{x:20,y:40}],m=[],d={count:0,startTime:0,endTime:0};let g=0;function G(){d.count++,d.startTime=g+u,d.endTime=d.startTime+K*R}G();o.update=function(){const y=g-d.startTime;o.isKeyDown(T.VK_UP)&&(n.y=Math.max(0,n.y-1)),o.isKeyDown(T.VK_LEFT)&&(n.x=Math.max(1,n.x-1)),o.isKeyDown(T.VK_RIGHT)&&(n.x=Math.min(w-2,n.x+1)),o.isKeyDown(T.VK_DOWN)&&(n.y=Math.min(c-2,n.y+1)),n.cooldown>0&&n.cooldown--,n.cooldown===0&&o.isKeyDown(T.VK_Z)&&(f.push({x:n.x,y:n.y}),n.cooldown=15),g>=d.startTime&&g<d.endTime&&y%R===0&&r.push({id:y/R,x:10,y:2,state:0});for(let e=r.length-1;e>=0;e--){const t=r[e];let i=0,a=0;if(t.state<0)i=n.x,a=n.y;else if(t.state<h.length)i=h[t.state].x,a=h[t.state].y;else{const x=Math.round(g%800/8),p=x<45?5+x:5+100-x,I=t.id%5,H=t.id/5|0,_=5;i=p+_*I,a=5+_*H}if(t.x===i&&t.y===a?t.state++:(t.x<i?t.x++:t.x>i&&t.x--,t.y<a?t.y++:t.y>a&&t.y--),y>=240&&(y-240)%60===0){const x=r.length-1-(y-240)/60;x>=0&&(r[x].state=-1)}}for(let e=f.length-1;e>=0;e--){const t=f[e];for(let i=r.length-1;i>=0;i--){const a=r[i];if(Math.abs(t.x-a.x)<=1&&Math.abs(t.y-a.y)<=1){r.splice(i,1);for(let x=0;x<10;x++)m.push({x:a.x,y:a.y,dx:l.nextRange(-5,5)/10,dy:l.nextRange(-5,5)/10,state:l.nextRange(10,20)});r.length===0&&G();break}}}o.clear();for(let e=0;e<E.length;e++){const t=E[e];o.drawString(t.x,t.y,".",t.color),t.y+=t.dy,t.y>=c&&(t.y-=c,t.x=l.nextRange(0,w))}for(let e=f.length-1;e>=0;e--){const t=f[e];o.drawString(t.x,t.y,"*",s.YELLOW),t.y-=2,t.y<0&&f.splice(e,1)}for(let e=m.length-1;e>=0;e--){const t=m[e];o.drawString(Math.round(t.x),Math.round(t.y),"%",s.ORANGE),t.x+=t.dx,t.y+=t.dy,t.dx*=.9,t.dy*=.9,t.state--,t.state<=0&&m.splice(e,1)}for(let e=r.length-1;e>=0;e--){const t=r[e];o.drawString(t.x,t.y,"#",s.LIGHT_GREEN),o.drawString(t.x-1,t.y-1,"@",s.LIGHT_RED),o.drawString(t.x+1,t.y-1,"@",s.LIGHT_RED),o.drawString(t.x-1,t.y+1,"@",s.LIGHT_RED),o.drawString(t.x+1,t.y+1,"@",s.LIGHT_RED)}o.drawString(n.x,n.y,"^",s.LIGHT_GRAY),o.drawString(n.x-1,n.y+1,"/",s.LIGHT_GRAY),o.drawString(n.x+1,n.y+1,"\\",s.LIGHT_GRAY),o.drawString(n.x,n.y+1,"|",s.LIGHT_RED),y<0&&y>-u+60&&o.drawCenteredString(w/2,c/2,"WAVE "+d.count,s.WHITE),o.drawString(1,c-2,"Z - SHOOT",s.WHITE),g++};
