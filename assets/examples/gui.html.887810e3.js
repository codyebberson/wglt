import{b as w,K as a,T as E,M as t,C as i,c as K,R as m}from"../terminal.c2a60881.js";import{a as p,M as h,S as R,G as D}from"../selectdialog.b532a17a.js";class H extends p{constructor(s,o,l){super(s,o),this.message=l,this.scrollY=0,this.messagesHeight=l.getHeight(),this.scrollMax=Math.max(1,this.messagesHeight-this.contentsRect.height),this.scrollbarHeight=this.contentsRect.height*this.contentsRect.height/(this.messagesHeight+1)}drawContents(s,o){s.clip=this.contentsRect,s.drawMessage(o.x,o.y-this.scrollY,this.message),s.clip=void 0;const l=this.scrollY/this.scrollMax*(this.contentsRect.height-this.scrollbarHeight);s.drawVLine(this.contentsRect.x+this.contentsRect.width+1,this.contentsRect.y+l,this.scrollbarHeight,w.MEDIUM_SHADE)}handleInput(s){const o=s.getMovementKey();return o&&(this.scrollY+=o.y),s.isKeyPressed(a.VK_PAGE_DOWN)&&(this.scrollY+=this.contentsRect.height),s.isKeyPressed(a.VK_PAGE_UP)&&(this.scrollY-=this.contentsRect.height),s.mouse.wheelDeltaY!==0&&(this.scrollY+=s.mouse.wheelDeltaY<0?-5:5,s.mouse.wheelDeltaY=0),this.scrollY=Math.max(0,Math.min(this.scrollMax,this.scrollY)),s.isKeyPressed(a.VK_ESCAPE)}}const e=new E(document.querySelector("canvas"),80,45),n=new D(e),g=["Sword","Banana","Magic Potion","Red Stapler"];let c=10,d=15;e.update=function(){if(!n.handleInput()){if(e.isKeyDown(a.VK_UP)&&d--,e.isKeyDown(a.VK_LEFT)&&c--,e.isKeyDown(a.VK_RIGHT)&&c++,e.isKeyDown(a.VK_DOWN)&&d++,e.isKeyPressed(a.VK_H)&&n.add(new h("ALERT","Hello World")),e.isKeyPressed(a.VK_F)&&n.add(new h("Formatted Text",new t("Dagger of the Rising Moon",i.DARK_MAGENTA,void 0,[new t("Item Level 200",i.YELLOW),new t("Binds when picked up",i.WHITE),new t("Unique-Equipped",i.WHITE),new t(" "),new t("One-Hand                              Dagger",i.WHITE),new t("195-293 Damage                    Speed 1.70",i.WHITE),new t("143.53 damage per second",i.WHITE),new t("+43 Stamina",i.WHITE),new t(" "),new t("Durability 75 / 75",i.WHITE),new t("Requires Level 80",i.WHITE),new t(" "),new t("Equip: Improves critical strike rating by 22",i.LIGHT_GREEN),new t("Equip: Improves hit rating by 38",i.LIGHT_GREEN),new t("Equip: Increases attack power by 78",i.LIGHT_GREEN)]))),e.isKeyPressed(a.VK_S)){const r=[];for(let s=0;s<100;s++)r.push(new t("Hello World - line "+(s+1),K(Math.random()*255,Math.random()*255,Math.random()*255)));n.add(new H(new m(4,4,72,37),"Message Log",new t(void 0,void 0,void 0,r)))}e.isKeyPressed(a.VK_I)&&n.add(new R("INVENTORY",g,r=>{n.add(new h("ALERT","You chose: "+g[r]))}))}e.clear(),e.fillRect(0,0,80,45,0,i.YELLOW,i.DARK_BLUE),e.drawString(1,1,"Hello world!"),e.drawString(1,3,"Use arrow keys to move"),e.drawString(1,5,'Press "h" to open a MessageDialog'),e.drawString(1,7,'Press "f" to open a MessageDialog with formatted text'),e.drawString(1,9,'Press "s" to open a ScrollableMessageDialog'),e.drawString(1,11,'Press "i" to open a SelectDialog'),e.drawString(c,d,"@"),n.draw()};
