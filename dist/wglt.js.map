{"version":3,"file":"wglt.js","mappings":"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","sources":["webpack://wglt/webpack/universalModuleDefinition","webpack://wglt/webpack/bootstrap","webpack://wglt/webpack/runtime/define property getters","webpack://wglt/webpack/runtime/hasOwnProperty shorthand","webpack://wglt/webpack/runtime/make namespace object","webpack://wglt/./src/blendmode.ts","webpack://wglt/./src/boxutils.ts","webpack://wglt/./src/color.ts","webpack://wglt/./src/colors.ts","webpack://wglt/./src/cell.ts","webpack://wglt/./src/chars.ts","webpack://wglt/./src/console.ts","webpack://wglt/./src/font.ts","webpack://wglt/./src/fov.ts","webpack://wglt/./src/point.ts","webpack://wglt/./src/rect.ts","webpack://wglt/./src/gui/dialogstate.ts","webpack://wglt/./src/gui/defaultdialogrenderer.ts","webpack://wglt/./src/gui.ts","webpack://wglt/./src/gui/dialog.ts","webpack://wglt/./src/input.ts","webpack://wglt/./src/keys.ts","webpack://wglt/./src/gui/messagedialog.ts","webpack://wglt/./src/gui/selectdialog.ts","webpack://wglt/./src/image.ts","webpack://wglt/./src/mouse.ts","webpack://wglt/./src/path.ts","webpack://wglt/./src/rng.ts","webpack://wglt/./src/terminal.ts","webpack://wglt/./src/shaders.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wglt\"] = factory();\n\telse\n\t\troot[\"wglt\"] = factory();\n})(globalThis, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\n/**\n * The BlendMode enum defines how translucent cells are rendered.\n */\nexport enum BlendMode {\n  /**\n   * No blending.  Alpha is ignored.\n   */\n  None = 0,\n\n  /**\n   * Alpha blending.\n   *\n   * dstRGB = (srcRGB * srcA) + (dstRGB * (1-srcA))\n   *\n   * dstA = srcA + (dstA * (1-srcA))\n   */\n  Blend = 1,\n\n  /**\n   * Additive blending.\n   *\n   * dstRGB = (srcRGB * srcA) + dstRGB\n   *\n   * dstA = dstA\n   */\n  Add = 2\n}\n","import { Console } from './console';\n\n/**\n * Details about box characters.\n * The first element is the array of details for the first box char (0xB3).\n * Each sub array is the count of stems for top, right, bottom, and left.\n */\nconst BOX_CHAR_DETAILS = [\n  [1, 0, 1, 0], // 0xB3\n  [1, 0, 1, 1], // 0xB4\n  [1, 0, 1, 2], // 0xB5\n  [2, 0, 2, 1], // 0xB6\n  [0, 0, 2, 1], // 0xB7\n  [0, 0, 1, 2], // 0xB8\n  [2, 0, 2, 2], // 0xB9\n  [2, 0, 2, 0], // 0xBA\n  [0, 0, 2, 2], // 0xBB\n  [2, 0, 0, 2], // 0xBC\n  [2, 0, 0, 1], // 0xBD\n  [1, 0, 0, 2], // 0xBE\n  [0, 0, 1, 1], // 0xBF\n  [1, 1, 0, 0], // 0xC0\n  [1, 1, 0, 1], // 0xC1\n  [0, 1, 1, 1], // 0xC2\n  [1, 1, 1, 0], // 0xC3\n  [0, 1, 0, 1], // 0xC4\n  [1, 1, 1, 1], // 0xC5\n  [1, 2, 1, 0], // 0xC6\n  [2, 1, 2, 0], // 0xC7\n  [2, 2, 0, 0], // 0xC8\n  [0, 2, 2, 0], // 0xC9\n  [2, 2, 0, 2], // 0xCA\n  [0, 2, 2, 2], // 0xCB\n  [2, 2, 2, 0], // 0xCC\n  [0, 2, 0, 2], // 0xCD\n  [2, 2, 2, 2], // 0xCE\n  [1, 2, 0, 2], // 0xCF\n  [2, 1, 0, 1], // 0xD0\n  [0, 2, 1, 2], // 0xD1\n  [0, 1, 2, 1], // 0xD2\n  [2, 1, 0, 0], // 0xD3\n  [1, 2, 0, 0], // 0xD4\n  [0, 2, 1, 0], // 0xD5\n  [0, 1, 2, 0], // 0xD6\n  [2, 1, 2, 1], // 0xD7\n  [1, 2, 1, 2], // 0xD8\n  [1, 0, 0, 1], // 0xD9\n  [0, 1, 1, 0], // 0xDA\n];\n\nfunction isBoxCell(con: Console, x: number, y: number) {\n  const charCode = con.getCharCode(x, y);\n  return charCode !== undefined && charCode >= 0xB3 && charCode <= 0xDA;\n}\n\nfunction getBoxCount(con: Console, x: number, y: number, index: number) {\n  if (x < 0 || y < 0 || x >= con.width || y >= con.height) {\n    return 0;\n  }\n  const charCode = con.getCharCode(x, y);\n  if (charCode === undefined || charCode < 0xB3 || charCode > 0xDA) {\n    return 0;\n  }\n  return BOX_CHAR_DETAILS[charCode - 0xB3][index];\n}\n\nfunction getBoxCell(up: number, right: number, down: number, left: number) {\n  for (let i = 0; i < BOX_CHAR_DETAILS.length; i++) {\n    const row = BOX_CHAR_DETAILS[i];\n    if (row[0] === up && row[1] === right && row[2] === down && row[3] === left) {\n      return 0xB3 + i;\n    }\n  }\n  return 0;\n}\n\nexport function fixBoxCells(con: Console): void {\n  for (let y = 0; y < con.height; y++) {\n    for (let x = 0; x < con.width; x++) {\n      if (isBoxCell(con, x, y)) {\n        let up = getBoxCount(con, x, y - 1, 2);\n        let right = getBoxCount(con, x + 1, y, 3);\n        let down = getBoxCount(con, x, y + 1, 0);\n        let left = getBoxCount(con, x - 1, y, 1);\n\n        // There are no single-direction stubs.\n        // If we need one, then we create a full vertical or horizontal pipe.\n        if (up > 0 && right === 0 && down === 0 && left === 0) {\n          down = up;\n        } else if (up === 0 && right > 0 && down === 0 && left === 0) {\n          left = right;\n        } else if (up === 0 && right === 0 && down > 0 && left === 0) {\n          up = down;\n        } else if (up === 0 && right === 0 && down === 0 && left > 0) {\n          right = left;\n        }\n\n        // Vertical and horizontal axis must have same width.\n        if (left > 0 && right > 0) {\n          left = right = Math.max(left, right);\n        }\n        if (up > 0 && down > 0) {\n          up = down = Math.max(up, down);\n        }\n\n        const charCode = getBoxCell(up, right, down, left);\n\n        if ((up || right || down || left) && !(charCode >= 0xB3 && charCode <= 0xDA)) {\n          throw new Error('invalid char code! (up=' + up + ', right=' + right + ', down=' + down + ', left=' + left + ')');\n        }\n\n        con.drawChar(x, y, charCode);\n      }\n    }\n  }\n}\n","\nexport type Color = number;\n\n/**\n * Creates a big-endian 32-bit RGBA color from red, green, and blue components.\n * @param r Red (0-255).\n * @param g Green (0-255).\n * @param b Blue (0-255).\n * @param a Optional alpha (0-255).\n * @return A 32-bit unsigned integer color.\n */\nexport function fromRgb(r: number, g: number, b: number, a?: number): Color {\n  if (a === undefined) {\n    a = 255;\n  }\n  return ((r << 24) + (g << 16) + (b << 8) + a);\n}\n\n\n/**\n * Converts a color from HSV format to RGBA format.\n *\n * Based on: https://stackoverflow.com/a/17243070/2051724\n *\n * @param h Hue (0.0 - 1.0).\n * @param s Saturation (0.0 - 1.0).\n * @param v Value (0.0 - 1.0).\n * @param a Optional alpha (0.0 - 1.0).\n * @return A 32-bit unsigned integer color.\n */\nexport function fromHsv(h: number, s: number, v: number, a?: number): Color {\n  const i = (h * 6) | 0;\n  const f = h * 6 - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n  let r, g, b;\n  switch (i % 6) {\n    case 0:\n      r = v, g = t, b = p;\n      break;\n    case 1:\n      r = q, g = v, b = p;\n      break;\n    case 2:\n      r = p, g = v, b = t;\n      break;\n    case 3:\n      r = p, g = q, b = v;\n      break;\n    case 4:\n      r = t, g = p, b = v;\n      break;\n    case 5:\n      r = v, g = p, b = q;\n      break;\n    default:\n      r = 0;\n      g = 0;\n      b = 0;\n  }\n  if (a === undefined) {\n    a = 1.0;\n  }\n  return fromRgb((r * 255) | 0, (g * 255) | 0, (b * 255) | 0, (a * 255) | 0);\n}\n","\nimport { fromRgb } from './color';\n\nexport const Colors = {\n  BLACK: fromRgb(0, 0, 0),\n  WHITE: fromRgb(0xff, 0xff, 0xff),\n  LIGHT_GRAY: fromRgb(0xaa, 0xaa, 0xaa),\n  DARK_GRAY: fromRgb(0x55, 0x55, 0x55),\n  YELLOW: fromRgb(0xff, 0xff, 0x55),\n  BROWN: fromRgb(0xaa, 0x55, 0x00),\n  LIGHT_RED: fromRgb(0xff, 0x55, 0x55),\n  DARK_RED: fromRgb(0xaa, 0x00, 0x00),\n  LIGHT_GREEN: fromRgb(0x55, 0xff, 0x55),\n  DARK_GREEN: fromRgb(0x00, 0xaa, 0x00),\n  LIGHT_CYAN: fromRgb(0x55, 0xff, 0xff),\n  DARK_CYAN: fromRgb(0x00, 0xaa, 0xaa),\n  LIGHT_BLUE: fromRgb(0x55, 0x55, 0xff),\n  DARK_BLUE: fromRgb(0x00, 0x00, 0xaa),\n  LIGHT_MAGENTA: fromRgb(0xff, 0x55, 0xff),\n  DARK_MAGENTA: fromRgb(0xaa, 0x00, 0xaa),\n  ORANGE: fromRgb(0xff, 0x88, 0x00),\n};\n","\nimport { BlendMode } from './blendmode';\nimport { Colors } from './colors';\nimport { Color, fromRgb } from './color';\n\nfunction convertCharCode(charCode: string | number): number {\n  if ((typeof charCode === 'string') && charCode.length > 0) {\n    return charCode.charCodeAt(0);\n  } else {\n    return charCode as number;\n  }\n}\n\nexport class Cell {\n  readonly x: number;\n  readonly y: number;\n  charCode: number;\n  fg: Color;\n  bg: Color;\n  dirty: boolean;\n  blocked: boolean;\n  blockedSight: boolean;\n  explored: boolean;\n  visible: boolean;\n  pathId: number;\n  g: number;\n  h: number;\n  prev: Cell | null;\n\n  constructor(x: number, y: number, charCode?: string | number, fg?: Color, bg?: Color) {\n    this.x = x;\n    this.y = y;\n\n    if (charCode !== undefined) {\n      this.charCode = convertCharCode(charCode);\n    } else {\n      this.charCode = ' '.charCodeAt(0);\n    }\n\n    if (fg !== undefined) {\n      this.fg = fg;\n    } else {\n      this.fg = Colors.WHITE;\n    }\n\n    if (bg !== undefined) {\n      this.bg = bg;\n    } else {\n      this.bg = Colors.BLACK;\n    }\n\n    this.dirty = true;\n    this.blocked = false;\n    this.blockedSight = false;\n    this.explored = false;\n    this.visible = false;\n    this.pathId = -1;\n    this.g = 0;\n    this.h = 0;\n    this.prev = null;\n  }\n\n  setCharCode(charCode: number): void {\n    if (this.charCode !== charCode) {\n      this.charCode = charCode;\n      this.dirty = true;\n    }\n  }\n\n  setForeground(fg: Color): void {\n    if (fg !== undefined && fg !== null && fg !== this.fg) {\n      this.fg = fg;\n      this.dirty = true;\n    }\n  }\n\n  setBackground(bg: Color): void {\n    if (bg !== undefined && bg !== null && bg !== this.bg) {\n      this.bg = bg;\n      this.dirty = true;\n    }\n  }\n\n  setValue(charCode: string | number, fg?: Color, bg?: Color): boolean {\n    if (typeof charCode === 'string') {\n      charCode = charCode.charCodeAt(0);\n    }\n    if (typeof charCode === 'number') {\n      this.setCharCode(charCode);\n\n      if (fg !== undefined) {\n        this.setForeground(fg);\n      }\n      if (bg !== undefined) {\n        this.setBackground(bg);\n      }\n    } else {\n      this.drawCell(charCode, BlendMode.None);\n    }\n    return this.dirty;\n  }\n\n  drawCell(otherCell: Cell, blendMode?: BlendMode): void {\n    const alpha = otherCell.bg & 0xFF;\n\n    if (blendMode === BlendMode.None || otherCell.charCode > 0) {\n      this.setCharCode(otherCell.charCode);\n      this.setForeground(otherCell.fg);\n    } else if (alpha > 0 && alpha < 255) {\n      this.setForeground(this.blendColors(this.fg, otherCell.bg, blendMode));\n    }\n\n    if (blendMode === BlendMode.None || alpha === 255) {\n      this.setBackground(otherCell.bg);\n    } else if (alpha > 0) {\n      this.setBackground(this.blendColors(this.bg, otherCell.bg, blendMode));\n    }\n  }\n\n  private blendColors(c1: Color, c2: Color, blendMode?: BlendMode): Color {\n    const alpha = c2 & 0xFF;\n    const w1 = (255 - alpha) / 255.0;\n    const w2 = 1.0 - w1;\n    const r1 = (c1 >> 24) & 0xFF;\n    const g1 = (c1 >> 16) & 0xFF;\n    const b1 = (c1 >> 8) & 0xFF;\n    const r2 = (c2 >> 24) & 0xFF;\n    const g2 = (c2 >> 16) & 0xFF;\n    const b2 = (c2 >> 8) & 0xFF;\n\n    switch (blendMode) {\n      case BlendMode.Blend:\n        return fromRgb(\n          (w1 * r1 + w2 * r2) | 0, (w1 * g1 + w2 * g2) | 0,\n          (w1 * b1 + w2 * b2) | 0);\n\n      case BlendMode.Add:\n        return fromRgb(\n          this.clamp((r1 + w2 * r2) | 0), this.clamp((g1 + w2 * g2) | 0),\n          this.clamp((b1 + w2 * b2) | 0));\n\n      default:\n        return c2;\n    }\n  }\n\n  private clamp(x: number): number {\n    return Math.min(255, x);\n  }\n}\n","\n\n// https://en.wikipedia.org/wiki/Code_page_437\n// https://en.wikipedia.org/wiki/Block_Elements\n// https://en.wikipedia.org/wiki/Box-drawing_character\n\nexport enum Chars {\n  SMILEY = 1,\n  INVERSE_SMILEY = 2,\n  HEART = 3,\n  DIAMOND = 4,\n  CLUB = 5,\n  SPADE = 6,\n  BULLET = 7,\n  INVERSE_BULLET = 8,\n\n  LIGHT_SHADE = 176,\n  MEDIUM_SHADE = 177,\n  DARK_SHADE = 178,\n\n  BOX_SINGLE_VERTICAL = 179,\n  BOX_SINGLE_VERTICAL_AND_SINGLE_LEFT = 180,\n  BOX_DOUBLE_VERTICAL_AND_DOUBLE_LEFT = 185,\n  BOX_DOUBLE_VERTICAL = 186,\n  BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT = 187,\n  BOX_DOUBLE_UP_AND_DOUBLE_LEFT = 188,\n  BOX_SINGLE_DOWN_AND_SINGLE_LEFT = 191,\n  BOX_SINGLE_UP_AND_SINGLE_RIGHT = 192,\n  BOX_SINGLE_HORIZONTAL_AND_SINGLE_UP = 193,\n  BOX_SINGLE_HORIZONTAL_AND_SINGLE_DOWN = 194,\n  BOX_SINGLE_VERTICAL_AND_SINGLE_RIGHT = 195,\n  BOX_SINGLE_HORIZONTAL = 196,\n  BOX_SINGLE_VERTICAL_AND_SINGLE_HORIZONTAL = 197,\n  BOX_DOUBLE_UP_AND_DOUBLE_RIGHT = 200,\n  BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT = 201,\n  BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_UP = 202,\n  BOX_DOUBLE_HORIZONTAL_AND_DOUBLE_DOWN = 203,\n  BOX_DOUBLE_VERTICAL_AND_DOUBLE_RIGHT = 204,\n  BOX_DOUBLE_HORIZONTAL = 205,\n  BOX_DOUBLE_VERTICAL_AND_DOUBLE_HORIZONTAL = 206,\n  BOX_SINGLE_UP_AND_SINGLE_LEFT = 13 * 16 + 9,\n  BOX_SINGLE_DOWN_AND_SINGLE_RIGHT = 13 * 16 + 10,\n\n  BLOCK_FULL = 219,\n  BLOCK_BOTTOM_HALF = 13 * 16 + 12,\n  BLOCK_LEFT_HALF = 13 * 16 + 13,\n  BLOCK_RIGHT_HALF = 13 * 16 + 14,\n  BLOCK_TOP_HALF = 13 * 16 + 15,\n}\n","\nimport { BlendMode } from './blendmode';\nimport { Cell } from './cell';\nimport { Chars } from './chars';\nimport { Color } from './color';\n\nexport class Console {\n  readonly width: number;\n  readonly height: number;\n  readonly grid: Cell[][];\n  originX: number;\n  originY: number;\n  minX: number;\n  maxX: number;\n  minY: number;\n  maxY: number;\n  radius: number;\n\n  constructor(width: number, height: number, blockedFunc?: (x: number, y: number) => boolean) {\n    this.width = width;\n    this.height = height;\n    this.grid = [];\n    this.originX = 0;\n    this.originY = 0;\n    this.minX = 0;\n    this.maxX = 0;\n    this.minY = 0;\n    this.maxY = 0;\n    this.radius = 0;\n\n    for (let y = 0; y < height; y++) {\n      const row = [];\n      for (let x = 0; x < width; x++) {\n        row.push(new Cell(x, y));\n      }\n      this.grid.push(row);\n    }\n\n    this.clear();\n\n    if (blockedFunc) {\n      for (let y = 0; y < height; y++) {\n        for (let x = 0; x < width; x++) {\n          this.grid[y][x].blocked = this.grid[y][x].blockedSight = blockedFunc(x, y);\n        }\n      }\n    }\n  }\n\n  clear(): void {\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        this.drawChar(x, y, 0);\n      }\n    }\n  }\n\n  getCell(x: number, y: number): Cell|undefined {\n    if (x < 0 || y < 0 || x >= this.width || y >= this.height) {\n      return undefined;\n    }\n    return this.grid[y][x];\n  }\n\n  getCharCode(x: number, y: number): number|undefined {\n    if (x < 0 || y < 0 || x >= this.width || y >= this.height) {\n      return undefined;\n    }\n    return this.grid[y][x].charCode;\n  }\n\n  drawChar(x: number, y: number, c: string | number, fg?: Color, bg?: Color): void {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y | 0][x | 0].setValue(c, fg, bg);\n    }\n  }\n\n  drawString(x: number, y: number, str: string, fg?: Color, bg?: Color): void {\n    const lines = str.split('\\n');\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      for (let j = 0; j < line.length; j++) {\n        this.drawChar(x + j, y + i, line.charCodeAt(j), fg, bg);\n      }\n    }\n  }\n\n  drawCenteredString(x: number, y: number, str: string, fg?: Color, bg?: Color): void {\n    this.drawString(x - Math.floor(str.length / 2), y, str, fg, bg);\n  }\n\n  drawHLine(x: number, y: number, width: number, c: string | number, fg?: Color, bg?: Color): void {\n    for (let xi = x; xi < x + width; xi++) {\n      this.drawChar(xi, y, c, fg, bg);\n    }\n  }\n\n  drawVLine(x: number, y: number, height: number, c: string | number, fg?: Color, bg?: Color): void {\n    for (let yi = y; yi < y + height; yi++) {\n      this.drawChar(x, yi, c, fg, bg);\n    }\n  }\n\n  drawRect(x: number, y: number, width: number, height: number, c: string | number, fg?: Color, bg?: Color): void {\n    this.drawHLine(x, y, width, c, fg, bg);\n    this.drawHLine(x, y + height - 1, width, c, fg, bg);\n    this.drawVLine(x, y, height, c, fg, bg);\n    this.drawVLine(x + width - 1, y, height, c, fg, bg);\n  }\n\n  drawBox(\n    x: number, y: number, width: number, height: number,\n    topChar: number, rightChar: number, bottomChar: number, leftChar: number,\n    topLeftChar: number, topRightChar: number, bottomRightChar: number, bottomLeftChar: number,\n    fg?: Color, bg?: Color): void {\n    this.fillRect(x, y, width, height, 0, fg, bg);\n\n    this.drawHLine(x, y, width, topChar);\n    this.drawHLine(x, y + height - 1, width, bottomChar);\n\n    this.drawVLine(x, y, height, leftChar);\n    this.drawVLine(x + width - 1, y, height, rightChar);\n\n    this.drawChar(x, y, topLeftChar);\n    this.drawChar(x + width - 1, y, topRightChar);\n    this.drawChar(x, y + height - 1, bottomLeftChar);\n    this.drawChar(x + width - 1, y + height - 1, bottomRightChar);\n  }\n\n  drawSingleBox(x: number, y: number, width: number, height: number, fg?: Color, bg?: Color): void {\n    this.drawBox(\n      x, y, width, height, Chars.BOX_SINGLE_HORIZONTAL,\n      Chars.BOX_SINGLE_VERTICAL, Chars.BOX_SINGLE_HORIZONTAL,\n      Chars.BOX_SINGLE_VERTICAL, Chars.BOX_SINGLE_DOWN_AND_SINGLE_RIGHT,\n      Chars.BOX_SINGLE_DOWN_AND_SINGLE_LEFT,\n      Chars.BOX_SINGLE_UP_AND_SINGLE_LEFT,\n      Chars.BOX_SINGLE_UP_AND_SINGLE_RIGHT, fg, bg);\n  }\n\n  drawDoubleBox(x: number, y: number, width: number, height: number, fg?: Color, bg?: Color): void {\n    this.drawBox(\n      x, y, width, height, Chars.BOX_DOUBLE_HORIZONTAL,\n      Chars.BOX_DOUBLE_VERTICAL, Chars.BOX_DOUBLE_HORIZONTAL,\n      Chars.BOX_DOUBLE_VERTICAL, Chars.BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT,\n      Chars.BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT,\n      Chars.BOX_DOUBLE_UP_AND_DOUBLE_LEFT,\n      Chars.BOX_DOUBLE_UP_AND_DOUBLE_RIGHT, fg, bg);\n  }\n\n  fillRect(x: number, y: number, width: number, height: number, c: string | number, fg?: Color, bg?: Color): void {\n    for (let yi = y; yi < y + height; yi++) {\n      this.drawHLine(x, yi, width, c, fg, bg);\n    }\n  }\n\n  drawConsole(\n    dstX: number, dstY: number,\n    srcConsole: Console,\n    srcX: number, srcY: number, srcWidth: number, srcHeight: number,\n    blendMode?: BlendMode): void {\n\n    blendMode = blendMode || BlendMode.None;\n\n    for (let y = 0; y < srcHeight; y++) {\n      for (let x = 0; x < srcWidth; x++) {\n        const cell = srcConsole.getCell(srcX + x, srcY + y);\n        if (cell) {\n          this.drawCell(dstX + x, dstY + y, cell, blendMode);\n        }\n      }\n    }\n  }\n\n  drawCell(x: number, y: number, cell: Cell, blendMode?: BlendMode): void {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y][x].drawCell(cell, blendMode);\n    }\n  }\n\n  setBlocked(x: number, y: number, blocked: boolean): void {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y][x].blocked = blocked;\n    }\n  }\n\n  setBlockedSight(x: number, y: number, blockedSight: boolean): void {\n    if (x >= 0 && x < this.width && y >= 0 && y < this.height) {\n      this.grid[y][x].blockedSight = blockedSight;\n    }\n  }\n\n  isVisible(x: number, y: number): boolean {\n    if (x < this.minX || x > this.maxX || y < this.minY || y > this.maxY) {\n      return false;\n    }\n    return this.grid[y][x].visible;\n  }\n\n  isBlocked(x: number, y: number): boolean {\n    if (x < 0 || x > this.width || y < 0 || y > this.height) {\n      return true;\n    }\n    return this.grid[y][x].blocked;\n  }\n\n  isBlockedSight(x: number, y: number): boolean {\n    if (x < 0 || x > this.width || y < 0 || y > this.height) {\n      return true;\n    }\n    return this.grid[y][x].blockedSight;\n  }\n\n  /**\n   * Compute the FOV in an octant adjacent to the Y axis\n   */\n  private computeOctantY(deltaX: number, deltaY: number): void {\n    const startSlopes: number[] = [];\n    const endSlopes: number[] = [];\n    let iteration = 1;\n    let totalObstacles = 0;\n    let obstaclesInLastLine = 0;\n    let minSlope = 0;\n    let x;\n    let y;\n    let halfSlope;\n    let processedCell;\n    let visible;\n    let extended;\n    let centreSlope;\n    let startSlope;\n    let endSlope;\n    let previousEndSlope;\n\n    for (y = this.originY + deltaY; y >= this.minY && y <= this.maxY;\n      y += deltaY, obstaclesInLastLine = totalObstacles, ++iteration) {\n      halfSlope = 0.5 / iteration;\n      previousEndSlope = -1;\n      for (processedCell = Math.floor(minSlope * iteration + 0.5),\n        x = this.originX + (processedCell * deltaX);\n        processedCell <= iteration && x >= this.minX && x <= this.maxX;\n        x += deltaX, ++processedCell, previousEndSlope = endSlope) {\n        visible = true;\n        extended = false;\n        centreSlope = processedCell / iteration;\n        startSlope = previousEndSlope;\n        endSlope = centreSlope + halfSlope;\n\n        if (obstaclesInLastLine > 0) {\n          if (!(this.grid[y - deltaY][x].visible &&\n            !this.grid[y - deltaY][x].blockedSight) &&\n            !(this.grid[y - deltaY][x - deltaX].visible &&\n              !this.grid[y - deltaY][x - deltaX].blockedSight)) {\n            visible = false;\n          } else {\n            for (let idx = 0; idx < obstaclesInLastLine && visible; ++idx) {\n              if (startSlope <= endSlopes[idx] &&\n                endSlope >= startSlopes[idx]) {\n                if (!this.grid[y][x].blockedSight) {\n                  if (centreSlope > startSlopes[idx] &&\n                    centreSlope < endSlopes[idx]) {\n                    visible = false;\n                    break;\n                  }\n                } else {\n                  if (startSlope >= startSlopes[idx] &&\n                    endSlope <= endSlopes[idx]) {\n                    visible = false;\n                    break;\n                  } else {\n                    startSlopes[idx] = Math.min(startSlopes[idx], startSlope);\n                    endSlopes[idx] = Math.max(endSlopes[idx], endSlope);\n                    extended = true;\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (visible) {\n          this.grid[y][x].visible = true;\n          if (this.grid[y][x].blockedSight) {\n            if (minSlope >= startSlope) {\n              minSlope = endSlope;\n            } else if (!extended) {\n              startSlopes[totalObstacles] = startSlope;\n              endSlopes[totalObstacles++] = endSlope;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Compute the FOV in an octant adjacent to the X axis\n   */\n  private computeOctantX(deltaX: number, deltaY: number): void {\n    const startSlopes: number[] = [];\n    const endSlopes: number[] = [];\n    let iteration = 1;\n    let totalObstacles = 0;\n    let obstaclesInLastLine = 0;\n    let minSlope = 0;\n    let x;\n    let y;\n    let halfSlope;\n    let processedCell;\n    let visible;\n    let extended;\n    let centreSlope;\n    let startSlope;\n    let endSlope;\n    let previousEndSlope;\n\n    for (x = this.originX + deltaX; x >= this.minX && x <= this.maxX;\n      x += deltaX, obstaclesInLastLine = totalObstacles, ++iteration) {\n      halfSlope = 0.5 / iteration;\n      previousEndSlope = -1;\n      for (processedCell = Math.floor(minSlope * iteration + 0.5),\n        y = this.originY + (processedCell * deltaY);\n        processedCell <= iteration && y >= this.minY && y <= this.maxY;\n        y += deltaY, ++processedCell, previousEndSlope = endSlope) {\n        visible = true;\n        extended = false;\n        centreSlope = processedCell / iteration;\n        startSlope = previousEndSlope;\n        endSlope = centreSlope + halfSlope;\n\n        if (obstaclesInLastLine > 0) {\n          if (!(this.grid[y][x - deltaX].visible &&\n            !this.grid[y][x - deltaX].blockedSight) &&\n            !(this.grid[y - deltaY][x - deltaX].visible &&\n              !this.grid[y - deltaY][x - deltaX].blockedSight)) {\n            visible = false;\n          } else {\n            for (let idx = 0; idx < obstaclesInLastLine && visible; ++idx) {\n              if (startSlope <= endSlopes[idx] &&\n                endSlope >= startSlopes[idx]) {\n                if (!this.grid[y][x].blockedSight) {\n                  if (centreSlope > startSlopes[idx] &&\n                    centreSlope < endSlopes[idx]) {\n                    visible = false;\n                    break;\n                  }\n                } else {\n                  if (startSlope >= startSlopes[idx] &&\n                    endSlope <= endSlopes[idx]) {\n                    visible = false;\n                    break;\n                  } else {\n                    startSlopes[idx] = Math.min(startSlopes[idx], startSlope);\n                    endSlopes[idx] = Math.max(endSlopes[idx], endSlope);\n                    extended = true;\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (visible) {\n          this.grid[y][x].visible = true;\n          if (this.grid[y][x].blockedSight) {\n            if (minSlope >= startSlope) {\n              minSlope = endSlope;\n            } else if (!extended) {\n              startSlopes[totalObstacles] = startSlope;\n              endSlopes[totalObstacles++] = endSlope;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  computeFov(originX: number, originY: number, radius: number, opt_noClear?: boolean, opt_octants?: number): void {\n    this.originX = originX;\n    this.originY = originY;\n    this.radius = radius;\n\n    if (opt_noClear) {\n      this.minX = Math.min(this.minX, Math.max(0, originX - radius));\n      this.minY = Math.min(this.minY, Math.max(0, originY - radius));\n      this.maxX = Math.max(this.maxX, Math.min(this.width - 1, originX + radius));\n      this.maxY = Math.max(this.maxY, Math.min(this.height - 1, originY + radius));\n\n    } else {\n      this.minX = Math.max(0, originX - radius);\n      this.minY = Math.max(0, originY - radius);\n      this.maxX = Math.min(this.width - 1, originX + radius);\n      this.maxY = Math.min(this.height - 1, originY + radius);\n\n      for (let y = this.minY; y <= this.maxY; y++) {\n        for (let x = this.minX; x <= this.maxX; x++) {\n          this.grid[y][x].visible = false;\n        }\n      }\n    }\n\n    this.grid[originY][originX].visible = true;\n\n    if (opt_octants === undefined) {\n      this.computeOctantY(1, 1);\n      this.computeOctantX(1, 1);\n      this.computeOctantX(1, -1);\n      this.computeOctantY(1, -1);\n      this.computeOctantY(-1, -1);\n      this.computeOctantX(-1, -1);\n      this.computeOctantX(-1, 1);\n      this.computeOctantY(-1, 1);\n    } else {\n      //   \\ 4 | 3 /\n      //    \\  |  /\n      //  5  \\ | /  2\n      //      \\|/\n      // ------+-------\n      //      /|\\\n      //  6  / | \\  1\n      //    /  |  \\\n      //   / 7 | 0 \\\n      if (opt_octants & 0x001) {\n        this.computeOctantY(1, 1);\n      }\n\n      if (opt_octants & 0x002) {\n        this.computeOctantX(1, 1);\n      }\n\n      if (opt_octants & 0x004) {\n        this.computeOctantX(1, -1);\n      }\n\n      if (opt_octants & 0x008) {\n        this.computeOctantY(1, -1);\n      }\n\n      if (opt_octants & 0x010) {\n        this.computeOctantY(-1, -1);\n      }\n\n      if (opt_octants & 0x020) {\n        this.computeOctantX(-1, -1);\n      }\n\n      if (opt_octants & 0x040) {\n        this.computeOctantX(-1, 1);\n      }\n\n      if (opt_octants & 0x080) {\n        this.computeOctantY(-1, 1);\n      }\n    }\n  }\n\n  /**\n   * All visible tiles are marked as explored.\n   */\n  updateExplored(): void {\n    for (let y = this.minY; y <= this.maxY; y++) {\n      for (let x = this.minX; x <= this.maxX; x++) {\n        const tile = this.grid[y][x];\n        tile.explored = tile.explored || tile.visible;\n      }\n    }\n  }\n}\n","\nexport class Font {\n  readonly url: string;\n  readonly charWidth: number;\n  readonly charHeight: number;\n  readonly scale: number;\n  readonly graphical: boolean;\n\n  constructor(\n    url: string, charWidth: number, charHeight: number,\n    scale?: number, graphical?: boolean) {\n    this.url = url;\n    this.charWidth = charWidth;\n    this.charHeight = charHeight;\n    this.scale = scale || 1.0;\n    this.graphical = !!graphical;\n  }\n}\n\n/**\n * Font image as data URL.\n * IBM terminal font.\n * See img/font.png.\n */\nconst FONT_IMAGE = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQ' +\n  'MAAAD58POIAAAABlBMVEUAAAD///+l2Z/dAAAEhklEQVRIx42Sv4oUQRDGC4UzadSwwMUD8' +\n  'QEKlbWD4Q58B/NGpTVocKO1wXHUzMAH0AcwMTYVGg5ag0IzEXaRjdZEZKNzkKbHqtnzHypY' +\n  '09M9+5uvqr7pbYCuC6ftaRhgONXs30eAh0O1rYDm4IS/eH0B8GxRW2vxo396yu/fb0ZFrW1' +\n  'zcOXlPU/XPwK8PGjbWhVwM4KnH61912oK4+zmmHJaQotyt1kvtC2Atdo24iohPDiG/v4eIC' +\n  'JsY3Wy8Yvr0DSIBOdxgH6v8wsriWhc8s0AtaK/GzSl1jR0nSjQnwki6FQxNFKjgzO2a7BBq' +\n  'ucH7dL4M9z96CIhT1Fs/AgKgcA6dKCxI29DaHNwRJ4EGAU1sU0OG9rmE4SIc3A4FChACqqh' +\n  'JRwpxkqh9wxag4DSmEJ5DtpFwAP4GUf6lmKcFFti1BYuQp4xN8kxM2kNhjdkTOiTUeAKGvh' +\n  'A1rLpMbYACQzCITlTDRMbLYoEa2JWPSMRFZIupcSzMVKcEUkX+sOG+ChNX2vD8ex6k7OFHL' +\n  '0P1655JuPd53WAD+yTv3UrCQiuHmYBbfIxpkImuvpBQBkVb5g4XHv3JkNireG8AO9zDhBZu' +\n  '2z2OMZ11S5/RIlyMefMNaZ4GsCz5xcjyM6hHYEjAYEfO8Ig1rklAe9sRIeYAdwyoIBq6YIz' +\n  'CAKiWoifA3m3o2AzWcdYKOdY47EIf8QABCuYgIUVmdVMEYEDA0Hmo/3D6KKJbh5mxhP3UsW' +\n  'IE97wnEygyizOfOLi2JOJW8CeOblW9IHeKZgv4zxuzDryOmb+4aQH+MXV6e0ywdUcxqCjBW' +\n  'l5GpbzZduOG1QEiGXP86T7EfiJfkMQ4OO4H0yqyNC2zlziWEN7Ywuc2fQ4p5BNkS5QYXP2h' +\n  '5NtRJh0vCKQidtVJmCGAwDSSQpYggSxiRIyzewsgCh4xxiTPDMh5aj//l7btqkr6rQyIOtL' +\n  'ji4lVRQwXdzvus40Y53M33fh50GZwF4ExQeMlvuTggLzSi4ElKczUO7zVtpwdyMKdqZKOWb' +\n  '2nDblawPxPmuMwFEWBW+jlZR1eYtS442kiBGMWCi/h1/+GAR6NYOJWiqNJXFygFtrkx5C0O' +\n  '3IeFGs67HhEEhmBu/BUOT+0551pXxYIF+Elpi5AKRkLl5GUbCCZddyMv621ujEBPP4vSy2f' +\n  'otTx3U+d3WBiFOA6VSGSB49v/M7GBX9FPrDaT2c9qr4PCpwZ7qz813R94dVFIe19v33GlMZ' +\n  'UghQFb8BrfE7QBmgBMbrn2B3enn/y3B5+DL8UBAdnejdYdBxeV9ejwoYNTgW0Ok/gA7UG2G' +\n  'AzanhL0DG7q4svynwF8UwDPu7u/vD0IudzSltMtVbP+J/gUbR29oJ7Fg9s6Uy+DnpiTCOYc' +\n  '4cXOeXMWfsusSw7FOg9x655nax6BlecwpOQQ68WBwp+H2LMQTuOq2RUigzh2Q/R3CWARJIJ' +\n  'G199EwOTyKBlQMznshCRGeQ5gHABAQl6M4gLEdAzVaBWMCiANdsayDCHBA/hagKYfielrJI' +\n  'lipKKQIA9Nf3wBloTHT6BuAx15zRNa1nAAAAAElFTkSuQmCC';\n\nexport const DEFAULT_FONT = new Font(FONT_IMAGE, 8, 8);\n","\n/**\n * The FovOctants constants provide bitmasks for various directions.\n *\n *     \\ 4 | 3 /\n *      \\  |  /\n *    5  \\ | /  2\n *        \\|/\n *   ------+-------\n *        /|\\\n *    6  / | \\  1\n *      /  |  \\\n *     / 7 | 0 \\\n *\n */\nexport enum FovOctants {\n  OCTANT_SOUTH_SOUTHEAST = 0x001,\n  OCTANT_EAST_SOUTHEAST = 0x002,\n  OCTANT_EAST_NORTHTHEAST = 0x004,\n  OCTANT_NORTH_NORTHEAST = 0x008,\n  OCTANT_NORTH_NORTHWEST = 0x010,\n  OCTANT_WEST_NORTHEAST = 0x020,\n  OCTANT_WEST_SOUTHWEST = 0x040,\n  OCTANT_SOUTH_SOUTHWEST = 0x080\n}\n\nexport enum FovQuadrants {\n  QUADRANT_SOUTHEAST = 0x001 + 0x002,\n  QUADRANT_EAST = 0x002 + 0x004,\n  QUADRANT_NORTHEAST = 0x004 + 0x008,\n  QUADRANT_NORTH = 0x008 + 0x010,\n  QUADRANT_NORTHWEST = 0x010 + 0x020,\n  QUADRANT_WEST = 0x020 + 0x040,\n  QUADRANT_SOUTHWEST = 0x040 + 0x080,\n  QUADRANT_SOUTH = 0x080 + 0x001,\n}\n\nexport function getFovQuadrant(dx: number, dy: number): FovQuadrants {\n  if (dx > 0) {\n    if (dy > 0) {\n      return FovQuadrants.QUADRANT_SOUTHEAST;\n    } else if (dy === 0) {\n      return FovQuadrants.QUADRANT_EAST;\n    } else {\n      return FovQuadrants.QUADRANT_NORTHEAST;\n    }\n  } else if (dx < 0) {\n    if (dy > 0) {\n      return FovQuadrants.QUADRANT_SOUTHWEST;\n    } else if (dy === 0) {\n      return FovQuadrants.QUADRANT_WEST;\n    } else {\n      return FovQuadrants.QUADRANT_NORTHWEST;\n    }\n  } else {\n    if (dy > 0) {\n      return FovQuadrants.QUADRANT_SOUTH;\n    } else {\n      return FovQuadrants.QUADRANT_NORTH;\n    }\n  }\n}\n","\nexport class Point {\n  readonly x: number;\n  readonly y: number;\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import { Point } from './point';\n\nexport class Rect {\n  readonly x: number;\n  readonly y: number;\n  readonly width: number;\n  readonly height: number;\n  readonly left: number;\n  readonly top: number;\n  readonly x2: number;\n  readonly y2: number;\n\n  constructor(x: number, y: number, width: number, height: number) {\n    this.x = this.left = x;\n    this.y = this.top = y;\n    this.width = width;\n    this.height = height;\n    this.x2 = x + width;\n    this.y2 = y + height;\n  }\n\n  getCenter(): Point {\n    return new Point(this.x + (this.width / 2) | 0, this.y + (this.height / 2) | 0);\n  }\n\n  intersects(other: Rect): boolean {\n    return this.x <= other.x2 && this.x2 >= other.x && this.y <= other.y2 && this.y2 >= other.y;\n  }\n\n  contains(point: Point | Rect): boolean {\n    return point.x >= this.x && point.x < this.x2 && point.y >= this.y && point.y < this.y2;\n  }\n}\n","import { Point } from '../point';\nimport { Rect } from '../rect';\nimport { Dialog } from './dialog';\nimport { Console } from '../console';\n\nexport class DialogState {\n  readonly dialog: Dialog;\n  readonly rect: Rect;\n  readonly contentsOffset: Point;\n  open: boolean;\n  count: number;\n  buffer?: Console;\n\n  constructor(dialog: Dialog, rect: Rect, contentsOffset: Point) {\n    this.dialog = dialog;\n    this.rect = rect;\n    this.contentsOffset = contentsOffset;\n    this.open = false;\n    this.count = 0;\n  }\n}\n","\nimport { Colors } from '../colors';\nimport { Point } from '../point';\nimport { Rect } from '../rect';\nimport { DialogState } from './dialogstate';\nimport { Terminal } from '../terminal';\nimport { Dialog } from './dialog';\n\nexport class DefaultDialogRenderer {\n  getState(terminal: Terminal, dialog: Dialog): DialogState {\n    const width = dialog.contentsRect.width + 4;\n    const height = dialog.contentsRect.height + 4;\n    const x = ((terminal.width - width) / 2) | 0;\n    const y = ((terminal.height - height) / 2) | 0;\n    return new DialogState(\n      dialog, new Rect(x, y, width, height), new Point(x + 2, y + 2));\n  }\n\n  draw(term: Terminal, dialogState: DialogState): void {\n    const dialog = dialogState.dialog;\n    const { x, y, width, height } = dialogState.rect;\n    term.fillRect(x, y, width, height, 0, Colors.WHITE, Colors.BLACK);\n    term.drawSingleBox(x, y, width, height);\n    term.drawCenteredString(x + (width / 2) | 0, y, ' ' + dialog.title + ' ');\n    dialog.drawContents(term, dialogState.contentsOffset);\n  }\n}","import { Dialog } from './gui/dialog';\nimport { DialogState } from './gui/dialogstate';\nimport { DialogRenderer } from './gui/dialogrenderer';\nimport { DefaultDialogRenderer } from './gui/defaultdialogrenderer';\nimport { Terminal } from './terminal';\n\nexport class GUI {\n  readonly terminal: Terminal;\n  readonly renderer: DialogRenderer;\n  readonly dialogs: DialogState[];\n\n  constructor(terminal: Terminal, renderer?: DialogRenderer) {\n    this.terminal = terminal;\n    this.renderer = renderer || new DefaultDialogRenderer();\n    this.dialogs = [];\n  }\n\n  add(dialog: Dialog): void {\n    this.dialogs.push(this.renderer.getState(this.terminal, dialog));\n  }\n\n  /**\n   * Handles input for currently active dialog.\n   * Returns true if the input was handled.\n   * Returns false otherwise.\n   */\n  handleInput(): boolean {\n    if (this.dialogs.length === 0) {\n      return false;\n    }\n\n    const activeIndex = this.dialogs.length - 1;\n    const activeState = this.dialogs[this.dialogs.length - 1];\n    const activeDialog = activeState.dialog;\n    if (activeDialog.handleInput(this.terminal, activeState.contentsOffset)) {\n      this.dialogs.splice(activeIndex, 1);\n    }\n\n    return true;\n  }\n\n  draw(): void {\n    for (let i = 0; i < this.dialogs.length; i++) {\n      this.renderer.draw(this.terminal, this.dialogs[i]);\n    }\n  }\n}\n","import { Rect } from '../rect';\nimport { Point } from '../point';\nimport { Console } from '../console';\nimport { Terminal } from '../terminal';\n\nexport abstract class Dialog {\n  readonly contentsRect: Rect;\n  readonly title: string;\n\n  constructor(contentsRect: Rect, title: string) {\n    this.contentsRect = contentsRect;\n    this.title = title;\n  }\n\n  abstract drawContents(console: Console, offset: Point): void;\n\n  abstract handleInput(terminal: Terminal, offset: Point): boolean;\n}\n","\n/**\n * The delay in frames before input repeating.\n * Time in milliseconds.\n */\nconst INPUT_REPEAT_DELAY = 200.0;\n\n/**\n * The delay between subsequent repeat firing.\n * Time in milliseconds.\n */\nconst INPUT_REPEAT_RATE = 1000.0 / 15.0;\n\n/**\n * The Input class represents a pysical input.\n * Example: keyboard key or mouse button.\n */\nexport class Input {\n  down: boolean;\n  downTime: number;\n  repeat: boolean;\n  repeatTime: number;\n  downCount: number;\n  upCount: number;\n\n  constructor() {\n    this.down = false;\n    this.downTime = 0;\n    this.repeat = false;\n    this.repeatTime = 0;\n    this.downCount = 0;\n    this.upCount = 100;\n  }\n\n  setDown(down: boolean): void {\n    if (this.down !== down) {\n      this.down = down;\n      this.repeat = false;\n      this.downTime = this.repeatTime = performance.now();\n    }\n  }\n\n  update(time: number): void {\n    this.repeat = false;\n    if (this.down) {\n      this.downCount++;\n      this.upCount = 0;\n      if (time - this.downTime >= INPUT_REPEAT_DELAY && time - this.repeatTime >= INPUT_REPEAT_RATE) {\n        this.repeat = true;\n        this.repeatTime = time;\n      }\n    } else {\n      this.downCount = 0;\n      this.upCount++;\n    }\n  }\n\n  /**\n   * Returns true if the input is \"pressed\".\n   * Pressed is a one time event when the input first goes down.\n   * It then repeats on repeat delay.\n   */\n  isPressed(): boolean {\n    return this.downCount === 1 || this.repeat;\n    // const count = this.downCount;\n    // return count === 1 || (count > INPUT_REPEAT_DELAY && count % INPUT_REPEAT_RATE === 0);\n  }\n\n  /**\n   * Returns true if the input is \"clicked\".\n   * Clicked is a one time event when the input first goes up.\n   */\n  isClicked(): boolean {\n    return this.upCount === 1;\n  }\n}\n","import { Input } from './input';\n\n/**\n * Number of keys to track.\n */\nconst KEY_COUNT = 256;\n\nexport class Keyboard {\n  readonly keys: Input[];\n\n  /**\n   * Creates a new keyboard module.\n   *\n   * @param el DOM el to attach listeners.\n   */\n  constructor(el: HTMLElement) {\n    this.keys = new Array(KEY_COUNT);\n    for (let i = 0; i < KEY_COUNT; i++) {\n      this.keys[i] = new Input();\n    }\n\n    el.addEventListener('keydown', e => this.setKey(e, true));\n    el.addEventListener('keyup', e => this.setKey(e, false));\n  }\n\n\n  setKey(e: KeyboardEvent, state: boolean): void {\n    const keyCode = e.keyCode;\n    if (keyCode === Keys.VK_F11) {\n      // Allow fullscreen requests to go through\n      return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n    if (keyCode >= 0 && keyCode < KEY_COUNT) {\n      this.keys[keyCode].setDown(state);\n    }\n  }\n\n  updateKeys(time: number): void {\n    for (let i = 0; i < KEY_COUNT; i++) {\n      this.keys[i].update(time);\n    }\n  }\n\n  getKey(keyCode: number): Input | null {\n    return keyCode >= 0 && keyCode < KEY_COUNT ? this.keys[keyCode] : null;\n  }\n}\n\nexport enum Keys {\n  VK_CANCEL = 3,\n  VK_HELP = 6,\n  VK_BACK_SPACE = 8,\n  VK_TAB = 9,\n  VK_CLEAR = 12,\n  VK_ENTER = 13,\n  VK_SHIFT = 16,\n  VK_CONTROL = 17,\n  VK_ALT = 18,\n  VK_PAUSE = 19,\n  VK_CAPS_LOCK = 20,\n  VK_ESCAPE = 27,\n  VK_SPACE = 32,\n  VK_PAGE_UP = 33,\n  VK_PAGE_DOWN = 34,\n  VK_END = 35,\n  VK_HOME = 36,\n  VK_LEFT = 37,\n  VK_UP = 38,\n  VK_RIGHT = 39,\n  VK_DOWN = 40,\n  VK_PRINTSCREEN = 44,\n  VK_INSERT = 45,\n  VK_DELETE = 46,\n  VK_0 = 48,\n  VK_1 = 49,\n  VK_2 = 50,\n  VK_3 = 51,\n  VK_4 = 52,\n  VK_5 = 53,\n  VK_6 = 54,\n  VK_7 = 55,\n  VK_8 = 56,\n  VK_9 = 57,\n  VK_COLON = 58,\n  VK_SEMICOLON = 59,\n  VK_LESS_THAN = 60,\n  VK_EQUALS = 61,\n  VK_GREATER_THAN = 62,\n  VK_QUESTION_MARK = 63,\n  VK_AT = 64,\n  VK_A = 65,\n  VK_B = 66,\n  VK_C = 67,\n  VK_D = 68,\n  VK_E = 69,\n  VK_F = 70,\n  VK_G = 71,\n  VK_H = 72,\n  VK_I = 73,\n  VK_J = 74,\n  VK_K = 75,\n  VK_L = 76,\n  VK_M = 77,\n  VK_N = 78,\n  VK_O = 79,\n  VK_P = 80,\n  VK_Q = 81,\n  VK_R = 82,\n  VK_S = 83,\n  VK_T = 84,\n  VK_U = 85,\n  VK_V = 86,\n  VK_W = 87,\n  VK_X = 88,\n  VK_Y = 89,\n  VK_Z = 90,\n  VK_CONTEXT_MENU = 93,\n  VK_NUMPAD0 = 96,\n  VK_NUMPAD1 = 97,\n  VK_NUMPAD2 = 98,\n  VK_NUMPAD3 = 99,\n  VK_NUMPAD4 = 100,\n  VK_NUMPAD5 = 101,\n  VK_NUMPAD6 = 102,\n  VK_NUMPAD7 = 103,\n  VK_NUMPAD8 = 104,\n  VK_NUMPAD9 = 105,\n  VK_MULTIPLY = 106,\n  VK_ADD = 107,\n  VK_SEPARATOR = 108,\n  VK_SUBTRACT = 109,\n  VK_DECIMAL = 110,\n  VK_DIVIDE = 111,\n  VK_F1 = 112,\n  VK_F2 = 113,\n  VK_F3 = 114,\n  VK_F4 = 115,\n  VK_F5 = 116,\n  VK_F6 = 117,\n  VK_F7 = 118,\n  VK_F8 = 119,\n  VK_F9 = 120,\n  VK_F10 = 121,\n  VK_F11 = 122,\n  VK_F12 = 123,\n  VK_F13 = 124,\n  VK_F14 = 125,\n  VK_F15 = 126,\n  VK_F16 = 127,\n  VK_F17 = 128,\n  VK_F18 = 129,\n  VK_F19 = 130,\n  VK_F20 = 131,\n  VK_F21 = 132,\n  VK_F22 = 133,\n  VK_F23 = 134,\n  VK_F24 = 135,\n  VK_NUM_LOCK = 144,\n  VK_SCROLL_LOCK = 145,\n  VK_CIRCUMFLEX = 160,\n  VK_EXCLAMATION = 161,\n  VK_DOUBLE_QUOTE = 162,\n  VK_HASH = 163,\n  VK_DOLLAR = 164,\n  VK_PERCENT = 165,\n  VK_AMPERSAND = 166,\n  VK_UNDERSCORE = 167,\n  VK_OPEN_PAREN = 168,\n  VK_CLOSE_PAREN = 169,\n  VK_ASTERISK = 170,\n  VK_PLUS = 171,\n  VK_PIPE = 172,\n  VK_HYPHEN_MINUS = 173,\n  VK_OPEN_CURLY_BRACKET = 174,\n  VK_CLOSE_CURLY_BRACKET = 175,\n  VK_TILDE = 176,\n  VK_COMMA = 188,\n  VK_PERIOD = 190,\n  VK_SLASH = 191,\n  VK_BACK_QUOTE = 192,\n  VK_OPEN_BRACKET = 219,\n  VK_BACK_SLASH = 220,\n  VK_CLOSE_BRACKET = 221,\n  VK_QUOTE = 222,\n  VK_META = 224,\n  VK_ALTGR = 225,\n  VK_WIN = 91,\n  VK_KANA = 21,\n  VK_HANGUL = 21,\n  VK_EISU = 22,\n  VK_JUNJA = 23,\n  VK_FINAL = 24,\n  VK_HANJA = 25,\n  VK_KANJI = 25,\n  VK_CONVERT = 28,\n  VK_NONCONVERT = 29,\n  VK_ACCEPT = 30,\n  VK_MODECHANGE = 31,\n  VK_SELECT = 41,\n  VK_PRINT = 42,\n  VK_EXECUTE = 43,\n  VK_SLEEP = 95,\n}\n","\nimport { Keys } from '../keys';\nimport { Rect } from '../rect';\nimport { Dialog } from './dialog';\nimport { Console } from '../console';\nimport { Terminal } from '../terminal';\nimport { Point } from '../point';\n\nexport class MessageDialog extends Dialog {\n  readonly lines: string[];\n\n  constructor(title: string, message: string) {\n    const lines = message.split('\\n');\n    let width = title.length;\n    for (let i = 0; i < lines.length; i++) {\n      width = Math.max(width, lines[i].length);\n    }\n\n    const height = lines.length;\n    const rect = new Rect(0, 0, width, height);\n    super(rect, title);\n    this.lines = lines;\n  }\n\n  drawContents(console: Console, offset: Point): void {\n    for (let i = 0; i < this.lines.length; i++) {\n      console.drawString(offset.x, offset.y + i, this.lines[i]);\n    }\n  }\n\n  handleInput(terminal: Terminal, offset: Point): boolean {\n    return terminal.isKeyPressed(Keys.VK_ESCAPE);\n  }\n}\n","\nimport { Colors } from '../colors';\nimport { Console } from '../console';\nimport { Keys } from '../keys';\nimport { Point } from '../point';\nimport { Rect } from '../rect';\nimport { Terminal } from '../terminal';\nimport { Dialog } from './dialog';\n\nexport class SelectDialog extends Dialog {\n  readonly options: string[];\n  readonly callback: (i: number) => void;\n  private hoverIndex: number;\n\n  constructor(\n    title: string, options: string[], callback: (i: number) => void) {\n    let width = title.length;\n    for (let i = 0; i < options.length; i++) {\n      width = Math.max(width, options[i].length + 4);\n    }\n\n    const height = options.length;\n    const rect = new Rect(0, 0, width, height);\n    super(rect, title);\n    this.options = options;\n    this.callback = callback;\n    this.hoverIndex = -1;\n  }\n\n  drawContents(console: Console, offset: Point): void {\n    for (let i = 0; i < this.options.length; i++) {\n      const str = String.fromCharCode(65 + i) + ' - ' + this.options[i];\n      if (i === this.hoverIndex) {\n        console.drawString(offset.x, offset.y + i, str, Colors.BLACK, Colors.WHITE);\n      } else {\n        console.drawString(offset.x, offset.y + i, str, Colors.WHITE, Colors.BLACK);\n      }\n    }\n  }\n\n  handleInput(terminal: Terminal, offset: Point): boolean {\n    this.hoverIndex = -1;\n    if (terminal.mouse.x >= offset.x &&\n      terminal.mouse.x < offset.x + this.contentsRect.width &&\n      terminal.mouse.y >= offset.y &&\n      terminal.mouse.y < offset.y + this.contentsRect.height) {\n      this.hoverIndex = terminal.mouse.y - offset.y;\n      if (terminal.mouse.buttons[0].upCount === 1) {\n        this.callback(this.hoverIndex);\n        return true;\n      }\n    }\n    for (let i = 0; i < this.options.length; i++) {\n      if (terminal.isKeyPressed(Keys.VK_A + i)) {\n        this.callback(i);\n        return true;\n      }\n    }\n    return terminal.isKeyPressed(Keys.VK_ESCAPE);\n  }\n\n  private isMouseOverOption(terminal: Terminal, offset: Point, index: number): boolean {\n    return terminal.mouse.x >= offset.x &&\n      terminal.mouse.x < offset.x + this.contentsRect.width &&\n      terminal.mouse.y === offset.y + index;\n  }\n}\n","import { Cell } from './cell';\nimport { Chars } from './chars';\nimport { fromRgb } from './color';\nimport { Console } from './console';\n\n/**\n * All available 2x2 patterns for 2x image loading.\n * Note: The strict IBM CGA font only has halves, not quadrants.\n */\nconst PATTERNS = [\n  { charCode: Chars.BLOCK_TOP_HALF, active: [1, 1, 0, 0] },\n  { charCode: Chars.BLOCK_RIGHT_HALF, active: [0, 1, 0, 1] },\n];\n\nexport function loadImage(url: string, callback: (img: Console) => void): void {\n  const img = new Image();\n  img.onload = () => {\n    const w = img.width;\n    const h = img.height;\n    const data = getImageData(img);\n    const result = new Console(w, h);\n    let i = 0;\n\n    for (let y = 0; y < h; y++) {\n      for (let x = 0; x < w; x++) {\n        const cell = result.getCell(x, y) as Cell;\n        cell.setBackground(fromRgb(data[i++], data[i++], data[i++], data[i++]));\n      }\n    }\n\n    callback(result);\n  };\n  img.src = url;\n}\n\nexport function loadImage2x(url: string, callback: (img: Console) => void): void {\n  const img = new Image();\n  img.onload = () => {\n    const w = img.width;\n    const h = img.height;\n    const data = getImageData(img);\n    const result = new Console(w / 2, h / 2);\n\n    for (let y = 0; y < h; y += 2) {\n      for (let x = 0; x < w; x += 2) {\n        draw2x2(result, data, x, y, w);\n      }\n    }\n\n    callback(result);\n  };\n  img.src = url;\n}\n\nfunction getImageData(img: HTMLImageElement) {\n  const canvas = document.createElement('canvas');\n  canvas.width = img.width;\n  canvas.height = img.height;\n\n  const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n  ctx.drawImage(img, 0, 0);\n\n  return ctx.getImageData(0, 0, img.width, img.height).data;\n}\n\nfunction draw2x2(\n  con: Console, data: Uint8ClampedArray, x: number, y: number, w: number) {\n  // Top left\n  const i1 = 4 * (y * w + x);\n  const r1 = data[i1];\n  const g1 = data[i1 + 1];\n  const b1 = data[i1 + 2];\n\n  // Top right\n  const i2 = 4 * (y * w + x + 1);\n  const r2 = data[i2];\n  const g2 = data[i2 + 1];\n  const b2 = data[i2 + 2];\n\n  // Bottom left\n  const i3 = 4 * ((y + 1) * w + x);\n  const r3 = data[i3];\n  const g3 = data[i3 + 1];\n  const b3 = data[i3 + 2];\n\n  // Bottom right\n  const i4 = 4 * ((y + 1) * w + x + 1);\n  const r4 = data[i4];\n  const g4 = data[i4 + 1];\n  const b4 = data[i4 + 2];\n\n  const colors = [[r1, g1, b1], [r2, g2, b2], [r3, g3, b3], [r4, g4, b4]];\n\n  // For each possible pattern, calculate the total error\n  // Find the pattern with minum error\n\n  let minError = Number.MAX_VALUE;\n  let bestCharCode = 0;\n  let bestBg = null;\n  let bestFg = null;\n\n  for (let i = 0; i < PATTERNS.length; i++) {\n    const pattern = PATTERNS[i];\n    const patternColors = computeColors(pattern.active, colors);\n    if (patternColors.error < minError) {\n      minError = patternColors.error;\n      bestCharCode = pattern.charCode;\n      bestBg = patternColors.bg;\n      bestFg = patternColors.fg;\n    }\n  }\n\n  con.drawChar(x / 2, y / 2, bestCharCode, arrayToColor(bestFg as number[]), arrayToColor(bestBg as number[]));\n}\n\nfunction computeColors(pattern: number[], colors: number[][]) {\n  const sum = [[0, 0, 0], [0, 0, 0]];\n  const avg = [[0, 0, 0], [0, 0, 0]];\n  const count = [0, 0];\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 3; j++) {\n      sum[pattern[i]][j] += colors[i][j];\n    }\n    count[pattern[i]]++;\n  }\n\n  for (let i = 0; i < 2; i++) {\n    for (let j = 0; j < 3; j++) {\n      avg[i][j] = sum[i][j] / count[i];\n    }\n  }\n\n  let error = 0.0;\n\n  for (let i = 0; i < 4; i++) {\n    let cellError = 0.0;\n    for (let j = 0; j < 3; j++) {\n      const delta = colors[i][j] - avg[pattern[i]][j];\n      cellError += delta * delta;\n    }\n    error += Math.sqrt(cellError);\n  }\n\n  return { bg: avg[0], fg: avg[1], error };\n}\n\nfunction arrayToColor(rgb: number[]) {\n  return fromRgb(rgb[0], rgb[1], rgb[2]);\n}\n","\nimport { Rect } from './rect';\nimport { Input } from './input';\nimport { Terminal } from './terminal';\n\nexport class Mouse {\n  readonly el: HTMLCanvasElement;\n  readonly width: number;\n  readonly height: number;\n  private prevX: number;\n  private prevY: number;\n  x: number;\n  y: number;\n  dx: number;\n  dy: number;\n  readonly buttons: Input[];\n\n  constructor(terminal: Terminal) {\n    this.el = terminal.canvas;\n    this.width = terminal.width;\n    this.height = terminal.height;\n    this.prevX = 0;\n    this.prevY = 0;\n    this.x = 0;\n    this.y = 0;\n    this.dx = 0;\n    this.dy = 0;\n    this.buttons = [new Input(), new Input(), new Input()];\n\n    const el = this.el;\n    el.addEventListener('mousedown', e => this.handleEvent(e));\n    el.addEventListener('mouseup', e => this.handleEvent(e));\n    el.addEventListener('mousemove', e => this.handleEvent(e));\n    el.addEventListener('contextmenu', e => this.handleEvent(e));\n\n    const touchEventHandler = this.handleTouchEvent.bind(this);\n    el.addEventListener('touchstart', touchEventHandler);\n    el.addEventListener('touchend', touchEventHandler);\n    el.addEventListener('touchcancel', touchEventHandler);\n    el.addEventListener('touchmove', touchEventHandler);\n  }\n\n  private handleTouchEvent(e: TouchEvent): void {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (e.touches.length > 0) {\n      const touch = e.touches[0];\n      this.updatePosition(touch.clientX, touch.clientY);\n      this.buttons[0].setDown(true);\n    } else {\n      this.buttons[0].setDown(false);\n    }\n  }\n\n  private handleEvent(e: MouseEvent): void {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.updatePosition(e.clientX, e.clientY);\n\n    if (e.type === 'mousedown') {\n      this.buttons[e.button].setDown(true);\n      this.el.focus();\n    }\n\n    if (e.type === 'mouseup') {\n      this.buttons[e.button].setDown(false);\n    }\n  }\n\n  private updatePosition(clientX: number, clientY: number): void {\n    let rect: Rect | DOMRect = this.el.getBoundingClientRect();\n\n    // If the client rect is not the same aspect ratio as canvas,\n    // then we are fullscreen.\n    // Need to update client rect accordingly.\n\n    const terminalAspectRatio = this.width / this.height;\n    const rectAspectRatio = rect.width / rect.height;\n\n    if (rectAspectRatio - terminalAspectRatio > 0.01) {\n      const actualWidth = terminalAspectRatio * rect.height;\n      const excess = rect.width - actualWidth;\n      rect = new Rect(Math.floor(excess / 2), 0, actualWidth, rect.height);\n    }\n\n    if (rectAspectRatio - terminalAspectRatio < -0.01) {\n      const actualHeight = rect.width / terminalAspectRatio;\n      const excess = rect.height - actualHeight;\n      rect = new Rect(0, Math.floor(excess / 2), rect.width, actualHeight);\n    }\n\n    this.x = (this.width * (clientX - rect.left) / rect.width) | 0;\n    this.y = (this.height * (clientY - rect.top) / rect.height) | 0;\n  }\n\n  update(time: number): void {\n    this.dx = this.x - this.prevX;\n    this.dy = this.y - this.prevY;\n    this.prevX = this.x;\n    this.prevY = this.y;\n\n    for (let i = 0; i < this.buttons.length; i++) {\n      this.buttons[i].update(time);\n    }\n  }\n}","import { Console } from './console';\nimport { Cell } from './cell';\nimport { Point } from './point';\n\nconst dxs = [-1, 0, 1, -1, 1, -1, 0, 1];\nconst dys = [-1, -1, -1, 0, 0, 1, 1, 1];\nconst costs = [1.4, 1, 1.4, 1, 1, 1.4, 1, 1.4];\nlet pathId = 0;\n\n/**\n * Calculates Dijkstra's algorithm.\n *\n * @param {!Object} source Starting point, must have x and y properties.\n * @param {!Object=} opt_dest Optional destination point, must have x and y properties.\n * @param {!number=} opt_maxDist Optional maximum distance to examine.\n * @return {?Array} Array of steps if destination found; null otherwise.\n */\nexport function computePath(map: Console, source: Point, dest: Point, maxDist: number): Cell[] | undefined {\n  pathId++;\n\n  const sourceCell = map.grid[source.y][source.x];\n  sourceCell.pathId = pathId;\n  sourceCell.g = 0.0;\n  sourceCell.h = Math.hypot(source.x - dest.x, source.y - dest.y);\n  sourceCell.prev = null;\n\n  const q = new SortedSet([sourceCell]);\n\n  while (q.size() > 0) {\n    const u = q.pop() as Cell;\n\n    if (u.x === dest.x && u.y === dest.y) {\n      return buildPath(u);\n    }\n\n    for (let i = 0; i < dxs.length; i++) {\n      const x = u.x + dxs[i];\n      const y = u.y + dys[i];\n      if (x >= 0 && x < map.width && y >= 0 && y < map.height) {\n        const v = map.grid[y][x];\n        if (v.blocked && v.explored && (x !== dest.x || y !== dest.y)) {\n          continue;\n        }\n        if (v.pathId !== pathId) {\n          v.pathId = pathId;\n          v.g = Infinity;\n          v.h = Math.hypot(x - dest.x, y - dest.y);\n          v.prev = null;\n        }\n        const alt = u.g + costs[i];\n        if (alt < v.g && alt <= maxDist) {\n          v.g = alt;\n          v.prev = u;\n          q.insert(v);\n        }\n      }\n    }\n  }\n  return undefined;\n}\n\nfunction buildPath(cell: Cell): Cell[] {\n  const result = [];\n  let curr: Cell | null = cell;\n  while (curr) {\n    result.push(curr);\n    curr = curr.prev;\n  }\n  result.reverse();\n  return result;\n}\n\nclass SortedSet {\n  private readonly values: Cell[];\n\n  constructor(initialValues: Cell[]) {\n    this.values = initialValues\n  }\n\n  insert(cell: Cell): void {\n    const array = this.values;\n    let low = 0;\n    let high = array.length;\n    let index = 0;\n\n    while (low < high) {\n      const mid = (low + high) >>> 1;\n      const midCell = array[mid];\n      if (midCell.g + midCell.h > cell.g + cell.h) {\n        low = mid + 1;\n        index = low;\n      } else {\n        high = mid;\n        index = high;\n      }\n    }\n    array.splice(index, 0, cell);\n  }\n\n  pop(): Cell | undefined {\n    return this.values.pop();\n  }\n\n  size(): number {\n    return this.values.length;\n  }\n}","\n/**\n * Random number generator.\n *\n * LCG\n * https://stackoverflow.com/a/424445/2051724\n */\nexport class RNG {\n  private m: number;\n  private a: number;\n  private c: number;\n  private state: number;\n\n  /**\n   * Creates a new random number generator.\n   *\n   * @param seed The integer seed.\n   */\n  constructor(seed?: number) {\n    // LCG using GCC's constants\n    this.m = 0x80000000;  // 2**31;\n    this.a = 1103515245;\n    this.c = 12345;\n    this.state = seed || 1;\n  }\n\n  nextInt(): number {\n    this.state = (this.a * this.state + this.c) % this.m;\n    return this.state;\n  }\n\n  /**\n   * Returns a floating point number between 0.0 and 1.0.\n   */\n  nextFloat(): number {\n    // returns in range [0,1]\n    return this.nextInt() / (this.m - 1);\n  }\n\n  /**\n   * Returns an integer in the range start (inclusive) to end (exclusive).\n   * @param start Lower bound, inclusive.\n   * @param end Upper bound, exclusive.\n   */\n  nextRange(start: number, end: number): number {\n    // returns in range [start, end): including start, excluding end\n    // can't modulu nextInt because of weak randomness in lower bits\n    const rangeSize = end - start;\n    const randomUnder1 = this.nextInt() / this.m;\n    const result = start + ((randomUnder1 * rangeSize) | 0);\n    if (isNaN(result)) {\n      throw new Error('rand nan');\n    }\n    return result;\n  }\n\n  chooseIndex(chances: number[]): number {\n    const total = chances.reduce((a, b) => a + b);\n    const roll = this.nextRange(1, total + 1);\n    let runningTotal = 0;\n\n    for (let i = 0; i < chances.length; i++) {\n      runningTotal += chances[i];\n      if (roll <= runningTotal) {\n        return i;\n      }\n    }\n\n    return chances.length - 1;\n  }\n\n  chooseKey(chancesMap: Record<string, number>): string {\n    const values = Object.keys(chancesMap);\n    const chances = values.map(value => chancesMap[value]);\n    return values[this.chooseIndex(chances)];\n  }\n}\n","import { Console } from './console';\nimport { Cell } from './cell';\nimport { DEFAULT_FONT, Font } from './font';\nimport { Keyboard, Keys } from './keys';\nimport { Mouse } from './mouse';\nimport { FRAGMENT_SHADER_SOURCE, VERTEX_SHADER_SOURCE } from './shaders';\nimport { Point } from './point';\n\n/**\n * Linearly interpolates a number in the range 0-max to -1.0-1.0.\n *\n * @param i The value between 0 and max.\n * @param max The maximum value.\n * @returns The interpolated value between -1.0 and 1.0.\n */\nfunction interpolate(i: number, max: number) {\n  return -1.0 + 2.0 * (i / max);\n}\n\ninterface TerminalOptions {\n  font?: Font;\n}\n\nconst DEFAULT_OPTIONS = {\n  font: DEFAULT_FONT,\n};\n\nexport class Terminal extends Console {\n  readonly canvas: HTMLCanvasElement;\n  readonly font: Font;\n  readonly pixelWidth: number;\n  readonly pixelHeight: number;\n  readonly keys: Keyboard;\n  readonly mouse: Mouse;\n  readonly gl: WebGLRenderingContext;\n  readonly program: WebGLProgram;\n  readonly positionAttribLocation: number;\n  readonly textureAttribLocation: number;\n  readonly fgColorAttribLocation: number;\n  readonly bgColorAttribLocation: number;\n  readonly positionsArray: Float32Array;\n  readonly indexArray: Uint16Array;\n  readonly textureArray: Float32Array;\n  readonly foregroundUint8Array: Uint8Array;\n  readonly foregroundDataView: DataView;\n  readonly backgroundUint8Array: Uint8Array;\n  readonly backgroundDataView: DataView;\n  readonly positionBuffer: WebGLBuffer;\n  readonly indexBuffer: WebGLBuffer;\n  readonly textureBuffer: WebGLBuffer;\n  readonly foregroundBuffer: WebGLBuffer;\n  readonly backgroundBuffer: WebGLBuffer;\n  readonly texture: WebGLTexture;\n  private lastRenderTime: number;\n  private renderDelta: number;\n  fps: number;\n  averageFps: number;\n  update?: () => void;\n\n  constructor(canvas: HTMLCanvasElement, width: number, height: number, options?: TerminalOptions) {\n    super(width, height);\n\n    options = options || DEFAULT_OPTIONS;\n\n    this.canvas = canvas;\n    this.font = options.font || DEFAULT_FONT;\n    this.pixelWidth = width * this.font.charWidth;\n    this.pixelHeight = height * this.font.charHeight;\n\n    canvas.width = this.pixelWidth;\n    canvas.height = this.pixelHeight;\n    canvas.style.imageRendering = 'pixelated';\n    canvas.style.outline = 'none';\n    canvas.tabIndex = 0;\n    this.handleResize();\n    window.addEventListener('resize', () => this.handleResize());\n\n    this.keys = new Keyboard(canvas);\n    this.mouse = new Mouse(this);\n\n    // Get the WebGL context from the canvas\n    const gl = canvas.getContext('webgl2', { antialias: false });\n    if (!gl) {\n      throw new Error('Unable to initialize WebGL. Your browser may not support it.');\n    }\n\n    const program = gl.createProgram();\n    if (!program) {\n      throw new Error('Unable to initialize WebGL. Your browser may not support it.');\n    }\n\n    this.gl = gl;\n    this.program = program;\n\n    gl.attachShader(program, this.buildShader(gl.VERTEX_SHADER, VERTEX_SHADER_SOURCE));\n    gl.attachShader(program, this.buildShader(gl.FRAGMENT_SHADER, FRAGMENT_SHADER_SOURCE));\n    gl.linkProgram(program);\n    gl.useProgram(program);\n\n    if (this.font.graphical) {\n      // Set the flag to ignore foreground/background colors, and use texture\n      // directly\n      gl.uniform1i(gl.getUniformLocation(program, 'h'), 1);\n    }\n\n    this.positionAttribLocation = this.getAttribLocation('a');\n    this.textureAttribLocation = this.getAttribLocation('b');\n    this.fgColorAttribLocation = this.getAttribLocation('c');\n    this.bgColorAttribLocation = this.getAttribLocation('d');\n\n    const cellCount = width * height;\n    this.positionsArray = new Float32Array(cellCount * 3 * 4);\n    this.indexArray = new Uint16Array(cellCount * 6);\n    this.textureArray = new Float32Array(cellCount * 2 * 4);\n    this.foregroundUint8Array = new Uint8Array(cellCount * 4 * 4);\n    this.foregroundDataView = new DataView(this.foregroundUint8Array.buffer);\n    this.backgroundUint8Array = new Uint8Array(cellCount * 4 * 4);\n    this.backgroundDataView = new DataView(this.backgroundUint8Array.buffer);\n\n    // Init the positions buffer\n    let i = 0;\n    let j = 0;\n    let k = 0;\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        // Top-left\n        this.positionsArray[i++] = interpolate(x, width);\n        this.positionsArray[i++] = -interpolate(y, height);\n\n        // Top-right\n        this.positionsArray[i++] = interpolate(x + 1, width);\n        this.positionsArray[i++] = -interpolate(y, height);\n\n        // Bottom-right\n        this.positionsArray[i++] = interpolate(x + 1, width);\n        this.positionsArray[i++] = -interpolate(y + 1, height);\n\n        // Bottom-left\n        this.positionsArray[i++] = interpolate(x, width);\n        this.positionsArray[i++] = -interpolate(y + 1, height);\n\n        this.indexArray[j++] = k + 0;\n        this.indexArray[j++] = k + 1;\n        this.indexArray[j++] = k + 2;\n        this.indexArray[j++] = k + 0;\n        this.indexArray[j++] = k + 2;\n        this.indexArray[j++] = k + 3;\n\n        k += 4;\n      }\n    }\n\n    this.positionBuffer = gl.createBuffer() as WebGLBuffer;\n    this.indexBuffer = gl.createBuffer() as WebGLBuffer;\n    this.textureBuffer = gl.createBuffer() as WebGLBuffer;\n    this.foregroundBuffer = gl.createBuffer() as WebGLBuffer;\n    this.backgroundBuffer = gl.createBuffer() as WebGLBuffer;\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this.positionsArray, gl.STATIC_DRAW);\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indexArray, gl.STATIC_DRAW);\n\n    this.texture = this.loadTexture(this.font.url);\n\n    this.lastRenderTime = 0;\n    this.renderDelta = 0;\n    this.fps = 0;\n    this.averageFps = 0;\n\n    this.requestAnimationFrame();\n  }\n\n  private handleResize() {\n    const parent = this.canvas.parentElement;\n    if (!parent) {\n      return;\n    }\n    const widthFactor = parent.offsetWidth / this.pixelWidth;\n    const heightFactor = parent.offsetHeight / this.pixelHeight;\n    const factor = Math.min(widthFactor, heightFactor);\n    const width = (factor * this.pixelWidth) | 0;\n    const height = (factor * this.pixelHeight) | 0;\n    this.canvas.style.width = width + 'px';\n    this.canvas.style.height = height + 'px';\n  }\n\n  private getAttribLocation(name: string) {\n    const location = this.gl.getAttribLocation(this.program, name);\n    this.gl.enableVertexAttribArray(location);\n    return location;\n  }\n\n  private flush() {\n    let textureArrayIndex = 0;\n    let colorArrayIndex = 0;\n\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        const cell = this.getCell(x, y) as Cell;\n\n        if (!cell.dirty) {\n          textureArrayIndex += 8;\n          colorArrayIndex += 16;\n          continue;\n        }\n\n        const textureX = cell.charCode % 16;\n        const textureY = (cell.charCode / 16) | 0;\n\n        this.textureArray[textureArrayIndex++] = textureX;\n        this.textureArray[textureArrayIndex++] = textureY;\n\n        this.textureArray[textureArrayIndex++] = textureX + 1;\n        this.textureArray[textureArrayIndex++] = textureY;\n\n        this.textureArray[textureArrayIndex++] = textureX + 1;\n        this.textureArray[textureArrayIndex++] = textureY + 1;\n\n        this.textureArray[textureArrayIndex++] = textureX;\n        this.textureArray[textureArrayIndex++] = textureY + 1;\n\n        for (let i = 0; i < 4; i++) {\n          this.foregroundDataView.setUint32(colorArrayIndex, cell.fg, false);\n          this.backgroundDataView.setUint32(colorArrayIndex, cell.bg, false);\n          colorArrayIndex += 4;\n        }\n\n        cell.dirty = false;\n      }\n    }\n  }\n\n  isKeyDown(keyCode: number): boolean {\n    const key = this.keys.getKey(keyCode);\n    return !!key && key.down;\n  }\n\n  isKeyPressed(keyCode: number): boolean {\n    const key = this.keys.getKey(keyCode);\n    return !!key && key.isPressed();\n  }\n\n  getKeyDownCount(keyCode: number): number {\n    const key = this.keys.getKey(keyCode);\n    return key ? key.downCount : 0;\n  }\n\n  /**\n   * Returns a standard roguelike movement key if pressed.\n   * Implemented control systems:\n   * 1) Numpad arrows\n   * 2) VIM keys\n   * 3) Normal arrows (4 directions only)\n   * 4) Numpad 5 and '.' (period) for \"wait\"\n   * If a key is pressed, returns the movement delta.\n   * If no key is pressed, returns undefined.\n   * See: http://www.roguebasin.com/index.php?title=Preferred_Key_Controls\n   */\n  getMovementKey(): Point | undefined {\n    if (this.isKeyPressed(Keys.VK_NUMPAD1) || this.isKeyPressed(Keys.VK_B)) {\n      return new Point(-1, 1);\n    }\n    if (this.isKeyPressed(Keys.VK_NUMPAD2) || this.isKeyPressed(Keys.VK_J) || this.isKeyPressed(Keys.VK_DOWN)) {\n      return new Point(0, 1);\n    }\n    if (this.isKeyPressed(Keys.VK_NUMPAD3) || this.isKeyPressed(Keys.VK_N)) {\n      return new Point(1, 1);\n    }\n    if (this.isKeyPressed(Keys.VK_NUMPAD4) || this.isKeyPressed(Keys.VK_H) || this.isKeyPressed(Keys.VK_LEFT)) {\n      return new Point(-1, 0);\n    }\n    if (this.isKeyPressed(Keys.VK_NUMPAD5) || this.isKeyPressed(Keys.VK_PERIOD)) {\n      return new Point(0, 0);\n    }\n    if (this.isKeyPressed(Keys.VK_NUMPAD6) || this.isKeyPressed(Keys.VK_L) || this.isKeyPressed(Keys.VK_RIGHT)) {\n      return new Point(1, 0);\n    }\n    if (this.isKeyPressed(Keys.VK_NUMPAD7) || this.isKeyPressed(Keys.VK_Y)) {\n      return new Point(-1, -1);\n    }\n    if (this.isKeyPressed(Keys.VK_NUMPAD8) || this.isKeyPressed(Keys.VK_K) || this.isKeyPressed(Keys.VK_UP)) {\n      return new Point(0, -1);\n    }\n    if (this.isKeyPressed(Keys.VK_NUMPAD9) || this.isKeyPressed(Keys.VK_U)) {\n      return new Point(1, -1);\n    }\n    return undefined;\n  }\n\n  private buildShader(type: number, source: string) {\n    const gl = this.gl;\n    const sh = gl.createShader(type);\n    if (!sh) {\n      throw new Error('An error occurred compiling the shader: ');\n    }\n    gl.shaderSource(sh, source);\n    gl.compileShader(sh);\n    if (!gl.getShaderParameter(sh, gl.COMPILE_STATUS)) {\n      throw new Error('An error occurred compiling the shader: ' + gl.getShaderInfoLog(sh));\n    }\n    return sh;\n  }\n\n  /**\n   * Initialize a texture and load an image.\n   * When the image finished loading copy it into the texture.\n   * @param url\n   */\n  private loadTexture(url: string) {\n    const gl = this.gl;\n    const texture = gl.createTexture() as WebGLTexture;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    // Because images have to be download over the internet\n    // they might take a moment until they are ready.\n    // Until then put a single pixel in the texture so we can\n    // use it immediately. When the image has finished downloading\n    // we'll update the texture with the contents of the image.\n    const level = 0;\n    const internalFormat = gl.RGBA;\n    const width = 1;\n    const height = 1;\n    const border = 0;\n    const srcFormat = gl.RGBA;\n    const srcType = gl.UNSIGNED_BYTE;\n    const pixel = new Uint8Array([0, 0, 0, 255]); // opaque black\n    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, srcFormat, srcType, pixel);\n\n    const image = new Image();\n    image.onload = () => {\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, srcFormat, srcType, image);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    };\n    image.src = url;\n\n    return texture;\n  }\n\n  //\n  // Draw the scene.\n  //\n  private render() {\n    const gl = this.gl;\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\n    gl.clearDepth(1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    gl.viewport(0, 0, this.pixelWidth, this.pixelHeight);\n\n    // Tell WebGL how to pull out the positions from the position\n    // buffer into the vertexPosition attribute\n    {\n      const numComponents = 2;\n      const type = gl.FLOAT;\n      const normalize = false;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n      gl.vertexAttribPointer(this.positionAttribLocation, numComponents, type, normalize, stride, offset);\n    }\n\n    // Tell WebGL how to pull out the texture coordinates from\n    // the texture coordinate buffer into the textureCoord attribute.\n    {\n      const numComponents = 2;\n      const type = gl.FLOAT;\n      const normalize = false;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.textureBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, this.textureArray, gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(this.textureAttribLocation, numComponents, type, normalize, stride, offset);\n    }\n\n    // Foreground color\n    {\n      const numComponents = 4;\n      const type = gl.UNSIGNED_BYTE;\n      const normalize = true;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.foregroundBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, this.foregroundUint8Array, gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(this.fgColorAttribLocation, numComponents, type, normalize, stride, offset);\n    }\n\n    // Background color\n    {\n      const numComponents = 4;\n      const type = gl.UNSIGNED_BYTE;\n      const normalize = true;\n      const stride = 0;\n      const offset = 0;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.backgroundBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, this.backgroundUint8Array, gl.DYNAMIC_DRAW);\n      gl.vertexAttribPointer(this.bgColorAttribLocation, numComponents, type, normalize, stride, offset);\n    }\n\n    // Tell WebGL which indices to use to index the vertices\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n\n    // Tell WebGL to use our program when drawing\n    gl.useProgram(this.program);\n\n    // Tell WebGL we want to affect texture unit 0\n    gl.activeTexture(gl.TEXTURE0);\n\n    // Bind the texture to texture unit 0\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n    // Tell the shader we bound the texture to texture unit 0\n    {\n      const vertexCount = this.width * this.height * 6;\n      const type = gl.UNSIGNED_SHORT;\n      const offset = 0;\n      gl.drawElements(gl.TRIANGLES, vertexCount, type, offset);\n    }\n  }\n\n  private requestAnimationFrame() {\n    window.requestAnimationFrame((t) => this.renderLoop(t));\n  }\n\n  private renderLoop(time: number) {\n    if (this.lastRenderTime === 0) {\n      this.lastRenderTime = time;\n      this.fps = 0;\n    } else {\n      this.renderDelta = time - this.lastRenderTime;\n      this.lastRenderTime = time;\n      this.fps = 1000.0 / this.renderDelta;\n      this.averageFps = 0.95 * this.averageFps + 0.05 * this.fps;\n    }\n\n    this.keys.updateKeys(time);\n    this.mouse.update(time);\n    if (this.update) {\n      this.update();\n    }\n    this.flush();\n    this.render();\n    this.requestAnimationFrame();\n  }\n}\n","/**\n * Vertex shader program.\n *\n * a = attribute vec2 aVertexPosition;\n * b = attribute vec2 aTextureCoord;\n * c = attribute vec3 aFgColor;\n * d = attribute vec3 aBgColor;\n * e = varying vec2 vTextureCoord;\n * f = varying vec4 vFgColor;\n * g = varying vec4 vBgColor;\n */\nexport const VERTEX_SHADER_SOURCE =\n  '#version 300 es\\n' +\n  'precision highp float;' +\n  'in vec2 a;' +\n  'in vec2 b;' +\n  'in vec3 c;' +\n  'in vec3 d;' +\n  'out vec2 e;' +\n  'out vec4 f;' +\n  'out vec4 g;' +\n  'void main(void){' +\n  'gl_Position=vec4(a.x,a.y,0,1);' +\n  'e=b/16.0;' +\n  'f=vec4(c.r,c.g,c.b,1);' +\n  'g=vec4(d.r,d.g,d.b,1);' +\n  '}';\n\n/**\n * Fragment shader program.\n *\n * e = varying vec2 vTextureCoord;\n * f = varying vec4 vFgColor;\n * g = varying vec4 vBgColor;\n * h = uniform bool uGraphicalTiles;\n * s = uniform sampler2D uSampler;\n * o = out vec4 oColor;\n */\nexport const FRAGMENT_SHADER_SOURCE =\n  '#version 300 es\\n' +\n  'precision highp float;' +\n  'in vec2 e;' +\n  'in vec4 f;' +\n  'in vec4 g;' +\n  'uniform bool h;' +\n  'uniform sampler2D s;' +\n  'out vec4 o;' +\n  'void main(void){' +\n  'o=texture(s,e);' +\n  'if(h){' +\n  // Using graphical tiles\n  'if(o.a<0.1){' +\n  // The current pixel of the foreground sprite is transparent.\n  // Draw the background tile instead.\n  // Use the background red channel for the tile X coordinate.\n  // Use the background green channel for the tile Y coordinate.\n  // Use the fractional component of the texture coord for the pixel offset.\n  'o=texture(s,g.rg*16.0+fract(e*16.0)/16.0);' +\n  '}' +\n  '}else{' +\n  // Using ASCII characters\n  'if(o.r<0.1) {' +\n  // Black background, so use bgColor\n  'o=g;' +\n  '} else {' +\n  // White background, so use fgColor\n  'o=f;' +\n  '}' +\n  '}' +\n  '}';\n"],"names":["root","factory","exports","module","define","amd","globalThis","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","BlendMode","BOX_CHAR_DETAILS","isBoxCell","con","x","y","charCode","getCharCode","undefined","getBoxCount","index","width","height","getBoxCell","up","right","down","left","i","length","row","fixBoxCells","Math","max","Error","drawChar","fromRgb","r","g","b","a","fromHsv","h","s","v","f","p","q","t","Colors","BLACK","WHITE","LIGHT_GRAY","DARK_GRAY","YELLOW","BROWN","LIGHT_RED","DARK_RED","LIGHT_GREEN","DARK_GREEN","LIGHT_CYAN","DARK_CYAN","LIGHT_BLUE","DARK_BLUE","LIGHT_MAGENTA","DARK_MAGENTA","ORANGE","Cell","constructor","fg","bg","this","charCodeAt","convertCharCode","dirty","blocked","blockedSight","explored","visible","pathId","prev","setCharCode","setForeground","setBackground","setValue","drawCell","None","otherCell","blendMode","alpha","blendColors","c1","c2","w1","w2","r1","g1","b1","r2","g2","b2","Blend","Add","clamp","min","Chars","Console","blockedFunc","grid","originX","originY","minX","maxX","minY","maxY","radius","push","clear","getCell","c","drawString","str","lines","split","line","j","drawCenteredString","floor","drawHLine","xi","drawVLine","yi","drawRect","drawBox","topChar","rightChar","bottomChar","leftChar","topLeftChar","topRightChar","bottomRightChar","bottomLeftChar","fillRect","drawSingleBox","BOX_SINGLE_HORIZONTAL","BOX_SINGLE_VERTICAL","BOX_SINGLE_DOWN_AND_SINGLE_RIGHT","BOX_SINGLE_DOWN_AND_SINGLE_LEFT","BOX_SINGLE_UP_AND_SINGLE_LEFT","BOX_SINGLE_UP_AND_SINGLE_RIGHT","drawDoubleBox","BOX_DOUBLE_HORIZONTAL","BOX_DOUBLE_VERTICAL","BOX_DOUBLE_DOWN_AND_DOUBLE_RIGHT","BOX_DOUBLE_DOWN_AND_DOUBLE_LEFT","BOX_DOUBLE_UP_AND_DOUBLE_LEFT","BOX_DOUBLE_UP_AND_DOUBLE_RIGHT","drawConsole","dstX","dstY","srcConsole","srcX","srcY","srcWidth","srcHeight","cell","setBlocked","setBlockedSight","isVisible","isBlocked","isBlockedSight","computeOctantY","deltaX","deltaY","startSlopes","endSlopes","halfSlope","processedCell","extended","centreSlope","startSlope","endSlope","previousEndSlope","iteration","totalObstacles","obstaclesInLastLine","minSlope","idx","computeOctantX","computeFov","opt_noClear","opt_octants","updateExplored","tile","Font","url","charWidth","charHeight","scale","graphical","DEFAULT_FONT","FovOctants","FovQuadrants","getFovQuadrant","dx","dy","QUADRANT_SOUTHEAST","QUADRANT_EAST","QUADRANT_NORTHEAST","QUADRANT_SOUTHWEST","QUADRANT_WEST","QUADRANT_NORTHWEST","QUADRANT_SOUTH","QUADRANT_NORTH","Point","Rect","top","x2","y2","getCenter","intersects","other","contains","point","DialogState","dialog","rect","contentsOffset","open","count","DefaultDialogRenderer","getState","terminal","contentsRect","draw","term","dialogState","title","drawContents","GUI","renderer","dialogs","add","handleInput","activeIndex","activeState","splice","Dialog","Input","downTime","repeat","repeatTime","downCount","upCount","setDown","performance","now","update","time","isPressed","isClicked","KEY_COUNT","Keyboard","el","keys","Array","addEventListener","e","setKey","state","keyCode","Keys","VK_F11","stopPropagation","preventDefault","updateKeys","getKey","MessageDialog","message","super","console","offset","isKeyPressed","VK_ESCAPE","SelectDialog","options","callback","hoverIndex","String","fromCharCode","mouse","buttons","VK_A","isMouseOverOption","PATTERNS","BLOCK_TOP_HALF","active","BLOCK_RIGHT_HALF","loadImage","img","Image","onload","w","data","getImageData","result","src","loadImage2x","draw2x2","canvas","document","createElement","ctx","getContext","drawImage","i1","i2","i3","i4","colors","minError","Number","MAX_VALUE","bestCharCode","bestBg","bestFg","pattern","patternColors","computeColors","error","arrayToColor","sum","avg","cellError","delta","sqrt","rgb","Mouse","prevX","prevY","handleEvent","touchEventHandler","handleTouchEvent","bind","touches","touch","updatePosition","clientX","clientY","type","button","focus","getBoundingClientRect","terminalAspectRatio","rectAspectRatio","actualWidth","excess","actualHeight","dxs","dys","costs","computePath","map","source","dest","maxDist","sourceCell","hypot","SortedSet","size","u","pop","buildPath","Infinity","alt","insert","curr","reverse","initialValues","values","array","low","high","mid","midCell","RNG","seed","m","nextInt","nextFloat","nextRange","start","end","rangeSize","isNaN","chooseIndex","chances","total","reduce","roll","runningTotal","chooseKey","chancesMap","interpolate","DEFAULT_OPTIONS","font","Terminal","pixelWidth","pixelHeight","style","imageRendering","outline","tabIndex","handleResize","window","gl","antialias","program","createProgram","attachShader","buildShader","VERTEX_SHADER","FRAGMENT_SHADER","linkProgram","useProgram","uniform1i","getUniformLocation","positionAttribLocation","getAttribLocation","textureAttribLocation","fgColorAttribLocation","bgColorAttribLocation","cellCount","positionsArray","Float32Array","indexArray","Uint16Array","textureArray","foregroundUint8Array","Uint8Array","foregroundDataView","DataView","buffer","backgroundUint8Array","backgroundDataView","k","positionBuffer","createBuffer","indexBuffer","textureBuffer","foregroundBuffer","backgroundBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","texture","loadTexture","lastRenderTime","renderDelta","fps","averageFps","requestAnimationFrame","parent","parentElement","widthFactor","offsetWidth","heightFactor","offsetHeight","factor","name","location","enableVertexAttribArray","flush","textureArrayIndex","colorArrayIndex","textureX","textureY","setUint32","isKeyDown","getKeyDownCount","getMovementKey","VK_NUMPAD1","VK_B","VK_NUMPAD2","VK_J","VK_DOWN","VK_NUMPAD3","VK_N","VK_NUMPAD4","VK_H","VK_LEFT","VK_NUMPAD5","VK_PERIOD","VK_NUMPAD6","VK_L","VK_RIGHT","VK_NUMPAD7","VK_Y","VK_NUMPAD8","VK_K","VK_UP","VK_NUMPAD9","VK_U","sh","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","createTexture","bindTexture","TEXTURE_2D","internalFormat","RGBA","srcFormat","srcType","UNSIGNED_BYTE","pixel","texImage2D","image","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","render","clearColor","clearDepth","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","viewport","numComponents","FLOAT","normalize","stride","vertexAttribPointer","DYNAMIC_DRAW","activeTexture","TEXTURE0","vertexCount","UNSIGNED_SHORT","drawElements","TRIANGLES","renderLoop"],"sourceRoot":""}